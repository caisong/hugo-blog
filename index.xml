<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Caisong's Blog</title><link>https://caisong.github.io/</link><description>Recent content on Caisong's Blog</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Wed, 01 Jan 2025 17:47:51 +0800</lastBuildDate><atom:link href="https://caisong.github.io/index.xml" rel="self" type="application/rss+xml"/><item><title>换行转换</title><link>https://caisong.github.io/posts/%E6%8D%A2%E8%A1%8C%E8%BD%AC%E6%8D%A2/</link><pubDate>Wed, 01 Jan 2025 17:47:51 +0800</pubDate><guid>https://caisong.github.io/posts/%E6%8D%A2%E8%A1%8C%E8%BD%AC%E6%8D%A2/</guid><description>&lt;p>转换windows换行符至Linux&lt;/p></description></item><item><title>使用SSH证书的撤销功能（OpenSSH证书）</title><link>https://caisong.github.io/posts/%E4%BD%BF%E7%94%A8ssh%E8%AF%81%E4%B9%A6%E7%9A%84%E6%92%A4%E9%94%80%E5%8A%9F%E8%83%BDopenssh%E8%AF%81%E4%B9%A6/</link><pubDate>Mon, 30 Dec 2024 21:41:52 +0800</pubDate><guid>https://caisong.github.io/posts/%E4%BD%BF%E7%94%A8ssh%E8%AF%81%E4%B9%A6%E7%9A%84%E6%92%A4%E9%94%80%E5%8A%9F%E8%83%BDopenssh%E8%AF%81%E4%B9%A6/</guid><description>&lt;h2 id="ssh-证书ca授权">ssh 证书CA授权&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 授权给用户&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ssh-keygen -s /path/to/ca_key -I 标识 -n username -V +52w -z &amp;lt;serial number&amp;gt; /path/to/client.pub
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>52w 一年, 另外还支持授权给&lt;code>host&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>&lt;code>/etc/ssh/sshd_config&lt;/code>中添加&lt;code>ca&lt;/code> 证书公钥&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 用户信任列表&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>TrustedUserCAKeys /path/to/pub-cert.pub
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="撤销授权">撤销授权&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>ssh-keygen -k -f krl_file -z &amp;lt;serial number&amp;gt; xk-cert.pub
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># -s 指定ca公钥&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># -k 指定撤销&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ps. 不要使用ca 公钥去撤销，要使用授权时的序列表，否则该ca证书的所有授权都不被取消&lt;/p>
&lt;p>&lt;code>/etc/ssh/sshd_config&lt;/code>中添加撤销文件&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-plain" data-lang="plain">&lt;span style="display:flex;">&lt;span># 撤销列表 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>RevokedKeys /path/to/crl_file
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Dpdk sr-iov</title><link>https://caisong.github.io/posts/dpdksr-iov/</link><pubDate>Mon, 30 Dec 2024 21:40:42 +0800</pubDate><guid>https://caisong.github.io/posts/dpdksr-iov/</guid><description>&lt;p>dpdk sr-iov支持&lt;/p></description></item><item><title>C++中的const和指针</title><link>https://caisong.github.io/posts/c++%E4%B8%AD%E7%9A%84const%E5%92%8C%E6%8C%87%E9%92%88/</link><pubDate>Sat, 28 Dec 2024 21:40:32 +0800</pubDate><guid>https://caisong.github.io/posts/c++%E4%B8%AD%E7%9A%84const%E5%92%8C%E6%8C%87%E9%92%88/</guid><description>&lt;p>C++中的const 和指针
原则：从右向左读。* 读成 pointer to。&lt;/p></description></item><item><title>Centos更新rsyslog</title><link>https://caisong.github.io/posts/centos%E6%9B%B4%E6%96%B0rsyslog/</link><pubDate>Fri, 27 Dec 2024 21:40:34 +0800</pubDate><guid>https://caisong.github.io/posts/centos%E6%9B%B4%E6%96%B0rsyslog/</guid><description>&lt;p>centos 7 默认不携带mmnormlize这个module,需要额外安装&lt;/p></description></item><item><title>Rsyslog rfc5234 格式</title><link>https://caisong.github.io/posts/rsyslogrfc5234%E6%A0%BC%E5%BC%8F%E5%AE%9A%E4%B9%89/</link><pubDate>Thu, 26 Dec 2024 21:41:29 +0800</pubDate><guid>https://caisong.github.io/posts/rsyslogrfc5234%E6%A0%BC%E5%BC%8F%E5%AE%9A%E4%B9%89/</guid><description>&lt;p>rsyslog rfc5234格式定义&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-plain" data-lang="plain">&lt;span style="display:flex;">&lt;span>SYSLOG-MSG = HEADER SP STRUCTURED-DATA [SP MSG]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> HEADER = PRI VERSION SP TIMESTAMP SP HOSTNAME
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SP APP-NAME SP PROCID SP MSGID
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> PRI = &amp;#34;&amp;lt;&amp;#34; PRIVAL &amp;#34;&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> PRIVAL = 1*3DIGIT ; range 0 .. 191
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> VERSION = NONZERO-DIGIT 0*2DIGIT
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> HOSTNAME = NILVALUE / 1*255PRINTUSASCII
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> APP-NAME = NILVALUE / 1*48PRINTUSASCII
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> PROCID = NILVALUE / 1*128PRINTUSASCII
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> MSGID = NILVALUE / 1*32PRINTUSASCII
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> TIMESTAMP = NILVALUE / FULL-DATE &amp;#34;T&amp;#34; FULL-TIME
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> FULL-DATE = DATE-FULLYEAR &amp;#34;-&amp;#34; DATE-MONTH &amp;#34;-&amp;#34; DATE-MDAY
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> DATE-FULLYEAR = 4DIGIT
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> DATE-MONTH = 2DIGIT ; 01-12
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> DATE-MDAY = 2DIGIT ; 01-28, 01-29, 01-30, 01-31 based on
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ; month/year
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> FULL-TIME = PARTIAL-TIME TIME-OFFSET
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> PARTIAL-TIME = TIME-HOUR &amp;#34;:&amp;#34; TIME-MINUTE &amp;#34;:&amp;#34; TIME-SECOND
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [TIME-SECFRAC]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> TIME-HOUR = 2DIGIT ; 00-23
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> TIME-MINUTE = 2DIGIT ; 00-59
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> TIME-SECOND = 2DIGIT ; 00-59
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> TIME-SECFRAC = &amp;#34;.&amp;#34; 1*6DIGIT
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> TIME-OFFSET = &amp;#34;Z&amp;#34; / TIME-NUMOFFSET
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> TIME-NUMOFFSET = (&amp;#34;+&amp;#34; / &amp;#34;-&amp;#34;) TIME-HOUR &amp;#34;:&amp;#34; TIME-MINUTE
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> STRUCTURED-DATA = NILVALUE / 1*SD-ELEMENT
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SD-ELEMENT = &amp;#34;[&amp;#34; SD-ID *(SP SD-PARAM) &amp;#34;]&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SD-PARAM = PARAM-NAME &amp;#34;=&amp;#34; %d34 PARAM-VALUE %d34
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SD-ID = SD-NAME
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> PARAM-NAME = SD-NAME
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> PARAM-VALUE = UTF-8-STRING ; characters &amp;#39;&amp;#34;&amp;#39;, &amp;#39;\&amp;#39; and
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ; &amp;#39;]&amp;#39; MUST be escaped.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SD-NAME = 1*32PRINTUSASCII
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ; except &amp;#39;=&amp;#39;, SP, &amp;#39;]&amp;#39;, %d34 (&amp;#34;)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> MSG = MSG-ANY / MSG-UTF8
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> MSG-ANY = *OCTET ; not starting with BOM
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> MSG-UTF8 = BOM UTF-8-STRING
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> BOM = %xEF.BB.BF
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> UTF-8-STRING = *OCTET ; UTF-8 string as specified
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ; in RFC 3629
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> OCTET = %d00-255
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SP = %d32
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> PRINTUSASCII = %d33-126
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> NONZERO-DIGIT = %d49-57
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> DIGIT = %d48 / NONZERO-DIGIT
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> NILVALUE = &amp;#34;-&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>SD-ELEMENT &lt;code>[&lt;/code>和&lt;code>]&lt;/code>与字符间没有空格&lt;/li>
&lt;/ul></description></item><item><title>rsyslog rfc3164</title><link>https://caisong.github.io/posts/rsyslogrfc3164/</link><pubDate>Thu, 26 Dec 2024 21:41:28 +0800</pubDate><guid>https://caisong.github.io/posts/rsyslogrfc3164/</guid><description>&lt;p>自定义消息格式，但是mmnormalize模块解析失败，只能遵循标准，在已有字段中设置我的内容。特地看了下RFC 3164和5234，记录如下。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-plaintext" data-lang="plaintext">&lt;span style="display:flex;">&lt;span># RFC 3164
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;PRI&amp;gt;&amp;lt;HEADER&amp;gt; &amp;lt;MSG&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>PRI和HEADER之间无空格
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>PRI = &amp;#34;&amp;lt;&amp;#34;Priority&amp;#34;&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Priority = (Facility&amp;lt;&amp;lt;3)+Severity
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Facility = 0~23
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Serverity = 0~7
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>HEADER = &amp;lt;TIMESTAMP&amp;gt; &amp;lt;HOSTNAME&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>TIMESTAMP = Mmm dd hh:mm:ss 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Mmm 代表月份，与dd之间有2个空格
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>时间使用24小时制
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>HOSTNAME 就是正常的hostname，不能有空格，或者使用IPv4 IPv6地址。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>MSG = &amp;lt;TAG&amp;gt;&amp;lt;CONTENT&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>TAG就是程序名，不超过32字节，tag中的非字母符号就代表结束。因此CONTENT开头经常使用“[“、“：”或者空格表示内容的开始。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>内存泄漏检测</title><link>https://caisong.github.io/posts/hook%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D/</link><pubDate>Thu, 26 Dec 2024 21:40:58 +0800</pubDate><guid>https://caisong.github.io/posts/hook%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D/</guid><description>&lt;p>内存泄漏检测&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cpp" data-lang="cpp">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#define _GNU_SOURCE
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;dlfcn.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;stdlib.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;stdio.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;map&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// 用于存储内存块信息
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>std&lt;span style="color:#f92672">::&lt;/span>map&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#66d9ef">void&lt;/span>&lt;span style="color:#f92672">*&lt;/span>, size_t&lt;span style="color:#f92672">&amp;gt;&lt;/span> allocated_memory;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">void&lt;/span>&lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#a6e22e">malloc&lt;/span>(size_t size) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// 获取原始的 malloc 函数
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">static&lt;/span> &lt;span style="color:#66d9ef">void&lt;/span>&lt;span style="color:#f92672">*&lt;/span> (&lt;span style="color:#f92672">*&lt;/span>original_malloc)(size_t) &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">nullptr&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> (&lt;span style="color:#f92672">!&lt;/span>original_malloc) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> original_malloc &lt;span style="color:#f92672">=&lt;/span> (&lt;span style="color:#66d9ef">void&lt;/span>&lt;span style="color:#f92672">*&lt;/span> (&lt;span style="color:#f92672">*&lt;/span>)(size_t))dlsym(RTLD_NEXT, &lt;span style="color:#e6db74">&amp;#34;malloc&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// 分配内存
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">void&lt;/span>&lt;span style="color:#f92672">*&lt;/span> ptr &lt;span style="color:#f92672">=&lt;/span> original_malloc(size);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// 记录分配的内存块
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> allocated_memory[ptr] &lt;span style="color:#f92672">=&lt;/span> size;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> printf(&lt;span style="color:#e6db74">&amp;#34;malloc: %p, size: %zu&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>, ptr, size);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> ptr;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">free&lt;/span>(&lt;span style="color:#66d9ef">void&lt;/span>&lt;span style="color:#f92672">*&lt;/span> ptr) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// 获取原始的 free 函数
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">static&lt;/span> &lt;span style="color:#66d9ef">void&lt;/span> (&lt;span style="color:#f92672">*&lt;/span>original_free)(&lt;span style="color:#66d9ef">void&lt;/span>&lt;span style="color:#f92672">*&lt;/span>) &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">nullptr&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> (&lt;span style="color:#f92672">!&lt;/span>original_free) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> original_free &lt;span style="color:#f92672">=&lt;/span> (&lt;span style="color:#66d9ef">void&lt;/span> (&lt;span style="color:#f92672">*&lt;/span>)(&lt;span style="color:#66d9ef">void&lt;/span>&lt;span style="color:#f92672">*&lt;/span>))dlsym(RTLD_NEXT, &lt;span style="color:#e6db74">&amp;#34;free&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// 释放内存前检查是否存在泄漏
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">if&lt;/span> (allocated_memory.find(ptr) &lt;span style="color:#f92672">!=&lt;/span> allocated_memory.end()) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> allocated_memory.erase(ptr); &lt;span style="color:#75715e">// 删除记录
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> printf(&lt;span style="color:#e6db74">&amp;#34;free: %p&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>, ptr);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#66d9ef">else&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> printf(&lt;span style="color:#e6db74">&amp;#34;Warning: Freeing unallocated memory: %p&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>, ptr);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// 调用原始的 free 函数
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> original_free(ptr);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// 内存泄漏检查函数
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">check_memory_leaks&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> (&lt;span style="color:#f92672">!&lt;/span>allocated_memory.empty()) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> printf(&lt;span style="color:#e6db74">&amp;#34;Memory leaks detected:&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> (&lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#66d9ef">auto&lt;/span>&lt;span style="color:#f92672">&amp;amp;&lt;/span> entry : allocated_memory) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> printf(&lt;span style="color:#e6db74">&amp;#34;Leaked memory: %p, size: %zu&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>, entry.first, entry.second);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#66d9ef">else&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> printf(&lt;span style="color:#e6db74">&amp;#34;No memory leaks detected.&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// 注册函数，在程序退出时自动调用 check_memory_leaks
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">__attribute__&lt;/span>((constructor)) register_leak_check() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> atexit(check_memory_leaks);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Tmux配置（复杂版）</title><link>https://caisong.github.io/posts/tmux%E9%85%8D%E7%BD%AE%E5%A4%8D%E6%9D%82%E7%89%88/</link><pubDate>Wed, 25 Dec 2024 21:41:36 +0800</pubDate><guid>https://caisong.github.io/posts/tmux%E9%85%8D%E7%BD%AE%E5%A4%8D%E6%9D%82%E7%89%88/</guid><description>&lt;p>&lt;strong>复杂版&lt;/strong>&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-config" data-lang="config"># : &amp;lt;&amp;lt; &amp;#39;EOF&amp;#39;
# https://github.com/gpakosz/.tmux
# (‑●‑●)&amp;gt; dual licensed under the WTFPL v2 license and the MIT license,
# without any warranty.
# Copyright 2012— Gregory Pakosz (@gpakosz).
#
# ------------------------------------------------------------------------------
# /!\ DO NOT EDIT THIS FILE
# instead, override your .local customization file copy, see README.md /!\
# ------------------------------------------------------------------------------


# -- general -------------------------------------------------------------------

set -g default-terminal &amp;#34;screen-256color&amp;#34;
set -ga terminal-overrides &amp;#34;,*256col*:Tc&amp;#34;

setw -g xterm-keys on
set -s escape-time 10 # faster command sequences
set -sg repeat-time 600 # increase repeat timeout
set -s focus-events on

set -g prefix2 C-a # GNU-Screen compatible prefix
bind C-a send-prefix -2

set -q -g status-utf8 on # expect UTF-8 (tmux &amp;lt; 2.2)
setw -q -g utf8 on

set -g history-limit 5000 # boost history

# edit configuration
bind e new-window -n &amp;#34;#{TMUX_CONF_LOCAL}&amp;#34; -e EDITOR=&amp;#34;$EDITOR&amp;#34; sh -c &amp;#39;case &amp;#34;${EDITOR:-vim}&amp;#34; in *vim*) ${EDITOR:-vim} -c &amp;#34;:set syntax=tmux&amp;#34; &amp;#34;$TMUX_CONF_LOCAL&amp;#34;;; *) $EDITOR &amp;#34;$TMUX_CONF_LOCAL&amp;#34;;; esac &amp;amp;&amp;amp; &amp;#34;$TMUX_PROGRAM&amp;#34; ${TMUX_SOCKET:+-S &amp;#34;$TMUX_SOCKET&amp;#34;} source &amp;#34;$TMUX_CONF&amp;#34; \; display &amp;#34;$TMUX_CONF_LOCAL sourced&amp;#34;&amp;#39;

# reload configuration
bind r run &amp;#39;&amp;#34;$TMUX_PROGRAM&amp;#34; ${TMUX_SOCKET:+-S &amp;#34;$TMUX_SOCKET&amp;#34;} source &amp;#34;$TMUX_CONF&amp;#34;&amp;#39; \; display &amp;#34;#{TMUX_CONF} sourced&amp;#34;


# -- display -------------------------------------------------------------------

set -g base-index 1 # start windows numbering at 1
setw -g pane-base-index 1 # make pane numbering consistent with windows

setw -g automatic-rename on # rename window to reflect current program
set -g renumber-windows on # renumber windows when a window is closed

set -g set-titles on # set terminal title

set -g display-panes-time 800 # slightly longer pane indicators display time
set -g display-time 1000 # slightly longer status messages display time

set -g status-interval 10 # redraw status line every 10 seconds

# clear both screen and history
bind -n C-l send-keys C-l \; run &amp;#39;sleep 0.2&amp;#39; \; clear-history

# activity
set -g monitor-activity on
set -g visual-activity off


# -- navigation ----------------------------------------------------------------

# create session
bind C-c new-session

# find session
bind C-f command-prompt -p find-session &amp;#39;switch-client -t %%&amp;#39;

# session navigation
bind BTab switch-client -l # move to last session

# split current window horizontally
bind - split-window -v
# split current window vertically
bind _ split-window -h

# pane navigation
bind -r h select-pane -L # move left
bind -r j select-pane -D # move down
bind -r k select-pane -U # move up
bind -r l select-pane -R # move right
bind &amp;gt; swap-pane -D # swap current pane with the next one
bind &amp;lt; swap-pane -U # swap current pane with the previous one

# maximize current pane
bind + run &amp;#34;cut -c3- &amp;#39;#{TMUX_CONF}&amp;#39; | sh -s _maximize_pane &amp;#39;#{session_name}&amp;#39; &amp;#39;#D&amp;#39;&amp;#34;

# pane resizing
bind -r H resize-pane -L 2
bind -r J resize-pane -D 2
bind -r K resize-pane -U 2
bind -r L resize-pane -R 2

# window navigation
unbind n
unbind p
bind -r C-h previous-window # select previous window
bind -r C-l next-window # select next window
bind Tab last-window # move to last active window

# toggle mouse
bind m run &amp;#34;cut -c3- &amp;#39;#{TMUX_CONF}&amp;#39; | sh -s _toggle_mouse&amp;#34;


# -- facebook pathpicker -------------------------------------------------------

bind F run &amp;#34;cut -c3- &amp;#39;#{TMUX_CONF}&amp;#39; | sh -s _fpp &amp;#39;#{pane_id}&amp;#39; &amp;#39;#{pane_current_path}&amp;#39;&amp;#34;


# -- copy mode -----------------------------------------------------------------

bind Enter copy-mode # enter copy mode

bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi C-v send -X rectangle-toggle
bind -T copy-mode-vi y send -X copy-selection-and-cancel
bind -T copy-mode-vi Escape send -X cancel
bind -T copy-mode-vi H send -X start-of-line
bind -T copy-mode-vi L send -X end-of-line

# copy to X11 clipboard
if -b &amp;#39;command -v xsel &amp;gt; /dev/null 2&amp;gt;&amp;amp;1&amp;#39; &amp;#39;bind y run -b &amp;#34;\&amp;#34;\$TMUX_PROGRAM\&amp;#34; \${TMUX_SOCKET:+-S \&amp;#34;\$TMUX_SOCKET\&amp;#34;} save-buffer - | xsel -i -b&amp;#34;&amp;#39;
if -b &amp;#39;! command -v xsel &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 &amp;amp;&amp;amp; command -v xclip &amp;gt; /dev/null 2&amp;gt;&amp;amp;1&amp;#39; &amp;#39;bind y run -b &amp;#34;\&amp;#34;\$TMUX_PROGRAM\&amp;#34; \${TMUX_SOCKET:+-S \&amp;#34;\$TMUX_SOCKET\&amp;#34;} save-buffer - | xclip -i -selection clipboard &amp;gt;/dev/null 2&amp;gt;&amp;amp;1&amp;#34;&amp;#39;
# copy to Wayland clipboard
if -b &amp;#39;[ &amp;#34;$XDG_SESSION_TYPE&amp;#34; = &amp;#34;wayland&amp;#34; ] &amp;amp;&amp;amp; command -v wl-copy &amp;gt; /dev/null 2&amp;gt;&amp;amp;1&amp;#39; &amp;#39;bind y run -b &amp;#34;\&amp;#34;\$TMUX_PROGRAM\&amp;#34; \${TMUX_SOCKET:+-S \&amp;#34;\$TMUX_SOCKET\&amp;#34;} save-buffer - | wl-copy&amp;#34;&amp;#39;
# copy to macOS clipboard
if -b &amp;#39;command -v pbcopy &amp;gt; /dev/null 2&amp;gt;&amp;amp;1&amp;#39; &amp;#39;bind y run -b &amp;#34;\&amp;#34;\$TMUX_PROGRAM\&amp;#34; \${TMUX_SOCKET:+-S \&amp;#34;\$TMUX_SOCKET\&amp;#34;} save-buffer - | pbcopy&amp;#34;&amp;#39;
# copy to Windows clipboard
if -b &amp;#39;command -v clip.exe &amp;gt; /dev/null 2&amp;gt;&amp;amp;1&amp;#39; &amp;#39;bind y run -b &amp;#34;\&amp;#34;\$TMUX_PROGRAM\&amp;#34; \${TMUX_SOCKET:+-S \&amp;#34;\$TMUX_SOCKET\&amp;#34;} save-buffer - | clip.exe&amp;#34;&amp;#39;
if -b &amp;#39;[ -c /dev/clipboard ]&amp;#39; &amp;#39;bind y run -b &amp;#34;\&amp;#34;\$TMUX_PROGRAM\&amp;#34; \${TMUX_SOCKET:+-S \&amp;#34;\$TMUX_SOCKET\&amp;#34;} save-buffer - &amp;gt; /dev/clipboard&amp;#34;&amp;#39;


# -- buffers -------------------------------------------------------------------

bind b list-buffers # list paste buffers
bind p paste-buffer -p # paste from the top paste buffer
bind P choose-buffer # choose which buffer to paste from


# -- 8&amp;lt; ------------------------------------------------------------------------

%if #{==:#{TMUX_PROGRAM},}
 run &amp;#39;TMUX_PROGRAM=&amp;#34;$(LSOF=$(PATH=&amp;#34;$PATH:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin&amp;#34; command -v lsof); $LSOF -b -w -a -d txt -p #{pid} -Fn 2&amp;gt;/dev/null | perl -n -e &amp;#34;if (s/^n((?:.(?!dylib$|so$))+)$/\1/g &amp;amp;&amp;amp; s/(?:\s+\([^\s]+?\))?$//g) { print; exit } } exit 1; {&amp;#34; || readlink &amp;#34;/proc/#{pid}/exe&amp;#34; 2&amp;gt;/dev/null)&amp;#34;; {[ -f &amp;#34;$TMUX_PROGRAM&amp;#34; ] &amp;amp;&amp;amp; [ -x &amp;#34;$TMUX_PROGRAM&amp;#34; ]} || TMUX_PROGRAM=&amp;#34;$(command -v tmux || printf tmux)&amp;#34;; &amp;#34;$TMUX_PROGRAM&amp;#34; -S #{socket_path} set-environment -g TMUX_PROGRAM &amp;#34;$TMUX_PROGRAM&amp;#34;&amp;#39;
%endif
%if #{==:#{TMUX_SOCKET},}
 run &amp;#39;&amp;#34;$TMUX_PROGRAM&amp;#34; -S #{socket_path} set-environment -g TMUX_SOCKET &amp;#34;#{socket_path}&amp;#34;&amp;#39;
%endif
%if #{==:#{TMUX_CONF},}
 run &amp;#39;&amp;#34;$TMUX_PROGRAM&amp;#34; set-environment -g TMUX_CONF $(for conf in &amp;#34;$HOME/.tmux.conf&amp;#34; &amp;#34;$XDG_CONFIG_HOME/tmux/tmux.conf&amp;#34; &amp;#34;$HOME/.config/tmux/tmux.conf&amp;#34;; do [ -f &amp;#34;$conf&amp;#34; ] &amp;amp;&amp;amp; printf &amp;#34;%s&amp;#34; &amp;#34;$conf&amp;#34; &amp;amp;&amp;amp; break; done)&amp;#39;
%endif
%if #{==:#{TMUX_CONF_LOCAL},}
 run &amp;#39;&amp;#34;$TMUX_PROGRAM&amp;#34; set-environment -g TMUX_CONF_LOCAL &amp;#34;$TMUX_CONF.local&amp;#34;&amp;#39;
%endif

run &amp;#39;&amp;#34;$TMUX_PROGRAM&amp;#34; source &amp;#34;$TMUX_CONF_LOCAL&amp;#34;&amp;#39;
run &amp;#39;cut -c3- &amp;#34;$TMUX_CONF&amp;#34; | sh -s _apply_configuration&amp;#39;

# EOF
#
# # exit the script if any statement returns a non-true return value
# set -e
#
# unset GREP_OPTIONS
# export LC_NUMERIC=C
# # shellcheck disable=SC3041
# if (set +H 2&amp;gt;/dev/null); then
# set +H
# fi
#
# if ! printf &amp;#39;&amp;#39; | sed -E &amp;#39;s///&amp;#39; 2&amp;gt;/dev/null; then
# if printf &amp;#39;&amp;#39; | sed -r &amp;#39;s///&amp;#39; 2&amp;gt;/dev/null; then
# sed() {
# n=$#; while [ &amp;#34;$n&amp;#34; -gt 0 ]; do arg=$1; shift; case $arg in -E*) arg=-r${arg#-E};; esac; set -- &amp;#34;$@&amp;#34; &amp;#34;$arg&amp;#34;; n=$(( n - 1 )); done
# command sed &amp;#34;$@&amp;#34;
# }
# fi
# fi
#
# _uname_s=$(uname -s)
#
# [ -z &amp;#34;$TMUX&amp;#34; ] &amp;amp;&amp;amp; exit 255
# if [ -z &amp;#34;$TMUX_SOCKET&amp;#34; ]; then
# TMUX_SOCKET=$(printf &amp;#39;%s&amp;#39; &amp;#34;$TMUX&amp;#34; | cut -d, -f1)
# fi
# if [ -z &amp;#34;$TMUX_PROGRAM&amp;#34; ]; then
# TMUX_PID=$(printf &amp;#39;%s&amp;#39; &amp;#34;$TMUX&amp;#34; | cut -d, -f2)
# TMUX_PROGRAM=$(lsof -b -w -a -d txt -p &amp;#34;$TMUX_PID&amp;#34; -Fn 2&amp;gt;/dev/null | perl -n -e &amp;#34;if (s/^n((?:.(?!dylib$|so$))+)$/\1/g) { print; exit } } exit 1; {&amp;#34; || readlink &amp;#34;/proc/$TMUX_PID/exe&amp;#34; 2&amp;gt;/dev/null || printf tmux)
# fi
# if [ &amp;#34;$TMUX_PROGRAM&amp;#34; = &amp;#34;tmux&amp;#34; ]; then
# tmux() {
# command tmux ${TMUX_SOCKET:+-S &amp;#34;$TMUX_SOCKET&amp;#34;} &amp;#34;$@&amp;#34;
# }
# else
# tmux() {
# &amp;#34;$TMUX_PROGRAM&amp;#34; ${TMUX_SOCKET:+-S &amp;#34;$TMUX_SOCKET&amp;#34;} &amp;#34;$@&amp;#34;
# }
# fi
#
# _tmux_version=$(tmux -V | awk &amp;#39;{gsub(/[^0-9.]/, &amp;#34;&amp;#34;, $2); print ($2+0) * 100}&amp;#39;)
#
# _is_true() {
# [ &amp;#34;$1&amp;#34; = &amp;#34;true&amp;#34; ] || [ &amp;#34;$1&amp;#34; = &amp;#34;yes&amp;#34; ] || [ &amp;#34;$1&amp;#34; = &amp;#34;1&amp;#34; ]
# }
#
# _is_enabled() {
# [ &amp;#34;$1&amp;#34; = &amp;#34;enabled&amp;#34; ]
# }
#
# _is_disabled() {
# [ &amp;#34;$1&amp;#34; = &amp;#34;disabled&amp;#34; ]
# }
#
# _circled() {
# circled_digits=&amp;#39;⓪ ① ② ③ ④ ⑤ ⑥ ⑦ ⑧ ⑨ ⑩ ⑪ ⑫ ⑬ ⑭ ⑮ ⑯ ⑰ ⑱ ⑲ ⑳&amp;#39;
# if [ &amp;#34;$1&amp;#34; -le 20 ] 2&amp;gt;/dev/null; then
# i=$(( $1 + 1 ))
# eval set -- &amp;#34;$circled_digits&amp;#34;
# eval echo &amp;#34;\${$i}&amp;#34;
# else
# echo &amp;#34;$1&amp;#34;
# fi
# }
#
# _decode_unicode_escapes() {
# printf &amp;#39;%s&amp;#39; &amp;#34;$*&amp;#34; | perl -CS -pe &amp;#39;s/(\\u([0-9A-Fa-f]{1,4})|\\U([0-9A-Fa-f]{1,8}))/chr(hex($2.$3))/eg&amp;#39; 2&amp;gt;/dev/null
# }
#
# if command -v pkill &amp;gt; /dev/null 2&amp;gt;&amp;amp;1; then
# _pkillf() {
# pkill -f &amp;#34;$@&amp;#34; || true
# }
# else
# case &amp;#34;$_uname_s&amp;#34; in
# *CYGWIN*)
# _pkillf() {
# while IFS= read -r pid; do
# kill &amp;#34;$pid&amp;#34; || true
# done &amp;lt;&amp;lt; EOF
# $(grep -Eao &amp;#34;$@&amp;#34; /proc/*/cmdline | xargs -0 | sed -E -n &amp;#39;s,/proc/([0-9]+)/.+$,\1,pg&amp;#39;)
# EOF
# }
# ;;
# *)
# # shellcheck disable=SC2009
# _pkillf() {
# while IFS= read -r pid; do
# kill &amp;#34;$pid&amp;#34; || true
# done &amp;lt;&amp;lt; EOF
# $(ps -x -o pid= -o command= | grep -E &amp;#34;$@&amp;#34; | cut -d&amp;#39; &amp;#39; -f1)
# EOF
# }
# ;;
# esac
# fi
#
# _bar() {
# bar_palette=$(printf &amp;#39;%s&amp;#39; &amp;#34;$1&amp;#34; | tr &amp;#39;;&amp;#39; &amp;#39;,&amp;#39;)
# bar_symbol_empty=$2
# bar_symbol_full=$3
# bar_length=$4
# bar_value=$5
#
# if [ &amp;#34;$bar_length&amp;#34; = &amp;#34;auto&amp;#34; ]; then
# columns=${6:-$(tmux -q display -p &amp;#39;#{client_width}&amp;#39; 2&amp;gt; /dev/null || echo 80)}
# if [ &amp;#34;$columns&amp;#34; -ge 160 ]; then
# bar_length=12
# elif [ &amp;#34;$columns&amp;#34; -ge 130 ]; then
# bar_length=10
# elif [ &amp;#34;$columns&amp;#34; -ge 120 ]; then
# bar_length=8
# elif [ &amp;#34;$columns&amp;#34; -ge 100 ]; then
# bar_length=6
# else
# bar_length=4
# fi
# fi
#
# if echo &amp;#34;$bar_palette&amp;#34; | grep -q -E &amp;#39;^heat|gradient(,[#a-z0-9]{7,9})?$&amp;#39;; then
# # shellcheck disable=SC2086
# { set -f; IFS=,; set -- $bar_palette; unset IFS; set +f; }
# palette_style=$1
# bg=${2:-none}
# [ &amp;#34;$palette_style&amp;#34; = &amp;#34;gradient&amp;#34; ] &amp;amp;&amp;amp; \
# palette=&amp;#34;196 202 208 214 220 226 190 154 118 82 46&amp;#34;
# [ &amp;#34;$palette_style&amp;#34; = &amp;#34;heat&amp;#34; ] &amp;amp;&amp;amp; \
# palette=&amp;#34;243 245 247 144 143 142 184 214 208 202 196&amp;#34;
#
# palette=$(echo &amp;#34;$palette&amp;#34; | awk -v n=&amp;#34;$bar_length&amp;#34; &amp;#39;{ for (i = 0; i &amp;lt; n; ++i) printf $(1 + (i * NF / n))&amp;#34; &amp;#34; }&amp;#39;)
# eval set -- &amp;#34;$palette&amp;#34;
#
# full=$(awk &amp;#34;BEGIN { printf \&amp;#34;%.0f\&amp;#34;, ($bar_value) * $bar_length }&amp;#34;)
# bar=&amp;#34;#[bg=$bg]&amp;#34;
# # shellcheck disable=SC2046
# [ &amp;#34;$full&amp;#34; -gt 0 ] &amp;amp;&amp;amp; \
# bar=&amp;#34;$bar$(printf &amp;#34;#[fg=colour%s]$bar_symbol_full&amp;#34; $(echo &amp;#34;$palette&amp;#34; | cut -d&amp;#39; &amp;#39; -f1-&amp;#34;$full&amp;#34;))&amp;#34;
# # shellcheck disable=SC2046
# empty=$((bar_length - full))
# # shellcheck disable=SC2046
# [ &amp;#34;$empty&amp;#34; -gt 0 ] &amp;amp;&amp;amp; \
# bar=&amp;#34;$bar$(printf &amp;#34;#[fg=colour%s]$bar_symbol_empty&amp;#34; $(echo &amp;#34;$palette&amp;#34; | cut -d&amp;#39; &amp;#39; -f$((full + 1))-$((full + empty))))&amp;#34;
# eval bar=&amp;#34;$bar#[fg=colour\${$((full == 0 ? 1 : full))}]&amp;#34;
# elif echo &amp;#34;$bar_palette&amp;#34; | grep -q -E &amp;#39;^(([#a-z0-9]{7,9}|none),?){3}$&amp;#39;; then
# # shellcheck disable=SC2086
# { set -f; IFS=,; set -- $bar_palette; unset IFS; set +f; }
# full_fg=$1
# empty_fg=$2
# bg=$3
#
# full=$(awk &amp;#34;BEGIN { printf \&amp;#34;%.0f\&amp;#34;, ($bar_value) * $bar_length }&amp;#34;)
# [ &amp;#34;$bg&amp;#34; != &amp;#34;none&amp;#34; ] &amp;amp;&amp;amp; \
# bar=&amp;#34;#[bg=$bg]&amp;#34;
# #shellcheck disable=SC2046
# [ &amp;#34;$full&amp;#34; -gt 0 ] &amp;amp;&amp;amp; \
# bar=&amp;#34;$bar#[fg=$full_fg]$(printf &amp;#34;%0.s$bar_symbol_full&amp;#34; $(seq 1 &amp;#34;$full&amp;#34;))&amp;#34;
# empty=$((bar_length - full))
# #shellcheck disable=SC2046
# [ &amp;#34;$empty&amp;#34; -gt 0 ] &amp;amp;&amp;amp; \
# bar=&amp;#34;$bar#[fg=$empty_fg]$(printf &amp;#34;%0.s$bar_symbol_empty&amp;#34; $(seq 1 &amp;#34;$empty&amp;#34;))&amp;#34; &amp;amp;&amp;amp; \
# bar=&amp;#34;$bar#[fg=$empty_fg]&amp;#34;
# fi
#
# printf &amp;#39;%s&amp;#39; &amp;#34;$bar&amp;#34;
# }
#
# _hbar() {
# hbar_palette=$(printf &amp;#39;%s&amp;#39; &amp;#34;$1&amp;#34; | tr &amp;#39;;&amp;#39; &amp;#39;,&amp;#39;)
# hbar_value=$2
#
# if echo &amp;#34;$hbar_palette&amp;#34; | grep -q -E &amp;#39;^heat|gradient(,[#a-z0-9]{7,9})?$&amp;#39;; then
# # shellcheck disable=SC2086
# { set -f; IFS=,; set -- $hbar_palette; unset IFS; set +f; }
# palette_style=$1
# [ &amp;#34;$palette_style&amp;#34; = &amp;#34;gradient&amp;#34; ] &amp;amp;&amp;amp; \
# palette=&amp;#34;196 202 208 214 220 226 190 154 118 82 46&amp;#34;
# [ &amp;#34;$palette_style&amp;#34; = &amp;#34;heat&amp;#34; ] &amp;amp;&amp;amp; \
# palette=&amp;#34;233 234 235 237 239 241 243 245 247 144 143 142 184 214 208 202 196&amp;#34;
#
# palette=$(echo &amp;#34;$palette&amp;#34; | awk -v n=8 &amp;#39;{ for (i = 0; i &amp;lt; n; ++i) printf $(1 + (i * NF / n))&amp;#34; &amp;#34; }&amp;#39;)
# eval set -- &amp;#34;$palette&amp;#34;
#
# full=$(awk &amp;#34;BEGIN { printf \&amp;#34;%.0f\&amp;#34;, ($hbar_value) * 8 }&amp;#34;)
# eval hbar_fg=&amp;#34;colour\${$((full == 0 ? 1 : full))}&amp;#34;
# elif echo &amp;#34;$hbar_palette&amp;#34; | grep -q -E &amp;#39;^([#a-z0-9]{7,9},?){3}$&amp;#39;; then
# # shellcheck disable=SC2086
# { set -f; IFS=,; set -- $hbar_palette; unset IFS; set +f; }
#
# # shellcheck disable=SC2046
# eval $(awk &amp;#34;BEGIN { printf \&amp;#34;hbar_fg=$%d\&amp;#34;, (($hbar_value) - 0.001) * $# + 1 }&amp;#34;)
# fi
#
# eval set -- &amp;#34;▏ ▎ ▍ ▌ ▋ ▊ ▉ █&amp;#34;
# # shellcheck disable=SC2046
# eval $(awk &amp;#34;BEGIN { printf \&amp;#34;hbar_symbol=$%d\&amp;#34;, ($hbar_value) * ($# - 1) + 1 }&amp;#34;)
# hbar=&amp;#34;#[bg=none]#[fg=${hbar_fg?}]${hbar_symbol?}&amp;#34;
#
# printf &amp;#39;%s&amp;#39; &amp;#34;$hbar&amp;#34;
# }
#
# _vbar() {
# vbar_palette=$(printf &amp;#39;%s&amp;#39; &amp;#34;$1&amp;#34; | tr &amp;#39;;&amp;#39; &amp;#39;,&amp;#39;)
# vbar_value=$2
#
# if echo &amp;#34;$vbar_palette&amp;#34; | grep -q -E &amp;#39;^heat|gradient(,[#a-z0-9]{7,9})?$&amp;#39;; then
# # shellcheck disable=SC2086
# { set -f; IFS=,; set -- $vbar_palette; unset IFS; set +f; }
# palette_style=$1
# [ &amp;#34;$palette_style&amp;#34; = &amp;#34;gradient&amp;#34; ] &amp;amp;&amp;amp; \
# palette=&amp;#34;196 202 208 214 220 226 190 154 118 82 46&amp;#34;
# [ &amp;#34;$palette_style&amp;#34; = &amp;#34;heat&amp;#34; ] &amp;amp;&amp;amp; \
# palette=&amp;#34;233 234 235 237 239 241 243 245 247 144 143 142 184 214 208 202 196&amp;#34;
#
# palette=$(echo &amp;#34;$palette&amp;#34; | awk -v n=8 &amp;#39;{ for (i = 0; i &amp;lt; n; ++i) printf $(1 + (i * NF / n))&amp;#34; &amp;#34; }&amp;#39;)
# eval set -- &amp;#34;$palette&amp;#34;
#
# full=$(awk &amp;#34;BEGIN { printf \&amp;#34;%.0f\&amp;#34;, ($vbar_value) * 8 }&amp;#34;)
# eval vbar_fg=&amp;#34;colour\${$((full == 0 ? 1 : full))}&amp;#34;
# elif echo &amp;#34;$vbar_palette&amp;#34; | grep -q -E &amp;#39;^([#a-z0-9]{7,9},?){3}$&amp;#39;; then
# # shellcheck disable=SC2086
# { set -f; IFS=,; set -- $vbar_palette; unset IFS; set +f; }
#
# # shellcheck disable=SC2046
# eval $(awk &amp;#34;BEGIN { printf \&amp;#34;vbar_fg=$%d\&amp;#34;, (($vbar_value) - 0.001) * $# + 1 }&amp;#34;)
# fi
#
# eval set -- &amp;#34;▁ ▂ ▃ ▄ ▅ ▆ ▇ █&amp;#34;
# # shellcheck disable=SC2046
# eval $(awk &amp;#34;BEGIN { printf \&amp;#34;vbar_symbol=$%d\&amp;#34;, ($vbar_value) * ($# - 1) + 1 }&amp;#34;)
# vbar=&amp;#34;#[bg=none]#[fg=${vbar_fg?}]${vbar_symbol?}&amp;#34;
#
# printf &amp;#39;%s&amp;#39; &amp;#34;$vbar&amp;#34;
# }
#
# _maximize_pane() {
# current_session=${1:-$(tmux display -p &amp;#39;#{session_name}&amp;#39;)}
# current_pane=${2:-$(tmux display -p &amp;#39;#{pane_id}&amp;#39;)}
#
# dead_panes=$(tmux list-panes -s -t &amp;#34;$current_session&amp;#34; -F &amp;#39;#{pane_dead} #{pane_id} #{pane_start_command}&amp;#39; | grep -E -o &amp;#39;^1 %.+maximized.+$&amp;#39; || true)
# restore=$(printf &amp;#34;%s&amp;#34; &amp;#34;$dead_panes&amp;#34; | sed -n -E -e &amp;#34;s/^1 $current_pane .+maximized.+&amp;#39;(%[0-9]+)&amp;#39;\&amp;#34;?$/tmux swap-pane -s \1 -t $current_pane \; kill-pane -t $current_pane/p&amp;#34;\
# -e &amp;#34;s/^1 (%[0-9]+) .+maximized.+&amp;#39;$current_pane&amp;#39;\&amp;#34;?$/tmux swap-pane -s \1 -t $current_pane \; kill-pane -t \1/p&amp;#34;)
#
# if [ -z &amp;#34;$restore&amp;#34; ]; then
# [ &amp;#34;$(tmux list-panes -t &amp;#34;$current_session:&amp;#34; | wc -l | sed &amp;#39;s/^ *//g&amp;#39;)&amp;#34; -eq 1 ] &amp;amp;&amp;amp; tmux display &amp;#34;Can&amp;#39;t maximize with only one pane&amp;#34; &amp;amp;&amp;amp; return
# info=$(tmux new-window -t &amp;#34;$current_session:&amp;#34; -F &amp;#34;#{session_name}:#{window_index}.#{pane_id}&amp;#34; -P &amp;#34;maximized... 2&amp;gt;/dev/null &amp;amp; \&amp;#34;$TMUX_PROGRAM\&amp;#34; ${TMUX_SOCKET:+-S \&amp;#34;$TMUX_SOCKET\&amp;#34;} setw -t \&amp;#34;$current_session:\&amp;#34; remain-on-exit on; printf \&amp;#34;\\033[\$(tput lines);0fPane has been maximized, press &amp;lt;prefix&amp;gt;+ to restore\n\&amp;#34; &amp;#39;$current_pane&amp;#39;&amp;#34;)
# session_window=${info%.*}
# new_pane=${info#*.}
#
# retry=20
# while [ &amp;#34;$(&amp;#34;$TMUX_PROGRAM&amp;#34; ${TMUX_SOCKET:+-S &amp;#34;$TMUX_SOCKET&amp;#34;} list-panes -t &amp;#34;$session_window&amp;#34; -F &amp;#39;#{session_name}:#{window_index}.#{pane_id} #{pane_dead}&amp;#39; 2&amp;gt;/dev/null)&amp;#34; != &amp;#34;$info 1&amp;#34; ] &amp;amp;&amp;amp; [ &amp;#34;$retry&amp;#34; -ne 0 ]; do
# sleep 0.1
# retry=$((retry - 1))
# done
# if [ &amp;#34;$retry&amp;#34; -eq 0 ]; then
# tmux display &amp;#39;Unable to maximize pane&amp;#39;
# fi
#
# tmux setw -t &amp;#34;$session_window&amp;#34; remain-on-exit off \; swap-pane -s &amp;#34;$current_pane&amp;#34; -t &amp;#34;$new_pane&amp;#34;
# else
# $restore || tmux kill-pane
# fi
# }
#
# _toggle_mouse() {
# old=$(tmux show -gv mouse)
# new=&amp;#34;&amp;#34;
#
# if [ &amp;#34;$old&amp;#34; = &amp;#34;on&amp;#34; ]; then
# new=&amp;#34;off&amp;#34;
# else
# new=&amp;#34;on&amp;#34;
# fi
#
# tmux set -g mouse $new
# }
#
# _battery_info() {
# battery_count=0
# battery_charge=0
# case &amp;#34;$_uname_s&amp;#34; in
# *Darwin*)
# while IFS= read -r line; do
# [ -z &amp;#34;$line&amp;#34; ] &amp;amp;&amp;amp; continue
# percentage=$(printf &amp;#39;%s&amp;#39; &amp;#34;$line&amp;#34; | grep -E -o &amp;#39;[0-9]+%&amp;#39; || echo &amp;#34;0%&amp;#34;)
# battery_charge=$(awk -v charge=&amp;#34;$battery_charge&amp;#34; -v percentage=&amp;#34;${percentage%%%}&amp;#34; &amp;#39;BEGIN { print charge + percentage / 100 }&amp;#39;)
# battery_count=$((battery_count + 1))
# done &amp;lt;&amp;lt; EOF
# $(pmset -g batt | grep &amp;#39;InternalBattery&amp;#39;)
# EOF
# ;;
# *Linux*)
# while IFS= read -r batpath; do
# [ -z &amp;#34;$batpath&amp;#34; ] &amp;amp;&amp;amp; continue
# grep -i -q device &amp;#34;$batpath/scope&amp;#34; 2&amp;gt; /dev/null &amp;amp;&amp;amp; continue
#
# bat_capacity=&amp;#34;$batpath/capacity&amp;#34;
# if [ -r &amp;#34;$bat_capacity&amp;#34; ]; then
# battery_charge=$(awk -v charge=&amp;#34;$battery_charge&amp;#34; -v capacity=&amp;#34;$(cat &amp;#34;$bat_capacity&amp;#34;)&amp;#34; &amp;#39;BEGIN { print charge + (capacity &amp;gt; 100 ? 100 : capacity) / 100 }&amp;#39;)
# else
# bat_energy_full=&amp;#34;$batpath/energy_full&amp;#34;
# bat_energy_now=&amp;#34;$batpath/energy_now&amp;#34;
# if [ -r &amp;#34;$bat_energy_full&amp;#34; ] &amp;amp;&amp;amp; [ -r &amp;#34;$bat_energy_now&amp;#34; ]; then
# battery_charge=$(awk -v charge=&amp;#34;$battery_charge&amp;#34; -v energy_now=&amp;#34;$(cat &amp;#34;$bat_energy_now&amp;#34;)&amp;#34; -v energy_full=&amp;#34;$(cat &amp;#34;$bat_energy_full&amp;#34;)&amp;#34; &amp;#39;BEGIN { print charge + energy_now / energy_full }&amp;#39;)
# fi
# fi
# battery_count=$((battery_count + 1))
# done &amp;lt;&amp;lt; EOF
# $(find /sys/class/power_supply -maxdepth 1 -iname &amp;#39;*bat*&amp;#39;)
# EOF
# ;;
# *CYGWIN*|*MSYS*|*MINGW*)
# while IFS= read -r line; do
# [ -z &amp;#34;$line&amp;#34; ] &amp;amp;&amp;amp; continue
# battery_charge=$(printf &amp;#39;%s&amp;#39; &amp;#34;$line&amp;#34; | awk -v charge=&amp;#34;$battery_charge&amp;#34; &amp;#39;{ print charge + $2 / 100 }&amp;#39;)
# battery_count=$((battery_count + 1))
# done &amp;lt;&amp;lt; EOF
# $(wmic path Win32_Battery get BatteryStatus, EstimatedChargeRemaining 2&amp;gt; /dev/null | tr -d &amp;#39;\r&amp;#39; | tail -n +2 || true)
# EOF
# ;;
# *OpenBSD*)
# for batid in 0 1 2; do
# sysctl -n &amp;#34;hw.sensors.acpibat$batid.raw0&amp;#34; 2&amp;gt;&amp;amp;1 | grep -q &amp;#39;not found&amp;#39; &amp;amp;&amp;amp; continue
# if sysctl -n &amp;#34;hw.sensors.acpibat$batid&amp;#34; | grep -q amphour; then
# battery_charge=$(awk -v charge=&amp;#34;$battery_charge&amp;#34; -v remaining=&amp;#34;$(sysctl -n hw.sensors.acpibat$batid.amphour3 | cut -d&amp;#39; &amp;#39; -f1)&amp;#34; -v full=&amp;#34;$(sysctl -n hw.sensors.acpibat$batid.amphour0 | cut -d&amp;#39; &amp;#39; -f1)&amp;#34; &amp;#39;BEGIN { print charge + remaining / full }&amp;#39;)
# else
# battery_charge=$(awk -v charge=&amp;#34;$battery_charge&amp;#34; -v remaining=&amp;#34;$(sysctl -n hw.sensors.acpibat$batid.watthour3 | cut -d&amp;#39; &amp;#39; -f1)&amp;#34; -v full=&amp;#34;$(sysctl -n hw.sensors.acpibat$batid.watthour0 | cut -d&amp;#39; &amp;#39; -f1)&amp;#34; &amp;#39;BEGIN { print charge + remaining / full }&amp;#39;)
# fi
# battery_count=$((battery_count + 1))
# done
# ;;
# *FreeBSD*)
# battery_charge=$(awk -v charge=&amp;#34;$(sysctl -n &amp;#39;hw.acpi.battery.life&amp;#39;)&amp;#34; &amp;#39;BEGIN { print charge / 100 }&amp;#39;)
# battery_count=1
# ;;
# esac
# if [ &amp;#34;$battery_count&amp;#34; -ne 0 ]; then
# battery_charge=$(awk -v charge=&amp;#34;$battery_charge&amp;#34; -v count=&amp;#34;$battery_count&amp;#34; &amp;#39;BEGIN { print charge / count }&amp;#39;)
# fi
#
# if [ &amp;#34;$battery_charge&amp;#34; = 0 ]; then
# tmux set -ug &amp;#39;@battery_percentage&amp;#39; \;\
# set -ug &amp;#39;@battery_charge&amp;#39;
# else
# battery_percentage=&amp;#34;$(awk &amp;#34;BEGIN { printf \&amp;#34;%.0f%%\&amp;#34;, ($battery_charge) * 100 }&amp;#34;)&amp;#34;
#
# tmux set -g &amp;#39;@battery_percentage&amp;#39; &amp;#34;$battery_percentage&amp;#34; \;\
# set -g &amp;#39;@battery_charge&amp;#39; &amp;#34;$battery_charge&amp;#34;
# fi
# }
#
# _battery_status() {
# battery_status_charging=$1
# battery_status_discharging=$2
#
# case &amp;#34;$_uname_s&amp;#34; in
# *Darwin*)
# while IFS= read -r line; do
# [ -z &amp;#34;$line&amp;#34; ] &amp;amp;&amp;amp; continue
# battery_discharging=$(printf &amp;#39;%s&amp;#39; &amp;#34;$line&amp;#34; | grep -qi &amp;#34;discharging&amp;#34; &amp;amp;&amp;amp; echo &amp;#34;true&amp;#34; || echo &amp;#34;false&amp;#34;)
# done &amp;lt;&amp;lt; EOF
# $(pmset -g batt | grep &amp;#39;InternalBattery&amp;#39;)
# EOF
# ;;
# *Linux*)
# while IFS= read -r batpath; do
# [ -z &amp;#34;$batpath&amp;#34; ] &amp;amp;&amp;amp; continue
# grep -i -q device &amp;#34;$batpath/scope&amp;#34; 2&amp;gt; /dev/null &amp;amp;&amp;amp; continue
#
# battery_discharging=$(grep -qi &amp;#34;discharging&amp;#34; &amp;#34;$batpath/status&amp;#34; &amp;amp;&amp;amp; echo &amp;#34;true&amp;#34; || echo &amp;#34;false&amp;#34;)
# done &amp;lt;&amp;lt; EOF
# $(find /sys/class/power_supply -maxdepth 1 -iname &amp;#39;*bat*&amp;#39;)
# EOF
# ;;
# *CYGWIN*|*MSYS*|*MINGW*)
# while IFS= read -r line; do
# [ -z &amp;#34;$line&amp;#34; ] &amp;amp;&amp;amp; continue
# battery_discharging=$(printf &amp;#39;%s&amp;#39; &amp;#34;$line&amp;#34; | awk &amp;#39;{ s = ($1 == 1) ? &amp;#34;true&amp;#34; : &amp;#34;false&amp;#34;; print s }&amp;#39;)
# done &amp;lt;&amp;lt; EOF
# $(wmic path Win32_Battery get BatteryStatus, EstimatedChargeRemaining 2&amp;gt; /dev/null | tr -d &amp;#39;\r&amp;#39; | tail -n +2 || true)
# EOF
# ;;
# *OpenBSD*)
# for batid in 0 1 2; do
# battery_discharging=$(sysctl -n &amp;#34;hw.sensors.acpibat$batid.raw0&amp;#34; | grep -q 1 &amp;amp;&amp;amp; echo &amp;#34;true&amp;#34; || echo &amp;#34;false&amp;#34;)
# done
# ;;
# *FreeBSD*)
# battery_discharging=$(sysctl -n &amp;#39;hw.acpi.battery.state&amp;#39; | grep -q 1 &amp;amp;&amp;amp; echo &amp;#34;true&amp;#34; || echo &amp;#34;false&amp;#34;)
# ;;
# esac
#
# if [ -z &amp;#34;$battery_discharging&amp;#34; ]; then
# tmux set -ug &amp;#39;@battery_status&amp;#39;
# return
# fi
#
# if [ &amp;#34;$battery_discharging&amp;#34; = &amp;#34;true&amp;#34; ]; then
# battery_status=&amp;#34;$battery_status_discharging&amp;#34;
# else
# battery_status=&amp;#34;$battery_status_charging&amp;#34;
# fi
#
# tmux set -g &amp;#39;@battery_status&amp;#39; &amp;#34;$battery_status&amp;#34;
# }
#
# _pane_info() {
# pane_pid=&amp;#34;$1&amp;#34;
# pane_tty=&amp;#34;${2##/dev/}&amp;#34;
# case &amp;#34;$_uname_s&amp;#34; in
# *CYGWIN*)
# ps -al | tail -n +2 | awk -v pane_pid=&amp;#34;$pane_pid&amp;#34; -v tty=&amp;#34;$pane_tty&amp;#34; &amp;#39;
# ((/ssh/ &amp;amp;&amp;amp; !/-W/ &amp;amp;&amp;amp; !/tsh proxy ssh/ &amp;amp;!/sss_ssh_knownhostsproxy/) || !/ssh/) &amp;amp;&amp;amp; !/tee/ &amp;amp;&amp;amp; $5 == tty {
# user[$1] = $6; if (!child[$2]) child[$2] = $1
# }
# END {
# pid = pane_pid
# while (child[pid])
# pid = child[pid]
#
# file = &amp;#34;/proc/&amp;#34; pid &amp;#34;/cmdline&amp;#34;; getline command &amp;lt; file; close(file)
# gsub(/\0/, &amp;#34; &amp;#34;, command)
# &amp;#34;id -un &amp;#34; user[pid] | getline username
# print pid&amp;#34;:&amp;#34;username&amp;#34;:&amp;#34;command
# }
# &amp;#39;
# ;;
# *Linux*)
# ps -t &amp;#34;$pane_tty&amp;#34; --sort=lstart -o user=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX -o pid= -o ppid= -o command= | awk -v pane_pid=&amp;#34;$pane_pid&amp;#34; &amp;#39;
# ((/ssh/ &amp;amp;&amp;amp; !/-W/ &amp;amp;&amp;amp; !/tsh proxy ssh/ &amp;amp;&amp;amp; !/sss_ssh_knownhostsproxy/) || !/ssh/) &amp;amp;&amp;amp; !/tee/ {
# user[$2] = $1; if (!child[$3]) child[$3] = $2; pid=$2; $1 = $2 = $3 = &amp;#34;&amp;#34;; command[pid] = substr($0,4)
# }
# END {
# pid = pane_pid
# while (child[pid])
# pid = child[pid]
#
# print pid&amp;#34;:&amp;#34;user[pid]&amp;#34;:&amp;#34;command[pid]
# }
# &amp;#39;
# ;;
# *)
# ps -t &amp;#34;/dev/$pane_tty&amp;#34; -o user=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX -o pid= -o ppid= -o command= | awk -v pane_pid=&amp;#34;$pane_pid&amp;#34; &amp;#39;
# ((/ssh/ &amp;amp;&amp;amp; !/-W/ &amp;amp;&amp;amp; !/tsh proxy ssh/ &amp;amp;&amp;amp; !/sss_ssh_knownhostsproxy/) || !/ssh/) &amp;amp;&amp;amp; !/tee/ {
# user[$2] = $1; if (!child[$3]) child[$3] = $2; pid=$2; $1 = $2 = $3 = &amp;#34;&amp;#34;; command[pid] = substr($0,4)
# }
# END {
# pid = pane_pid
# while (child[pid])
# pid = child[pid]
#
# print pid&amp;#34;:&amp;#34;user[pid]&amp;#34;:&amp;#34;command[pid]
# }
# &amp;#39;
# ;;
# esac
# }
#
# _ssh_or_mosh_args() {
# case &amp;#34;$1&amp;#34; in
# *ssh*)
# args=$(printf &amp;#39;%s&amp;#39; &amp;#34;$1&amp;#34; | perl -n -e &amp;#39;print if s/.*?\bssh[\w_-]*\s*(.*)/\1/&amp;#39;)
# ;;
# *mosh-client*)
# args=$(printf &amp;#39;%s&amp;#39; &amp;#34;$1&amp;#34; | sed -E -e &amp;#39;s/.*mosh-client -# (.*)\|.*$/\1/&amp;#39; -e &amp;#39;s/-[^ ]*//g&amp;#39; -e &amp;#39;s/\d:\d//g&amp;#39;)
# ;;
# esac
#
# printf &amp;#39;%s&amp;#39; &amp;#34;$args&amp;#34;
# }
#
# _username() {
# pane_pid=${1:-$(tmux display -p &amp;#39;#{pane_pid}&amp;#39;)}
# pane_tty=${2:-$(tmux display -p &amp;#39;#{b:pane_tty}&amp;#39;)}
# ssh_only=$3
#
# pane_info=$(_pane_info &amp;#34;$pane_pid&amp;#34; &amp;#34;$pane_tty&amp;#34;)
# command=${pane_info#*:}
# command=${command#*:}
#
# ssh_or_mosh_args=$(_ssh_or_mosh_args &amp;#34;$command&amp;#34;)
# if [ -n &amp;#34;$ssh_or_mosh_args&amp;#34; ]; then
# # shellcheck disable=SC2086
# username=$(ssh -G $ssh_or_mosh_args 2&amp;gt;/dev/null | awk &amp;#39;/^user / { print $2; exit }&amp;#39;)
# # shellcheck disable=SC2086
# [ -z &amp;#34;$username&amp;#34; ] &amp;amp;&amp;amp; username=$(ssh $ssh_or_mosh_args -T -o ControlPath=none -o ProxyCommand=&amp;#34;sh -c &amp;#39;echo %%username%% %r &amp;gt;&amp;amp;2&amp;#39;&amp;#34; 2&amp;gt;&amp;amp;1 | awk &amp;#39;/^%username% / { print $2; exit }&amp;#39;)
# # shellcheck disable=SC2086
# [ -z &amp;#34;$username&amp;#34; ] &amp;amp;&amp;amp; username=$(ssh $ssh_or_mosh_args -v -T -o ControlPath=none -o ProxyCommand=false -o IdentityFile=&amp;#39;%%username%%/%r&amp;#39; 2&amp;gt;&amp;amp;1 | awk &amp;#39;/%username%/ { print substr($4,12); exit }&amp;#39;)
# else
# if ! _is_true &amp;#34;$ssh_only&amp;#34;; then
# username=${pane_info#*:}
# username=${username%%:*}
# fi
# fi
#
# printf &amp;#39;%s\n&amp;#39; &amp;#34;$username&amp;#34;
# }
#
# _hostname() {
# pane_pid=${1:-$(tmux display -p &amp;#39;#{pane_pid}&amp;#39;)}
# pane_tty=${2:-$(tmux display -p &amp;#39;#{b:pane_tty}&amp;#39;)}
# ssh_only=$3
# full=$4
# h_or_H=$5
#
# pane_info=$(_pane_info &amp;#34;$pane_pid&amp;#34; &amp;#34;$pane_tty&amp;#34;)
# command=${pane_info#*:}
# command=${command#*:}
#
# ssh_or_mosh_args=$(_ssh_or_mosh_args &amp;#34;$command&amp;#34;)
# if [ -n &amp;#34;$ssh_or_mosh_args&amp;#34; ]; then
# # shellcheck disable=SC2086
# hostname=$(ssh -G $ssh_or_mosh_args 2&amp;gt;/dev/null | awk &amp;#39;/^hostname / { print $2; exit }&amp;#39;)
# # shellcheck disable=SC2086
# [ -z &amp;#34;$hostname&amp;#34; ] &amp;amp;&amp;amp; hostname=$(ssh -T -o ControlPath=none -o ProxyCommand=&amp;#34;sh -c &amp;#39;echo %%hostname%% %h &amp;gt;&amp;amp;2&amp;#39;&amp;#34; $ssh_or_mosh_args 2&amp;gt;&amp;amp;1 | awk &amp;#39;/^%hostname% / { print $2; exit }&amp;#39;)
#
# if ! _is_true &amp;#34;$full&amp;#34;; then
# case &amp;#34;$hostname&amp;#34; in
# *[a-z-].*)
# hostname=${hostname%%.*}
# ;;
# 127.0.0.1)
# hostname=&amp;#34;localhost&amp;#34;
# ;;
# esac
# fi
# else
# if ! _is_true &amp;#34;$ssh_only&amp;#34;; then
# hostname=&amp;#34;$h_or_H&amp;#34;
# fi
# fi
#
# printf &amp;#39;%s\n&amp;#39; &amp;#34;$hostname&amp;#34;
# }
#
# _root() {
# pane_pid=${1:-$(tmux display -p &amp;#39;#{pane_pid}&amp;#39;)}
# pane_tty=${2:-$(tmux display -p &amp;#39;#{b:pane_tty}&amp;#39;)}
# root=$3
#
# username=$(_username &amp;#34;$pane_pid&amp;#34; &amp;#34;$pane_tty&amp;#34; false)
#
# [ &amp;#34;$username&amp;#34; = &amp;#34;root&amp;#34; ] &amp;amp;&amp;amp; echo &amp;#34;$root&amp;#34;
# }
#
# _uptime() {
# case &amp;#34;$_uname_s&amp;#34; in
# *Darwin*|*FreeBSD*)
# boot=$(sysctl -n kern.boottime 2&amp;gt;/dev/null | awk -F&amp;#39;[ ,:]+&amp;#39; &amp;#39;{ print $4 }&amp;#39;)
# now=$(date +%s)
# ;;
# *Linux*|*CYGWIN*|*MSYS*|*MINGW*)
# boot=0
# now=$(cut -d&amp;#39; &amp;#39; -f1 &amp;lt; /proc/uptime)
# ;;
# *OpenBSD*)
# boot=$(sysctl -n kern.boottime)
# now=$(date +%s)
# esac
# # shellcheck disable=SC1004
# awk -v tmux=&amp;#34;$TMUX_PROGRAM ${TMUX_SOCKET:+-S &amp;#34;$TMUX_SOCKET&amp;#34;}&amp;#34; -v boot=&amp;#34;$boot&amp;#34; -v now=&amp;#34;$now&amp;#34; &amp;#39;
# BEGIN {
# uptime = now - boot
# y = int(uptime / 31536000)
# dy = int(uptime / 86400) % 365
# d = int(uptime / 86400)
# h = int(uptime / 3600) % 24
# m = int(uptime / 60) % 60
# s = int(uptime) % 60
#
# system(tmux &amp;#34; set -g @uptime_y &amp;#34; y + 0 &amp;#34; \\;&amp;#34; \
# &amp;#34; set -g @uptime_dy &amp;#34; dy + 0 &amp;#34; \\;&amp;#34; \
# &amp;#34; set -g @uptime_d &amp;#34; d + 0 &amp;#34; \\;&amp;#34; \
# &amp;#34; set -g @uptime_h &amp;#34; h + 0 &amp;#34; \\;&amp;#34; \
# &amp;#34; set -g @uptime_m &amp;#34; m + 0 &amp;#34; \\;&amp;#34; \
# &amp;#34; set -g @uptime_s &amp;#34; s + 0)
# }&amp;#39;
# }
#
# _loadavg() {
# case &amp;#34;$_uname_s&amp;#34; in
# *Darwin*|*FreeBSD*)
# tmux set -g @loadavg &amp;#34;$(sysctl -n vm.loadavg 2&amp;gt;/dev/null | cut -d&amp;#39; &amp;#39; -f2)&amp;#34;
# ;;
# *Linux*|*CYGWIN*)
# tmux set -g @loadavg &amp;#34;$(cut -d&amp;#39; &amp;#39; -f1 &amp;lt; /proc/loadavg)&amp;#34;
# ;;
# *OpenBSD*)
# tmux set -g @loadavg &amp;#34;$(sysctl -n vm.loadavg 2&amp;gt;/dev/null | cut -d&amp;#39; &amp;#39; -f1)&amp;#34;
# ;;
# esac
# }
#
# _new_window_ssh() {
# pane_pid=${1:-$(tmux display -p &amp;#39;#{pane_pid}&amp;#39;)}
# pane_tty=${2:-$(tmux display -p &amp;#39;#{b:pane_tty}&amp;#39;)}
# shift 2
#
# pane_info=$(_pane_info &amp;#34;$pane_pid&amp;#34; &amp;#34;$pane_tty&amp;#34;)
# command=${pane_info#*:}
# command=${command#*:}
#
# case &amp;#34;$command&amp;#34; in
# *mosh-client*)
# # shellcheck disable=SC2046
# tmux new-window &amp;#34;$@&amp;#34; mosh $(echo &amp;#34;$command&amp;#34; | sed -E -e &amp;#39;s/.*mosh-client -# (.*)\|.*$/\1/&amp;#39;)
# ;;
# *ssh*)
# # shellcheck disable=SC2046
# tmux new-window &amp;#34;$@&amp;#34; $(echo &amp;#34;$command&amp;#34; | sed -e &amp;#39;s/;/\\;/g&amp;#39;)
# ;;
# *)
# tmux new-window &amp;#34;$@&amp;#34;
# esac
# }
#
# _new_window() {
# _new_window_ssh &amp;#34;$@&amp;#34;
# }
#
# _split_window_ssh() {
# pane_pid=${1:-$(tmux display -p &amp;#39;#{pane_pid}&amp;#39;)}
# pane_tty=${2:-$(tmux display -p &amp;#39;#{b:pane_tty}&amp;#39;)}
# shift 2
#
# pane_info=$(_pane_info &amp;#34;$pane_pid&amp;#34; &amp;#34;$pane_tty&amp;#34;)
# command=${pane_info#*:}
# command=${command#*:}
#
# case &amp;#34;$command&amp;#34; in
# *mosh-client*)
# # shellcheck disable=SC2046
# tmux split-window &amp;#34;$@&amp;#34; mosh $(echo &amp;#34;$command&amp;#34; | sed -E -e &amp;#39;s/.*mosh-client -# (.*)\|.*$/\1/&amp;#39;)
# ;;
# *ssh*)
# # shellcheck disable=SC2046
# tmux split-window &amp;#34;$@&amp;#34; $(echo &amp;#34;$command&amp;#34; | sed -e &amp;#39;s/;/\\;/g&amp;#39;)
# ;;
# *)
# tmux split-window &amp;#34;$@&amp;#34;
# esac
# }
#
# _split_window() {
# _split_window_ssh &amp;#34;$@&amp;#34;
# }
#
# _apply_tmux_256color() {
# case &amp;#34;$(tmux show -gv default-terminal)&amp;#34; in
# tmux-256color|tmux-direct)
# return
# ;;
# esac
#
# # when tmux-256color is available, use it
# # on macOS though, make sure to use /usr/bin/infocmp to probe if it&amp;#39;s availalbe system wide
# case &amp;#34;$_uname_s&amp;#34; in
# *Darwin*)
# if /usr/bin/infocmp -x tmux-256color &amp;gt; /dev/null 2&amp;gt;&amp;amp;1; then
# tmux set -g default-terminal &amp;#39;tmux-256color&amp;#39;
# fi
# ;;
# *)
# if command infocmp -x tmux-256color &amp;gt; /dev/null 2&amp;gt;&amp;amp;1; then
# tmux set -g default-terminal &amp;#39;tmux-256color&amp;#39;
# fi
# ;;
# esac
# }
#
# _apply_24b() {
# tmux_conf_theme_24b_colour=${tmux_conf_theme_24b_colour:-auto}
# tmux_conf_24b_colour=${tmux_conf_24b_colour:-$tmux_conf_theme_24b_colour}
# if [ &amp;#34;$tmux_conf_24b_colour&amp;#34; = &amp;#34;auto&amp;#34; ]; then
# case &amp;#34;$COLORTERM&amp;#34; in
# truecolor|24bit)
# apply_24b=true
# ;;
# esac
# if [ &amp;#34;$apply_24b&amp;#34; = &amp;#34;&amp;#34; ] &amp;amp;&amp;amp; [ &amp;#34;$(tput colors)&amp;#34; = &amp;#34;16777216&amp;#34; ]; then
# apply_24b=true
# fi
# elif _is_true &amp;#34;$tmux_conf_24b_colour&amp;#34;; then
# apply_24b=true
# fi
# if [ &amp;#34;$apply_24b&amp;#34; = &amp;#34;true&amp;#34; ]; then
# case &amp;#34;$TERM&amp;#34; in
# screen-*|tmux-*)
# ;;
# *)
# tmux set-option -ga terminal-overrides &amp;#34;,*256col*:Tc&amp;#34;
# ;;
# esac
# fi
# }
#
# _apply_bindings() {
# cfg=$(mktemp) &amp;amp;&amp;amp; trap &amp;#39;rm -f $cfg*&amp;#39; EXIT
#
# tmux_conf_preserve_stock_bindings=${tmux_conf_preserve_stock_bindings:-false}
# tmux list-keys | grep -vF &amp;#39;TMUX_CONF_LOCAL&amp;#39; | grep -E &amp;#39;new-window|split(-|_)window|new-session|copy-selection|copy-pipe&amp;#39; &amp;gt; &amp;#34;$cfg&amp;#34;
# if _is_true &amp;#34;$tmux_conf_preserve_stock_bindings&amp;#34;; then
# probe_socket=&amp;#34;$(dirname &amp;#34;$TMUX_SOCKET&amp;#34;)/tmux-stock-bindings-$$&amp;#34;
# TMUX_SOCKET=&amp;#34;$probe_socket&amp;#34; tmux -f /dev/null list-keys &amp;gt;&amp;gt; &amp;#34;$cfg&amp;#34;
# rm -f &amp;#34;%probe_socket&amp;#34;
# fi
#
# # tmux 3.0 doesn&amp;#39;t include 02254d1e5c881be95fd2fc37b4c4209640b6b266 and the
# # output of list-keys can be truncated
# perl -p -i -e &amp;#34;s/&amp;#39;#\{\?window_zoomed_flag,Unzoom,Zoom\}&amp;#39; &amp;#39;z&amp;#39; \{resize-pane -$/&amp;#39;#{?window_zoomed_flag,Unzoom,Zoom}&amp;#39; &amp;#39;z&amp;#39; {resize-pane -Z}\&amp;#34;/g&amp;#34; &amp;#34;$cfg&amp;#34;
#
# tmux_conf_new_window_retain_current_path=${tmux_conf_new_window_retain_current_path:-true}
# if ! _is_disabled &amp;#34;$tmux_conf_new_window_retain_current_path&amp;#34;; then
# perl -p -i -e &amp;#34;
# s/\brun-shell\b\s+(\&amp;#34;|&amp;#39;)cut\s+-c3-\s+(.+?)\s+\|\s+sh\s+-s\s+_new_window\s+#\{pane_pid\}\s+#\{b:pane_tty\}([^\n\1]*?)(?:\s+-c\s+((?:\\\\{1,3}\&amp;#34;)?|\&amp;#34;?|&amp;#39;?)#\{pane_current_path\}\4)([^\n\1]*?)\1/run-shell \1cut -c3- \2 | sh -s _new_window #\{pane_pid\} #\{b:pane_tty\}\3\5\1/g
# ;
# s/\brun-shell\b\s+(\&amp;#34;|&amp;#39;)cut\s+-c3-\s+.+?\s+\|\s+sh\s+-s\s+_new_window\s+#\{pane_pid\}\s+#\{b:pane_tty\}(\s+.+?)?\1/new-window\2/g
# ;
# s/\bnew-window\b([^;}\n]*?)(?:\s+-c\s+((?:\\\\\&amp;#34;)?|\&amp;#34;?|&amp;#39;?)#\{pane_current_path\}\2)/new-window\1/g&amp;#34; \
# &amp;#34;$cfg&amp;#34;
# fi
#
# perl -p -i -e &amp;#34;
# s,\bnew-window\b((?:(?:[ \t]+-[bdfhIvP])|(?:[ \t]+-[celtF][ \t]+(?!\bssh\b)[^\s]+))*)?(?:\s+(\bssh\b))((?:(?:[ \t]+-[bdfhIvP])|(?:[ \t]+-[celtF][ \t]+(?!\bssh\b)[^\s]+))*)?,run-shell &amp;#39;cut -c3- \&amp;#34;$TMUX_CONF\&amp;#34; | sh -s _new_window_ssh #\{pane_pid\} #\{b:pane_tty\}\1&amp;#39;,g if /\bnew-window\b((?:(?:[ \t]+-[bdfhIvP])|(?:[ \t]+-[celtF][ \t]+(?!ssh)[^\s]+))*)?(?:\s+(ssh))((?:(?:[ \t]+-[bdfhIvP])|(?:[ \t]+-[celtF][ \t]+(?!ssh)[^\s]+))*)?/&amp;#34;\
# &amp;#34;$cfg&amp;#34;
#
# tmux_conf_new_window_reconnect_ssh=${tmux_conf_new_window_reconnect_ssh:-false}
# if ! _is_disabled &amp;#34;$tmux_conf_new_window_reconnect_ssh&amp;#34; &amp;amp;&amp;amp; _is_true &amp;#34;$tmux_conf_new_window_reconnect_ssh&amp;#34;; then
# perl -p -i -e &amp;#34;s,\bnew-window\b([^;}\n\&amp;#34;]*),run-shell &amp;#39;cut -c3- \&amp;#34;$TMUX_CONF\&amp;#34; | sh -s _new_window #\{pane_pid\} #\{b:pane_tty\}\1&amp;#39;,g&amp;#34; &amp;#34;$cfg&amp;#34;
# fi
#
# tmux_conf_new_window_retain_current_path=${tmux_conf_new_window_retain_current_path:-false}
# if ! _is_disabled &amp;#34;$tmux_conf_new_window_retain_current_path&amp;#34; &amp;amp;&amp;amp; _is_true &amp;#34;$tmux_conf_new_window_retain_current_path&amp;#34;; then
# perl -p -i -e &amp;#34;
# s/\bnew-window\b(?!\s+(?:-|}))/{$&amp;amp;}/g if /\bdisplay-menu\b/
# ;
# s/\bnew-window\b/new-window -c &amp;#39;#{pane_current_path}&amp;#39;/g
# ;
# s/\brun-shell\b\s+&amp;#39;cut\s+-c3-\s+(.+?)\s+\|\s+sh\s+-s\s+_new_window(_ssh)?\s+#\{pane_pid\}\s+#\{b:pane_tty\}([^}\n&amp;#39;]*)&amp;#39;/run-shell &amp;#39;cut -c3- \1 | sh -s _new_window\2 #\{pane_pid\} #\{b:pane_tty\} -c \\\\\&amp;#34;#\{pane_current_path\}\\\\\&amp;#34;\3&amp;#39;/g if /\bdisplay-menu\b/
# ;
# s/\brun-shell\b\s+&amp;#39;cut\s+-c3-\s+(.+?)\s+\|\s+sh\s+-s\s+_new_window(_ssh)?\s+#\{pane_pid\}\s+#\{b:pane_tty\}([^}\n&amp;#39;]*)&amp;#39;/run-shell &amp;#39;cut -c3- \1 | sh -s _new_window\2 #\{pane_pid\} #\{b:pane_tty\} -c \&amp;#34;#\{pane_current_path\}\&amp;#34;\3&amp;#39;/g&amp;#34; \
# &amp;#34;$cfg&amp;#34;
# fi
#
# tmux_conf_new_pane_retain_current_path=${tmux_conf_new_pane_retain_current_path:-true}
# if ! _is_disabled &amp;#34;$tmux_conf_new_pane_retain_current_path&amp;#34;; then
# perl -p -i -e &amp;#34;
# s/\brun-shell\b\s+(\&amp;#34;|&amp;#39;)cut\s+-c3-\s+(.+?)\s+\|\s+sh\s+-s\s+_split_window\s+#\{pane_pid\}\s+#\{b:pane_tty\}([^\n\1]*?)(?:\s+-c\s+((?:\\\\{1,3}\&amp;#34;)?|\&amp;#34;?|&amp;#39;?)#\{pane_current_path\}\4)([^\n\1]*?)\1/run-shell \1cut -c3- \2 | sh -s _split_window #\{pane_pid\} #\{b:pane_tty\}\3\5\1/g
# ;
# s/\brun-shell\b\s+(\&amp;#34;|&amp;#39;)cut\s+-c3-\s+.+?\s+\|\s+sh\s+-s\s+_split_window\s+#\{pane_pid\}\s+#\{b:pane_tty\}(\s+.+?)?\1/split-window\2/g
# ;
# s/\bsplit-window\b([^;}\n]*?)(?:\s+-c\s+((?:\\\\\&amp;#34;)?|\&amp;#34;?|&amp;#39;?)#\{pane_current_path\}\2)/split-window\1/g&amp;#34; \
# &amp;#34;$cfg&amp;#34;
# fi
#
# perl -p -i -e &amp;#34;
# s,\bsplit-window\b((?:(?:[ \t]+-[bdfhIvP])|(?:[ \t]+-[celtF][ \t]+(?!\bssh\b)[^\s]+))*)?(?:\s+(\bssh\b))((?:(?:[ \t]+-[bdfhIvP])|(?:[ \t]+-[celtF][ \t]+(?!\bssh\b)[^\s]+))*)?,run-shell &amp;#39;cut -c3- \&amp;#34;$TMUX_CONF\&amp;#34; | sh -s _split_window_ssh #\{pane_pid\} #\{b:pane_tty\}\1&amp;#39;,g if /\bsplit-window\b((?:(?:[ \t]+-[bdfhIvP])|(?:[ \t]+-[celtF][ \t]+(?!ssh)[^\s]+))*)?(?:\s+(ssh))((?:(?:[ \t]+-[bdfhIvP])|(?:[ \t]+-[celtF][ \t]+(?!ssh)[^\s]+))*)?/&amp;#34;\
# &amp;#34;$cfg&amp;#34;
#
# tmux_conf_new_pane_reconnect_ssh=${tmux_conf_new_pane_reconnect_ssh:-false}
# if ! _is_disabled &amp;#34;$tmux_conf_new_pane_reconnect_ssh&amp;#34; &amp;amp;&amp;amp; _is_true &amp;#34;$tmux_conf_new_pane_reconnect_ssh&amp;#34;; then
# perl -p -i -e &amp;#34;s,\bsplit-window\b([^;}\n\&amp;#34;]*),run-shell &amp;#39;cut -c3- \&amp;#34;$TMUX_CONF\&amp;#34; | sh -s _split_window #\{pane_pid\} #\{b:pane_tty\}\1&amp;#39;,g&amp;#34; &amp;#34;$cfg&amp;#34;
# fi
#
# if ! _is_disabled &amp;#34;$tmux_conf_new_pane_retain_current_path&amp;#34; &amp;amp;&amp;amp; _is_true &amp;#34;$tmux_conf_new_pane_retain_current_path&amp;#34;; then
# perl -p -i -e &amp;#34;
# s/\bsplit-window\b(?!\s+(?:-|}))/{$&amp;amp;}/g if /\bdisplay-menu\b/
# ;
# s/\bsplit-window\b/split-window -c &amp;#39;#{pane_current_path}&amp;#39;\1/g
# ;
# s/\brun-shell\b\s+&amp;#39;cut\s+-c3-\s+(.+?)\s+\|\s+sh\s+-s\s+_split_window(_ssh)?\s+#\{pane_pid\}\s+#\{b:pane_tty\}([^}\n&amp;#39;]*)&amp;#39;/run-shell &amp;#39;cut -c3- \1 | sh -s _split_window\2 #\{pane_pid\} #\{b:pane_tty\} -c \\\\\&amp;#34;#\{pane_current_path\}\\\\\&amp;#34;\3&amp;#39;/g if /\bdisplay-menu\b/
# ;
# s/\brun-shell\b\s+&amp;#39;cut\s+-c3-\s+(.+?)\s+\|\s+sh\s+-s\s+_split_window(_ssh)?\s+#\{pane_pid\}\s+#\{b:pane_tty\}([^}\n&amp;#39;]*)&amp;#39;/run-shell &amp;#39;cut -c3- \1 | sh -s _split_window\2 #\{pane_pid\} #\{b:pane_tty\} -c \&amp;#34;#\{pane_current_path\}\&amp;#34;\3&amp;#39;/g&amp;#34; \
# &amp;#34;$cfg&amp;#34;
# fi
#
# tmux_conf_new_session_prompt=${tmux_conf_new_session_prompt:-false}
# if ! _is_disabled &amp;#34;$tmux_conf_new_session_prompt&amp;#34; &amp;amp;&amp;amp; _is_true &amp;#34;$tmux_conf_new_session_prompt&amp;#34;; then
# perl -p -i -e &amp;#34;
# s/(?&amp;lt;!command-prompt -p )\b(new-session)\b(?!\s+(?:-|}))/{$&amp;amp;}/g if /\bdisplay-menu\b/
# ;
# s/(?&amp;lt;!\bcommand-prompt -p )\bnew-session\b(?! -s)/command-prompt -p new-session \&amp;#34;new-session -s &amp;#39;%%&amp;#39;\&amp;#34;/g&amp;#34; \
# &amp;#34;$cfg&amp;#34;
# else
# perl -p -i -e &amp;#34;s/\bcommand-prompt\s+-p\s+new-session\s+\&amp;#34;new-session\s+-s\s+&amp;#39;%%&amp;#39;\&amp;#34;/new-session/g&amp;#34; &amp;#34;$cfg&amp;#34;
# fi
#
# tmux_conf_new_session_retain_current_path=${tmux_conf_new_session_retain_current_path:-false}
# if ! _is_disabled &amp;#34;$tmux_conf_new_session_retain_current_path&amp;#34; &amp;amp;&amp;amp; _is_true &amp;#34;$tmux_conf_new_session_retain_current_path&amp;#34;; then
# perl -p -i -e &amp;#34;
# s/(?&amp;lt;!\bcommand-prompt -p )\bnew-session\b/new-session -c &amp;#39;#{pane_current_path}&amp;#39;/g&amp;#34; \
# &amp;#34;$cfg&amp;#34;
# else
# perl -p -i -e &amp;#34;
# s/\bnew-session\b([^;}\n]*?)(?:\s+-c\s+((?:\\\\\&amp;#34;)?|\&amp;#34;?|&amp;#39;?)#\{pane_current_path\}\2)/new-session\1/g&amp;#34; \
# &amp;#34;$cfg&amp;#34;
# fi
#
# tmux_conf_copy_to_os_clipboard=${tmux_conf_copy_to_os_clipboard:-false}
# command -v xsel &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 &amp;amp;&amp;amp; command=&amp;#39;xsel -i -b&amp;#39;
# ! command -v xsel &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 &amp;amp;&amp;amp; command -v xclip &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 &amp;amp;&amp;amp; command=&amp;#39;xclip -i -selection clipboard &amp;gt; \/dev\/null 2&amp;gt;\&amp;amp;1&amp;#39;
# [ &amp;#34;$XDG_SESSION_TYPE&amp;#34; = &amp;#34;wayland&amp;#34; ] &amp;amp;&amp;amp; command -v wl-copy &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 &amp;amp;&amp;amp; command=&amp;#39;wl-copy&amp;#39;
# command -v pbcopy &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 &amp;amp;&amp;amp; command=&amp;#39;pbcopy&amp;#39;
# command -v clip.exe &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 &amp;amp;&amp;amp; command=&amp;#39;clip\.exe&amp;#39;
# [ -c /dev/clipboard ] &amp;amp;&amp;amp; command=&amp;#39;cat &amp;gt; \/dev\/clipboard&amp;#39;
#
# if [ -n &amp;#34;$command&amp;#34; ]; then
# if ! _is_disabled &amp;#34;$tmux_conf_copy_to_os_clipboard&amp;#34; &amp;amp;&amp;amp; _is_true &amp;#34;$tmux_conf_copy_to_os_clipboard&amp;#34;; then
# perl -p -i -e &amp;#34;s/(?!.*?$command)\bcopy-(?:selection|pipe)(-end-of-line|-and-cancel|-end-of-line-and-cancel|-no-clear)?\b/copy-pipe\1 &amp;#39;$command&amp;#39;/g&amp;#34; &amp;#34;$cfg&amp;#34;
# else
# if [ &amp;#34;$_tmux_version&amp;#34; -ge 320 ]; then
# perl -p -i -e &amp;#34;s/\bcopy-pipe(-end-of-line|-and-cancel|end-of-line-and-cancel|-no-clear)?\b\s+(\&amp;#34;|&amp;#39;)?$command\2?/copy-pipe\1/g&amp;#34; &amp;#34;$cfg&amp;#34;
# else
# perl -p -i -e &amp;#34;s/\bcopy-pipe(-end-of-line|-and-cancel|end-of-line-and-cancel|-no-clear)?\b\s+(\&amp;#34;|&amp;#39;)?$command\2?/copy-selection\1/g&amp;#34; &amp;#34;$cfg&amp;#34;
# fi
# fi
# fi
#
# # until tmux &amp;gt;= 3.0, output of tmux list-keys can&amp;#39;t be consumed back by tmux source-file without applying some escapings
# awk &amp;lt; &amp;#34;$cfg&amp;#34; \
# &amp;#39;{i = $2 == &amp;#34;-T&amp;#34; ? 4 : 5; gsub(/^[;]$/, &amp;#34;\\\\&amp;amp;&amp;#34;, $i); gsub(/^[$&amp;#34;#~]$/, &amp;#34;&amp;#39;&amp;#34;&amp;#39;&amp;#34;&amp;#39;&amp;amp;&amp;#39;&amp;#34;&amp;#39;&amp;#34;&amp;#39;&amp;#34;, $i); gsub(/^[&amp;#39;&amp;#34;&amp;#39;&amp;#34;&amp;#39;]$/, &amp;#34;\&amp;#34;&amp;amp;\&amp;#34;&amp;#34;, $i); print}&amp;#39; &amp;gt; &amp;#34;$cfg.in&amp;#34;
#
# # ignore bindings with errors
# if ! tmux source-file &amp;#34;$cfg.in&amp;#34;; then
# if tmux source-file -v /dev/null 2&amp;gt; /dev/null; then
# verbose_flag=&amp;#39;-v&amp;#39;
# fi
# while ! out=$(tmux source-file &amp;#34;${verbose_flag:+$verbose_flag}&amp;#34; &amp;#34;$cfg.in&amp;#34;); do
# line=$(printf &amp;#34;%s&amp;#34; &amp;#34;$out&amp;#34; | tail -1 | cut -d&amp;#39;:&amp;#39; -f2)
# perl -n -i -e &amp;#34;if ($. != $line) { print }&amp;#34; &amp;#34;$cfg.in&amp;#34;
# done
# fi
#
# tmux_conf_urlscan_options=${tmux_conf_urlscan_options:---compact --dedupe}
# if command -v urlscan &amp;gt; /dev/null 2&amp;gt;&amp;amp;1; then
# tmux bind U run &amp;#34;cut -c3- &amp;#39;#{TMUX_CONF}&amp;#39; | sh -s _urlscan &amp;#39;#{pane_id}&amp;#39; $tmux_conf_urlscan_options&amp;#34;
# elif command -v urlview &amp;gt; /dev/null 2&amp;gt;&amp;amp;1; then
# tmux bind U run &amp;#34;cut -c3- &amp;#39;#{TMUX_CONF}&amp;#39; | sh -s _urlview &amp;#39;#{pane_id}&amp;#39;&amp;#34;
# fi
# }
#
# _apply_theme() {
# tmux_conf_theme=${tmux_conf_theme:-enabled}
# if ! _is_disabled &amp;#34;$tmux_conf_theme&amp;#34;; then
#
# # -- default theme -------------------------------------------------------
#
# tmux_conf_theme_colour_1=${tmux_conf_theme_colour_1:-#080808} # dark gray
# tmux_conf_theme_colour_2=${tmux_conf_theme_colour_2:-#303030} # gray
# tmux_conf_theme_colour_3=${tmux_conf_theme_colour_3:-#8a8a8a} # light gray
# tmux_conf_theme_colour_4=${tmux_conf_theme_colour_4:-#00afff} # light blue
# tmux_conf_theme_colour_5=${tmux_conf_theme_colour_5:-#ffff00} # yellow
# tmux_conf_theme_colour_6=${tmux_conf_theme_colour_6:-#080808} # dark gray
# tmux_conf_theme_colour_7=${tmux_conf_theme_colour_7:-#e4e4e4} # white
# tmux_conf_theme_colour_8=${tmux_conf_theme_colour_8:-#080808} # dark gray
# tmux_conf_theme_colour_9=${tmux_conf_theme_colour_9:-#ffff00} # yellow
# tmux_conf_theme_colour_10=${tmux_conf_theme_colour_10:-#ff00af} # pink
# tmux_conf_theme_colour_11=${tmux_conf_theme_colour_11:-#5fff00} # green
# tmux_conf_theme_colour_12=${tmux_conf_theme_colour_12:-#8a8a8a} # light gray
# tmux_conf_theme_colour_13=${tmux_conf_theme_colour_13:-#e4e4e4} # white
# tmux_conf_theme_colour_14=${tmux_conf_theme_colour_14:-#080808} # dark gray
# tmux_conf_theme_colour_15=${tmux_conf_theme_colour_15:-#080808} # dark gray
# tmux_conf_theme_colour_16=${tmux_conf_theme_colour_16:-#d70000} # red
# tmux_conf_theme_colour_17=${tmux_conf_theme_colour_17:-#e4e4e4} # white
#
# # -- panes ---------------------------------------------------------------
#
# tmux_conf_theme_window_fg=${tmux_conf_theme_window_fg:-default}
# tmux_conf_theme_window_bg=${tmux_conf_theme_window_bg:-default}
# tmux_conf_theme_highlight_focused_pane=${tmux_conf_theme_highlight_focused_pane:-false}
# tmux_conf_theme_focused_pane_fg=${tmux_conf_theme_focused_pane_fg:-default}
# tmux_conf_theme_focused_pane_bg=${tmux_conf_theme_focused_pane_bg:-$tmux_conf_theme_colour_2}
#
# window_style=&amp;#34;fg=$tmux_conf_theme_window_fg,bg=$tmux_conf_theme_window_bg&amp;#34;
# if _is_true &amp;#34;$tmux_conf_theme_highlight_focused_pane&amp;#34;; then
# window_active_style=&amp;#34;fg=$tmux_conf_theme_focused_pane_fg,bg=$tmux_conf_theme_focused_pane_bg&amp;#34;
# else
# window_active_style=&amp;#34;default&amp;#34;
# fi
#
# tmux_conf_theme_pane_border_style=${tmux_conf_theme_pane_border_style:-thin}
# tmux_conf_theme_pane_border=${tmux_conf_theme_pane_border:-$tmux_conf_theme_colour_2}
# tmux_conf_theme_pane_active_border=${tmux_conf_theme_pane_active_border:-$tmux_conf_theme_colour_4}
# tmux_conf_theme_pane_border_fg=${tmux_conf_theme_pane_border_fg:-$tmux_conf_theme_pane_border}
# tmux_conf_theme_pane_active_border_fg=${tmux_conf_theme_pane_active_border_fg:-$tmux_conf_theme_pane_active_border}
# case &amp;#34;$tmux_conf_theme_pane_border_style&amp;#34; in
# fat)
# tmux_conf_theme_pane_border_bg=${tmux_conf_theme_pane_border_bg:-$tmux_conf_theme_pane_border_fg}
# tmux_conf_theme_pane_active_border_bg=${tmux_conf_theme_pane_active_border_bg:-$tmux_conf_theme_pane_active_border_fg}
# ;;
# thin|*)
# tmux_conf_theme_pane_border_bg=${tmux_conf_theme_pane_border_bg:-default}
# tmux_conf_theme_pane_active_border_bg=${tmux_conf_theme_pane_active_border_bg:-default}
# ;;
# esac
#
# tmux_conf_theme_pane_indicator=${tmux_conf_theme_pane_indicator:-$tmux_conf_theme_colour_4}
# tmux_conf_theme_pane_active_indicator=${tmux_conf_theme_pane_active_indicator:-$tmux_conf_theme_colour_4}
#
# # -- status line ---------------------------------------------------------
#
# tmux_conf_theme_left_separator_main=$(_decode_unicode_escapes &amp;#34;${tmux_conf_theme_left_separator_main-}&amp;#34;)
# tmux_conf_theme_left_separator_sub=$(_decode_unicode_escapes &amp;#34;${tmux_conf_theme_left_separator_sub-|}&amp;#34;)
# tmux_conf_theme_right_separator_main=$(_decode_unicode_escapes &amp;#34;${tmux_conf_theme_right_separator_main-}&amp;#34;)
# tmux_conf_theme_right_separator_sub=$(_decode_unicode_escapes &amp;#34;${tmux_conf_theme_right_separator_sub-|}&amp;#34;)
#
# tmux_conf_theme_message_fg=${tmux_conf_theme_message_fg:-$tmux_conf_theme_colour_1}
# tmux_conf_theme_message_bg=${tmux_conf_theme_message_bg:-$tmux_conf_theme_colour_5}
# tmux_conf_theme_message_attr=${tmux_conf_theme_message_attr:-bold}
#
# tmux_conf_theme_message_command_fg=${tmux_conf_theme_message_command_fg:-$tmux_conf_theme_colour_5}
# tmux_conf_theme_message_command_bg=${tmux_conf_theme_message_command_bg:-$tmux_conf_theme_colour_1}
# tmux_conf_theme_message_command_attr=${tmux_conf_theme_message_command_attr:-bold}
#
# tmux_conf_theme_mode_fg=${tmux_conf_theme_mode_fg:-$tmux_conf_theme_colour_1}
# tmux_conf_theme_mode_bg=${tmux_conf_theme_mode_bg:-$tmux_conf_theme_colour_5}
# tmux_conf_theme_mode_attr=${tmux_conf_theme_mode_attr:-bold}
#
# tmux_conf_theme_status_fg=${tmux_conf_theme_status_fg:-$tmux_conf_theme_colour_3}
# tmux_conf_theme_status_bg=${tmux_conf_theme_status_bg:-$tmux_conf_theme_colour_1}
# tmux_conf_theme_status_attr=${tmux_conf_theme_status_attr:-none}
#
# tmux_conf_theme_terminal_title=${tmux_conf_theme_terminal_title:-#h ❐ #S ● #I #W}
#
# tmux_conf_theme_window_status_fg=${tmux_conf_theme_window_status_fg:-$tmux_conf_theme_colour_3}
# tmux_conf_theme_window_status_bg=${tmux_conf_theme_window_status_bg:-$tmux_conf_theme_colour_1}
# tmux_conf_theme_window_status_attr=${tmux_conf_theme_window_status_attr:-none}
# tmux_conf_theme_window_status_format=${tmux_conf_theme_window_status_format:-&amp;#39;#I #W#{?#{||:#{window_bell_flag},#{window_zoomed_flag}}, ,}#{?window_bell_flag,!,}#{?window_zoomed_flag,Z,}&amp;#39;}
#
# tmux_conf_theme_window_status_current_fg=${tmux_conf_theme_window_status_current_fg:-$tmux_conf_theme_colour_1}
# tmux_conf_theme_window_status_current_bg=${tmux_conf_theme_window_status_current_bg:-$tmux_conf_theme_colour_4}
# tmux_conf_theme_window_status_current_attr=${tmux_conf_theme_window_status_current_attr:-bold}
# tmux_conf_theme_window_status_current_format=${tmux_conf_theme_window_status_current_format:-&amp;#39;#I #W#{?#{||:#{window_bell_flag},#{window_zoomed_flag}}, ,}#{?window_bell_flag,!,}#{?window_zoomed_flag,Z,}&amp;#39;}
#
# tmux_conf_theme_window_status_activity_fg=${tmux_conf_theme_window_status_activity_fg:-default}
# tmux_conf_theme_window_status_activity_bg=${tmux_conf_theme_window_status_activity_bg:-default}
# tmux_conf_theme_window_status_activity_attr=${tmux_conf_theme_window_status_activity_attr:-underscore}
#
# tmux_conf_theme_window_status_bell_fg=${tmux_conf_theme_window_status_bell_fg:-$tmux_conf_theme_colour_5}
# tmux_conf_theme_window_status_bell_bg=${tmux_conf_theme_window_status_bell_bg:-default}
# tmux_conf_theme_window_status_bell_attr=${tmux_conf_theme_window_status_bell_attr:-blink,bold}
#
# tmux_conf_theme_window_status_last_fg=${tmux_conf_theme_window_status_last_fg:-$tmux_conf_theme_colour_4}
# tmux_conf_theme_window_status_last_bg=${tmux_conf_theme_window_status_last_bg:-default}
# tmux_conf_theme_window_status_last_attr=${tmux_conf_theme_window_status_last_attr:-none}
#
# if [ &amp;#34;$tmux_conf_theme_window_status_bg&amp;#34; = &amp;#34;$tmux_conf_theme_status_bg&amp;#34; ] || [ &amp;#34;$tmux_conf_theme_window_status_bg&amp;#34; = &amp;#34;default&amp;#34; ]; then
# spacer=&amp;#39;&amp;#39;
# spacer_current=&amp;#39; &amp;#39;
# else
# spacer=&amp;#39; &amp;#39;
# spacer_current=&amp;#39; &amp;#39;
# fi
# if [ &amp;#34;$tmux_conf_theme_window_status_last_bg&amp;#34; = &amp;#34;$tmux_conf_theme_status_bg&amp;#34; ] || [ &amp;#34;$tmux_conf_theme_window_status_last_bg&amp;#34; = &amp;#34;default&amp;#34; ] ; then
# spacer_last=&amp;#39;&amp;#39;
# else
# spacer_last=&amp;#39; &amp;#39;
# fi
# if [ &amp;#34;$tmux_conf_theme_window_status_activity_bg&amp;#34; = &amp;#34;$tmux_conf_theme_status_bg&amp;#34; ] || [ &amp;#34;$tmux_conf_theme_window_status_activity_bg&amp;#34; = &amp;#34;default&amp;#34; ] ; then
# spacer_activity=&amp;#39;&amp;#39;
# spacer_last_activity=&amp;#34;$spacer_last&amp;#34;
# else
# spacer_activity=&amp;#39; &amp;#39;
# spacer_last_activity=&amp;#39; &amp;#39;
# fi
# if [ &amp;#34;$tmux_conf_theme_window_status_bell_bg&amp;#34; = &amp;#34;$tmux_conf_theme_status_bg&amp;#34; ] || [ &amp;#34;$tmux_conf_theme_window_status_bell_bg&amp;#34; = &amp;#34;default&amp;#34; ] ; then
# spacer_bell=&amp;#39;&amp;#39;
# spacer_last_bell=&amp;#34;$spacer_last&amp;#34;
# spacer_activity_bell=&amp;#34;$spacer_activity&amp;#34;
# spacer_last_activity_bell=&amp;#34;$spacer_last_activity&amp;#34;
# else
# spacer_bell=&amp;#39; &amp;#39;
# spacer_last_bell=&amp;#39; &amp;#39;
# spacer_activity_bell=&amp;#39; &amp;#39;
# spacer_last_activity_bell=&amp;#39; &amp;#39;
# fi
# spacer=&amp;#34;#{?window_last_flag,#{?window_activity_flag,#{?window_bell_flag,$spacer_last_activity_bell,$spacer_last_activity},#{?window_bell_flag,$spacer_last_bell,$spacer_last}},#{?window_activity_flag,#{?window_bell_flag,$spacer_activity_bell,$spacer_activity},#{?window_bell_flag,$spacer_bell,$spacer}}}&amp;#34;
# if [ &amp;#34;$(tmux show -g -v status-justify)&amp;#34; = &amp;#34;right&amp;#34; ]; then
# if [ -z &amp;#34;$tmux_conf_theme_right_separator_main&amp;#34; ]; then
# window_status_separator=&amp;#39; &amp;#39;
# else
# window_status_separator=&amp;#39;&amp;#39;
# fi
# window_status_format=&amp;#34;#[fg=$tmux_conf_theme_window_status_bg,bg=$tmux_conf_theme_status_bg,none]#{?window_last_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_last_bg&amp;#34; | perl -n -e &amp;#34;s/.+/#[fg=$&amp;amp;]/; print if !/default/&amp;#34;),}#{?window_activity_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_activity_bg&amp;#34; | perl -n -e &amp;#34;s/.+/#[fg=$&amp;amp;]/; print if !/default/&amp;#34;),}#{?window_bell_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_bell_bg&amp;#34; | perl -n -e &amp;#34;s/.+/#[fg=$&amp;amp;]/; print if !/default/&amp;#34;),}$tmux_conf_theme_right_separator_main#[fg=$tmux_conf_theme_window_status_fg,bg=$tmux_conf_theme_window_status_bg,$tmux_conf_theme_window_status_attr]#{?window_last_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_last_fg&amp;#34; | perl -n -e &amp;#34;s/.+/#[fg=$&amp;amp;]/; print if !/default/&amp;#34;),}#{?window_last_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_last_bg&amp;#34; | perl -n -e &amp;#34;s/.+/#[bg=$&amp;amp;]/; print if !/default/&amp;#34;),}#{?window_activity_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_activity_fg&amp;#34; | perl -n -e &amp;#34;s/.+/#[fg=$&amp;amp;]/; print if !/default/&amp;#34;),}#{?window_activity_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_activity_bg&amp;#34; | perl -n -e &amp;#34;s/.+/#[bg=$&amp;amp;]/; print if !/default/&amp;#34;),}#{?window_bell_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_bell_fg&amp;#34; | perl -n -e &amp;#34;s/.+/#[fg=$&amp;amp;]/; print if !/default/&amp;#34;),}#{?window_bell_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_bell_bg&amp;#34; | perl -n -e &amp;#34;s/.+/#[bg=$&amp;amp;]/; print if !/default/&amp;#34;),}$spacer$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_last_attr&amp;#34; | perl -n -e &amp;#39;print &amp;#34;#{?window_last_flag,#[none],}&amp;#34; if !/default/ ; s/([a-z]+),?/#{?window_last_flag,#[\1],}/g; print if !/default/&amp;#39;)$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_activity_attr&amp;#34; | perl -n -e &amp;#39;print &amp;#34;#{?window_activity_flag?,#[none],}&amp;#34; if !/default/ ; s/([a-z]+),?/#{?window_activity_flag,#[\1],}/g; print if !/default/&amp;#39;)$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_bell_attr&amp;#34; | perl -n -e &amp;#39;print &amp;#34;#{?window_bell_flag,#[none],}&amp;#34; if !/default/ ; s/([a-z]+),?/#{?window_bell_flag,#[\1],}/g; print if !/default/&amp;#39;)$tmux_conf_theme_window_status_format#[none]$spacer#[fg=$tmux_conf_theme_status_bg,bg=$tmux_conf_theme_window_status_bg]#{?window_last_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_last_bg&amp;#34; | perl -n -e &amp;#34;s/.+/#[bg=$&amp;amp;]/; print if !/default/&amp;#34;),}#{?window_activity_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_activity_bg&amp;#34; | perl -n -e &amp;#34;s/.+/#[bg=$&amp;amp;]/; print if !/default/&amp;#34;),}#{?window_bell_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_bell_bg&amp;#34; | perl -n -e &amp;#34;s/.+/#[bg=$&amp;amp;]/; print if !/default/&amp;#34;),}#[none]$tmux_conf_theme_right_separator_main&amp;#34;
# window_status_current_format=&amp;#34;#[fg=$tmux_conf_theme_window_status_current_bg,bg=$tmux_conf_theme_status_bg,none]$tmux_conf_theme_right_separator_main#[fg=$tmux_conf_theme_window_status_current_fg,bg=$tmux_conf_theme_window_status_current_bg,$tmux_conf_theme_window_status_current_attr]$spacer_current$tmux_conf_theme_window_status_current_format$spacer_current#[fg=$tmux_conf_theme_status_bg,bg=$tmux_conf_theme_window_status_current_bg,none]$tmux_conf_theme_right_separator_main&amp;#34;
# else
# if [ -z &amp;#34;$tmux_conf_theme_left_separator_main&amp;#34; ]; then
# window_status_separator=&amp;#39; &amp;#39;
# else
# window_status_separator=&amp;#39;&amp;#39;
# fi
# window_status_format=&amp;#34;#[fg=$tmux_conf_theme_status_bg,bg=$tmux_conf_theme_window_status_bg,none]#{?window_last_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_last_bg&amp;#34; | perl -n -e &amp;#34;s/.+/#[bg=$&amp;amp;]/; print if !/default/&amp;#34;),}#{?window_activity_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_activity_bg&amp;#34; | perl -n -e &amp;#34;s/.+/#[bg=$&amp;amp;]/; print if !/default/&amp;#34;),}#{?window_bell_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_bell_bg&amp;#34; | perl -n -e &amp;#34;s/.+/#[bg=$&amp;amp;]/; print if !/default/&amp;#34;),}$tmux_conf_theme_left_separator_main#[fg=$tmux_conf_theme_window_status_fg,bg=$tmux_conf_theme_window_status_bg,$tmux_conf_theme_window_status_attr]#{?window_last_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_last_fg&amp;#34; | perl -n -e &amp;#34;s/.+/#[fg=$&amp;amp;]/; print if !/default/&amp;#34;),}#{?window_last_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_last_bg&amp;#34; | perl -n -e &amp;#34;s/.+/#[bg=$&amp;amp;]/; print if !/default/&amp;#34;),}#{?window_activity_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_activity_fg&amp;#34; | perl -n -e &amp;#34;s/.+/#[fg=$&amp;amp;]/; print if !/default/&amp;#34;),}#{?window_activity_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_activity_bg&amp;#34; | perl -n -e &amp;#34;s/.+/#[bg=$&amp;amp;]/; print if !/default/&amp;#34;),}#{?window_bell_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_bell_fg&amp;#34; | perl -n -e &amp;#34;s/.+/#[fg=$&amp;amp;]/; print if !/default/&amp;#34;),}#{?window_bell_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_bell_bg&amp;#34; | perl -n -e &amp;#34;s/.+/#[bg=$&amp;amp;]/; print if !/default/&amp;#34;),}$spacer$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_last_attr&amp;#34; | perl -n -e &amp;#39;print &amp;#34;#{?window_last_flag,#[none],}&amp;#34; if !/default/ ; s/([a-z]+),?/#{?window_last_flag,#[\1],}/g; print if !/default/&amp;#39;)$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_activity_attr&amp;#34; | perl -n -e &amp;#39;print &amp;#34;#{?window_activity_flag,#[none],}&amp;#34; if !/default/ ; s/([a-z]+),?/#{?window_activity_flag,#[\1],}/g; print if !/default/&amp;#39;)$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_bell_attr&amp;#34; | perl -n -e &amp;#39;print &amp;#34;#{?window_bell_flag,#[none],}&amp;#34; if /!default/ ; s/([a-z]+),?/#{?window_bell_flag,#[\1],}/g; print if !/default/&amp;#39;)$tmux_conf_theme_window_status_format#[none]$spacer#[fg=$tmux_conf_theme_window_status_bg,bg=$tmux_conf_theme_status_bg]#{?window_last_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_last_bg&amp;#34; | perl -n -e &amp;#34;s/.+/#[fg=$&amp;amp;]/; print if !/default/&amp;#34;),}#{?window_activity_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_activity_bg&amp;#34; | perl -n -e &amp;#34;s/.+/#[fg=$&amp;amp;]/; print if !/default/&amp;#34;),}#{?window_bell_flag,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_window_status_bell_bg&amp;#34; | perl -n -e &amp;#34;s/.+/#[fg=$&amp;amp;]/; print if !/default/&amp;#34;),}$tmux_conf_theme_left_separator_main&amp;#34;
# window_status_current_format=&amp;#34;#[fg=$tmux_conf_theme_status_bg,bg=$tmux_conf_theme_window_status_current_bg,none]$tmux_conf_theme_left_separator_main#[fg=$tmux_conf_theme_window_status_current_fg,bg=$tmux_conf_theme_window_status_current_bg,$tmux_conf_theme_window_status_current_attr]$spacer_current$tmux_conf_theme_window_status_current_format$spacer_current#[fg=$tmux_conf_theme_window_status_current_bg,bg=$tmux_conf_theme_status_bg]$tmux_conf_theme_left_separator_main&amp;#34;
# fi
#
# # -- indicators
#
# tmux_conf_theme_pairing=${tmux_conf_theme_pairing:-⚇} # U+2687
# tmux_conf_theme_pairing_fg=${tmux_conf_theme_pairing_fg:-none}
# tmux_conf_theme_pairing_bg=${tmux_conf_theme_pairing_bg:-none}
# tmux_conf_theme_pairing_attr=${tmux_conf_theme_pairing_attr:-none}
#
# tmux_conf_theme_prefix=${tmux_conf_theme_prefix:-⌨} # U+2328
# tmux_conf_theme_prefix_fg=${tmux_conf_theme_prefix_fg:-none}
# tmux_conf_theme_prefix_bg=${tmux_conf_theme_prefix_bg:-none}
# tmux_conf_theme_prefix_attr=${tmux_conf_theme_prefix_attr:-none}
#
# tmux_conf_theme_mouse=${tmux_conf_theme_mouse:-↗} # U+2197
# tmux_conf_theme_mouse_fg=${tmux_conf_theme_mouse_fg:-none}
# tmux_conf_theme_mouse_bg=${tmux_conf_theme_mouse_bg:-none}
# tmux_conf_theme_mouse_attr=${tmux_conf_theme_mouse_attr:-none}
#
# tmux_conf_theme_root=${tmux_conf_theme_root:-!}
# tmux_conf_theme_root_fg=${tmux_conf_theme_root_fg:-none}
# tmux_conf_theme_root_bg=${tmux_conf_theme_root_bg:-none}
# tmux_conf_theme_root_attr=${tmux_conf_theme_root_attr:-bold,blink}
#
# tmux_conf_theme_synchronized=${tmux_conf_theme_synchronized:-⚏} # U+268F
# tmux_conf_theme_synchronized_fg=${tmux_conf_theme_synchronized_fg:-none}
# tmux_conf_theme_synchronized_bg=${tmux_conf_theme_synchronized_bg:-none}
# tmux_conf_theme_synchronized_attr=${tmux_conf_theme_synchronized_attr:-none}
#
# # -- status-left style
#
# tmux_conf_theme_status_left=${tmux_conf_theme_status_left-&amp;#39; ❐ #S | ↑#{?uptime_y, #{uptime_y}y,}#{?uptime_d, #{uptime_d}d,}#{?uptime_h, #{uptime_h}h,}#{?uptime_m, #{uptime_m}m,} &amp;#39;}
# tmux_conf_theme_status_left_fg=${tmux_conf_theme_status_left_fg:-$tmux_conf_theme_colour_6,$tmux_conf_theme_colour_7,$tmux_conf_theme_colour_8}
# tmux_conf_theme_status_left_bg=${tmux_conf_theme_status_left_bg:-$tmux_conf_theme_colour_9,$tmux_conf_theme_colour_10,$tmux_conf_theme_colour_11}
# tmux_conf_theme_status_left_attr=${tmux_conf_theme_status_left_attr:-bold,none,none}
#
# if [ -n &amp;#34;$tmux_conf_theme_status_left&amp;#34; ]; then
# status_left=$(echo &amp;#34;$tmux_conf_theme_status_left&amp;#34; | sed \
# -e &amp;#34;s/#{pairing}/#[fg=$tmux_conf_theme_pairing_fg]#[bg=$tmux_conf_theme_pairing_bg]#[$tmux_conf_theme_pairing_attr]#{pairing}#[inherit]/g&amp;#34; \
# -e &amp;#34;s/#{prefix}/#[fg=$tmux_conf_theme_prefix_fg]#[bg=$tmux_conf_theme_prefix_bg]#[$tmux_conf_theme_prefix_attr]#{prefix}#[inherit]/g&amp;#34; \
# -e &amp;#34;s/#{mouse}/#[fg=$tmux_conf_theme_mouse_fg]#[bg=$tmux_conf_theme_mouse_bg]#[$tmux_conf_theme_mouse_attr]#{mouse}#[inherit]/g&amp;#34; \
# -e &amp;#34;s/#{synchronized}/#[fg=$tmux_conf_theme_synchronized_fg]#[bg=$tmux_conf_theme_synchronized_bg]#[$tmux_conf_theme_synchronized_attr]#{synchronized}#[inherit]/g&amp;#34; \
# -e &amp;#34;s/#{root}/#[fg=$tmux_conf_theme_root_fg]#[bg=$tmux_conf_theme_root_bg]#[$tmux_conf_theme_root_attr]#{root}#[inherit]/g&amp;#34;)
#
# status_left=$(printf &amp;#39;%s&amp;#39; &amp;#34;$status_left&amp;#34; | awk \
# -v status_bg=&amp;#34;$tmux_conf_theme_status_bg&amp;#34; \
# -v fg_=&amp;#34;$tmux_conf_theme_status_left_fg&amp;#34; \
# -v bg_=&amp;#34;$tmux_conf_theme_status_left_bg&amp;#34; \
# -v attr_=&amp;#34;$tmux_conf_theme_status_left_attr&amp;#34; \
# -v mainsep=&amp;#34;$tmux_conf_theme_left_separator_main&amp;#34; \
# -v subsep=&amp;#34;$tmux_conf_theme_left_separator_sub&amp;#34; &amp;#39;
# function subsplit(s, l, i, a, r)
# {
# l = split(s, a, &amp;#34;,&amp;#34;)
# for (i = 1; i &amp;lt;= l; ++i)
# {
# o = split(a[i], _, &amp;#34;(&amp;#34;) - 1
# c = split(a[i], _, &amp;#34;)&amp;#34;) - 1
# open += o - c
# o_ = split(a[i], _, &amp;#34;{&amp;#34;) - 1
# c_ = split(a[i], _, &amp;#34;}&amp;#34;) - 1
# open_ += o_ - c_
# o__ = split(a[i], _, &amp;#34;[&amp;#34;) - 1
# c__ = split(a[i], _, &amp;#34;]&amp;#34;) - 1
# open__ += o__ - c__
#
# if (i == l)
# r = sprintf(&amp;#34;%s%s&amp;#34;, r, a[i])
# else if (open || open_ || open__)
# r = sprintf(&amp;#34;%s%s,&amp;#34;, r, a[i])
# else
# r = sprintf(&amp;#34;%s%s#[fg=%s,bg=%s,%s]%s&amp;#34;, r, a[i], fg[j], bg[j], attr[j], subsep)
# }
#
# gsub(/#\[inherit\]/, sprintf(&amp;#34;#[default]#[fg=%s,bg=%s,%s]&amp;#34;, fg[j], bg[j], attr[j]), r)
# return r
# }
# BEGIN {
# FS = &amp;#34;|&amp;#34;
# l1 = split(fg_, fg, &amp;#34;,&amp;#34;)
# l2 = split(bg_, bg, &amp;#34;,&amp;#34;)
# l3 = split(attr_, attr, &amp;#34;,&amp;#34;)
# l = l1 &amp;lt; l2 ? (l1 &amp;lt; l3 ? l1 : l3) : (l2 &amp;lt; l3 ? l2 : l3)
# }
# {
# for (i = j = 1; i &amp;lt;= NF; ++i)
# {
# if (open || open_ || open__)
# printf &amp;#34;|%s&amp;#34;, subsplit($i)
# else
# {
# if (i &amp;gt; 1)
# printf &amp;#34;#[fg=%s,bg=%s,none]%s#[fg=%s,bg=%s,%s]%s&amp;#34;, bg[j_], bg[j], mainsep, fg[j], bg[j], attr[j], subsplit($i)
# else
# printf &amp;#34;#[fg=%s,bg=%s,%s]%s&amp;#34;, fg[j], bg[j], attr[j], subsplit($i)
# }
#
# if (!open &amp;amp;&amp;amp; !open_ &amp;amp;&amp;amp; !open__)
# {
# j_ = j
# j = j % l + 1
# }
# }
# printf &amp;#34;#[fg=%s,bg=%s,none]%s&amp;#34;, bg[j_], status_bg, mainsep
# }&amp;#39;)
# fi
# status_left=&amp;#34;$status_left &amp;#34;
#
# # -- status-right style
#
# tmux_conf_theme_status_right=${tmux_conf_theme_status_right-&amp;#39; #{prefix}#{mouse}#{pairing}#{synchronized}#{?battery_status, #{battery_status},}#{?battery_bar, #{battery_bar},}#{?battery_percentage, #{battery_percentage},} , %R , %d %b | #{username}#{root} | #{hostname} &amp;#39;}
# tmux_conf_theme_status_right_fg=${tmux_conf_theme_status_right_fg:-$tmux_conf_theme_colour_12,$tmux_conf_theme_colour_13,$tmux_conf_theme_colour_14}
# tmux_conf_theme_status_right_bg=${tmux_conf_theme_status_right_bg:-$tmux_conf_theme_colour_15,$tmux_conf_theme_colour_16,$tmux_conf_theme_colour_17}
# tmux_conf_theme_status_right_attr=${tmux_conf_theme_status_right_attr:-none,none,bold}
#
# if [ -n &amp;#34;$tmux_conf_theme_status_right&amp;#34; ]; then
# status_right=$(echo &amp;#34;$tmux_conf_theme_status_right&amp;#34; | sed \
# -e &amp;#34;s/#{pairing}/#[fg=$tmux_conf_theme_pairing_fg]#[bg=$tmux_conf_theme_pairing_bg]#[$tmux_conf_theme_pairing_attr]#{pairing}#[inherit]/g&amp;#34; \
# -e &amp;#34;s/#{prefix}/#[fg=$tmux_conf_theme_prefix_fg]#[bg=$tmux_conf_theme_prefix_bg]#[$tmux_conf_theme_prefix_attr]#{prefix}#[inherit]/g&amp;#34; \
# -e &amp;#34;s/#{mouse}/#[fg=$tmux_conf_theme_mouse_fg]#[bg=$tmux_conf_theme_mouse_bg]#[$tmux_conf_theme_mouse_attr]#{mouse}#[inherit]/g&amp;#34; \
# -e &amp;#34;s/#{synchronized}/#[fg=$tmux_conf_theme_synchronized_fg]#[bg=$tmux_conf_theme_synchronized_bg]#[$tmux_conf_theme_synchronized_attr]#{synchronized}#[inherit]/g&amp;#34; \
# -e &amp;#34;s/#{root}/#[fg=$tmux_conf_theme_root_fg]#[bg=$tmux_conf_theme_root_bg]#[$tmux_conf_theme_root_attr]#{root}#[inherit]/g&amp;#34;)
#
# status_right=$(printf &amp;#39;%s&amp;#39; &amp;#34;$status_right&amp;#34; | awk \
# -v status_bg=&amp;#34;$tmux_conf_theme_status_bg&amp;#34; \
# -v fg_=&amp;#34;$tmux_conf_theme_status_right_fg&amp;#34; \
# -v bg_=&amp;#34;$tmux_conf_theme_status_right_bg&amp;#34; \
# -v attr_=&amp;#34;$tmux_conf_theme_status_right_attr&amp;#34; \
# -v mainsep=&amp;#34;$tmux_conf_theme_right_separator_main&amp;#34; \
# -v subsep=&amp;#34;$tmux_conf_theme_right_separator_sub&amp;#34; &amp;#39;
# function subsplit(s, l, i, a, r)
# {
# l = split(s, a, &amp;#34;,&amp;#34;)
# for (i = 1; i &amp;lt;= l; ++i)
# {
# o = split(a[i], _, &amp;#34;(&amp;#34;) - 1
# c = split(a[i], _, &amp;#34;)&amp;#34;) - 1
# open += o - c
# o_ = split(a[i], _, &amp;#34;{&amp;#34;) - 1
# c_ = split(a[i], _, &amp;#34;}&amp;#34;) - 1
# open_ += o_ - c_
# o__ = split(a[i], _, &amp;#34;[&amp;#34;) - 1
# c__ = split(a[i], _, &amp;#34;]&amp;#34;) - 1
# open__ += o__ - c__
#
# if (i == l)
# r = sprintf(&amp;#34;%s%s&amp;#34;, r, a[i])
# else if (open || open_ || open__)
# r = sprintf(&amp;#34;%s%s,&amp;#34;, r, a[i])
# else
# r = sprintf(&amp;#34;%s%s#[fg=%s,bg=%s,%s]%s&amp;#34;, r, a[i], fg[j], bg[j], attr[j], subsep)
# }
#
# gsub(/#\[inherit\]/, sprintf(&amp;#34;#[default]#[fg=%s,bg=%s,%s]&amp;#34;, fg[j], bg[j], attr[j]), r)
# return r
# }
# BEGIN {
# FS = &amp;#34;|&amp;#34;
# l1 = split(fg_, fg, &amp;#34;,&amp;#34;)
# l2 = split(bg_, bg, &amp;#34;,&amp;#34;)
# l3 = split(attr_, attr, &amp;#34;,&amp;#34;)
# l = l1 &amp;lt; l2 ? (l1 &amp;lt; l3 ? l1 : l3) : (l2 &amp;lt; l3 ? l2 : l3)
# }
# {
# for (i = j = 1; i &amp;lt;= NF; ++i)
# {
# if (open_ || open || open__)
# printf &amp;#34;|%s&amp;#34;, subsplit($i)
# else
# printf &amp;#34;#[fg=%s,bg=%s,none]%s#[fg=%s,bg=%s,%s]%s&amp;#34;, bg[j], (i == 1) ? status_bg : bg[j_], mainsep, fg[j], bg[j], attr[j], subsplit($i)
#
# if (!open &amp;amp;&amp;amp; !open_ &amp;amp;&amp;amp; !open__)
# {
# j_ = j
# j = j % l + 1
# }
# }
# }&amp;#39;)
# fi
# status_right=${status_right-}
#
# # -- clock ---------------------------------------------------------------
#
# tmux_conf_theme_clock_colour=${tmux_conf_theme_clock_colour:-$tmux_conf_theme_colour_4}
# tmux_conf_theme_clock_style=${tmux_conf_theme_clock_style:-24}
#
# tmux setw -g window-style &amp;#34;$window_style&amp;#34; \; setw -g window-active-style &amp;#34;$window_active_style&amp;#34; \;\
# setw -g pane-border-style &amp;#34;fg=$tmux_conf_theme_pane_border_fg,bg=$tmux_conf_theme_pane_border_bg&amp;#34; \; set -g pane-active-border-style &amp;#34;fg=$tmux_conf_theme_pane_active_border_fg,bg=$tmux_conf_theme_pane_active_border_bg&amp;#34; \;\
# set -g display-panes-colour &amp;#34;$tmux_conf_theme_pane_indicator&amp;#34; \; set -g display-panes-active-colour &amp;#34;$tmux_conf_theme_pane_active_indicator&amp;#34; \;\
# set -g message-style &amp;#34;fg=$tmux_conf_theme_message_fg,bg=$tmux_conf_theme_message_bg,$tmux_conf_theme_message_attr&amp;#34; \;\
# set -g message-command-style &amp;#34;fg=$tmux_conf_theme_message_command_fg,bg=$tmux_conf_theme_message_command_bg,$tmux_conf_theme_message_command_attr&amp;#34; \;\
# setw -g mode-style &amp;#34;fg=$tmux_conf_theme_mode_fg,bg=$tmux_conf_theme_mode_bg,$tmux_conf_theme_mode_attr&amp;#34; \;\
# set -g status-style &amp;#34;fg=$tmux_conf_theme_status_fg,bg=$tmux_conf_theme_status_bg,$tmux_conf_theme_status_attr&amp;#34; \;\
# set -g status-left-style &amp;#34;fg=$tmux_conf_theme_status_fg,bg=$tmux_conf_theme_status_bg,$tmux_conf_theme_status_attr&amp;#34; \;\
# set -g status-right-style &amp;#34;fg=$tmux_conf_theme_status_fg,bg=$tmux_conf_theme_status_bg,$tmux_conf_theme_status_attr&amp;#34; \;\
# setw -g window-status-style &amp;#34;fg=$tmux_conf_theme_window_status_fg,bg=$tmux_conf_theme_window_status_bg,$tmux_conf_theme_window_status_attr&amp;#34; \;\
# setw -g window-status-current-style &amp;#34;fg=$tmux_conf_theme_window_status_current_fg,bg=$tmux_conf_theme_window_status_current_bg,$tmux_conf_theme_window_status_current_attr&amp;#34; \;\
# setw -g window-status-activity-style &amp;#34;fg=$tmux_conf_theme_window_status_activity_fg,bg=$tmux_conf_theme_window_status_activity_bg,$tmux_conf_theme_window_status_activity_attr&amp;#34; \;\
# setw -g window-status-bell-style &amp;#34;fg=$tmux_conf_theme_window_status_bell_fg,bg=$tmux_conf_theme_window_status_bell_bg,$tmux_conf_theme_window_status_bell_attr&amp;#34; \;\
# setw -g window-status-last-style &amp;#34;fg=$tmux_conf_theme_window_status_last_fg,bg=$tmux_conf_theme_window_status_last_bg,$tmux_conf_theme_window_status_last_attr&amp;#34; \;\
# setw -g window-status-separator &amp;#34;$window_status_separator&amp;#34; \;\
# setw -g clock-mode-colour &amp;#34;$tmux_conf_theme_clock_colour&amp;#34; \;\
# setw -g clock-mode-style &amp;#34;$tmux_conf_theme_clock_style&amp;#34;
# fi
#
# # -- variables -------------------------------------------------------------
#
# set_titles_string=$(printf &amp;#39;%s&amp;#39; &amp;#34;${tmux_conf_theme_terminal_title:-$(tmux show -gv set-titles-string)}&amp;#34; | sed \
# -e &amp;#34;s%#{circled_window_index}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _circled &amp;#39;#I&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{circled_session_name}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _circled &amp;#39;#S&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{username}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _username &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; false &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{hostname}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _hostname &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; false false &amp;#39;#h&amp;#39; &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{hostname_full}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _hostname &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; false true &amp;#39;#H&amp;#39; &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{username_ssh}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _username &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; true &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{hostname_ssh}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _hostname &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; true false &amp;#39;#h&amp;#39; &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{hostname_full_ssh}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _hostname &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; true true &amp;#39;#H&amp;#39; &amp;#39;#D&amp;#39;)%g&amp;#34;)
#
# window_status_format=$(printf &amp;#39;%s&amp;#39; &amp;#34;${window_status_format:-$(tmux show -gv window-status-format)}&amp;#34; | sed \
# -e &amp;#34;s%#{circled_window_index}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _circled &amp;#39;#I&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{circled_session_name}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _circled &amp;#39;#S&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{username}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _username &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; false &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{hostname}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _hostname &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; false false &amp;#39;#h&amp;#39; &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{hostname_full}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _hostname &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; false true &amp;#39;#H&amp;#39; &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{username_ssh}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _username &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; true &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{hostname_ssh}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _hostname &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; true false &amp;#39;#h&amp;#39; &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{hostname_full_ssh}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _hostname &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; true true &amp;#39;#H&amp;#39; &amp;#39;#D&amp;#39;)%g&amp;#34;)
#
# window_status_current_format=$(printf &amp;#39;%s&amp;#39; &amp;#34;${window_status_current_format:-$(tmux show -gv window-status-current-format)}&amp;#34; | sed \
# -e &amp;#34;s%#{circled_window_index}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _circled &amp;#39;#I&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{circled_session_name}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _circled &amp;#39;#S&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{username}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _username &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; false &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{hostname}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _hostname &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; false false &amp;#39;#h&amp;#39; &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{hostname_full}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _hostname &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; false true &amp;#39;#H&amp;#39; &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{username_ssh}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _username &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; true &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{hostname_ssh}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _hostname &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; true false &amp;#39;#h&amp;#39; &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{hostname_full_ssh}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _hostname &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; true true &amp;#39;#H&amp;#39; &amp;#39;#D&amp;#39;)%g&amp;#34;)
#
# status_left=$(printf &amp;#39;%s&amp;#39; &amp;#34;${status_left-$(tmux show -gv status-left)}&amp;#34; | sed \
# -e &amp;#34;s/#{pairing}/#{?session_many_attached,$tmux_conf_theme_pairing ,}/g&amp;#34; \
# -e &amp;#34;s/#{prefix}/#{?client_prefix,$tmux_conf_theme_prefix ,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_prefix&amp;#34; | sed -e &amp;#39;s/./ /g&amp;#39;) }/g&amp;#34; \
# -e &amp;#34;s/#{mouse}/#{?mouse,$tmux_conf_theme_mouse ,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_mouse&amp;#34; | sed -e &amp;#39;s/./ /g&amp;#39;) }/g&amp;#34; \
# -e &amp;#34;s%#{synchronized}%#{?pane_synchronized,$tmux_conf_theme_synchronized ,}%g&amp;#34; \
# -e &amp;#34;s%#{circled_session_name}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _circled &amp;#39;#S&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{root}%#{?#{==:#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _username &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; &amp;#39;#D&amp;#39;),root},$tmux_conf_theme_root,}%g&amp;#34;)
#
# status_right=$(printf &amp;#39;%s&amp;#39; &amp;#34;${status_right-$(tmux show -gv status-right)}&amp;#34; | sed \
# -e &amp;#34;s/#{pairing}/#{?session_many_attached,$tmux_conf_theme_pairing ,}/g&amp;#34; \
# -e &amp;#34;s/#{prefix}/#{?client_prefix,$tmux_conf_theme_prefix ,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_prefix&amp;#34; | sed -e &amp;#39;s/./ /g&amp;#39;) }/g&amp;#34; \
# -e &amp;#34;s/#{mouse}/#{?mouse,$tmux_conf_theme_mouse ,$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_theme_mouse&amp;#34; | sed -e &amp;#39;s/./ /g&amp;#39;) }/g&amp;#34; \
# -e &amp;#34;s%#{synchronized}%#{?pane_synchronized,$tmux_conf_theme_synchronized ,}%g&amp;#34; \
# -e &amp;#34;s%#{circled_session_name}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _circled &amp;#39;#S&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{root}%#{?#{==:#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _username &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; &amp;#39;#D&amp;#39;),root},$tmux_conf_theme_root,}%g&amp;#34;)
#
# tmux_conf_battery_bar_symbol_full=$(_decode_unicode_escapes &amp;#34;${tmux_conf_battery_bar_symbol_full:-◼}&amp;#34;)
# tmux_conf_battery_bar_symbol_empty=$(_decode_unicode_escapes &amp;#34;${tmux_conf_battery_bar_symbol_empty:-◻}&amp;#34;)
# tmux_conf_battery_bar_length=${tmux_conf_battery_bar_length:-auto}
# tmux_conf_battery_bar_palette=${tmux_conf_battery_bar_palette:-gradient}
# tmux_conf_battery_hbar_palette=${tmux_conf_battery_hbar_palette:-gradient}
# tmux_conf_battery_vbar_palette=${tmux_conf_battery_vbar_palette:-gradient}
# tmux_conf_battery_status_charging=$(_decode_unicode_escapes &amp;#34;${tmux_conf_battery_status_charging:-↑}&amp;#34;) # U+2191
# tmux_conf_battery_status_discharging=$(_decode_unicode_escapes &amp;#34;${tmux_conf_battery_status_discharging:-↓}&amp;#34;) # U+2193
#
# _pkillf &amp;#34;cut -c3- &amp;#39;$TMUX_CONF&amp;#39; \| sh -s _battery&amp;#34;
# _battery_info
# if [ &amp;#34;$battery_charge&amp;#34; != 0 ]; then
# case &amp;#34;$status_left $status_right&amp;#34; in
# *&amp;#39;#{battery_&amp;#39;*|*&amp;#39;#{?battery_&amp;#39;*)
# status_left=$(echo &amp;#34;$status_left&amp;#34; | sed -E \
# -e &amp;#39;s%#\{\?battery_bar%#\{?@battery_percentage%g&amp;#39; \
# -e &amp;#39;s%#\{\?battery_hbar%#\{?@battery_percentage%g&amp;#39; \
# -e &amp;#39;s%#\{\?battery_vbar%#\{?@battery_percentage%g&amp;#39; \
# -e &amp;#34;s%#\{battery_bar\}%#(nice cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _bar &amp;#39;$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_battery_bar_palette&amp;#34; | tr &amp;#39;,&amp;#39; &amp;#39;;&amp;#39;)&amp;#39; &amp;#39;$tmux_conf_battery_bar_symbol_empty&amp;#39; &amp;#39;$tmux_conf_battery_bar_symbol_full&amp;#39; &amp;#39;$tmux_conf_battery_bar_length&amp;#39; &amp;#39;#{@battery_charge}&amp;#39; &amp;#39;#{client_width}&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#\{battery_hbar\}%#(nice cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _hbar &amp;#39;$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_battery_hbar_palette&amp;#34; | tr &amp;#39;,&amp;#39; &amp;#39;;&amp;#39;)&amp;#39; &amp;#39;#{@battery_charge}&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#\{battery_vbar\}%#(nice cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _vbar &amp;#39;$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_battery_vbar_palette&amp;#34; | tr &amp;#39;,&amp;#39; &amp;#39;;&amp;#39;)&amp;#39; &amp;#39;#{@battery_charge}&amp;#39;)%g&amp;#34; \
# -e &amp;#39;s%#\{(\?)?battery_status%#\{\1@battery_status%g&amp;#39; \
# -e &amp;#39;s%#\{(\?)?battery_percentage%#\{\1@battery_percentage%g&amp;#39;)
# status_right=$(echo &amp;#34;$status_right&amp;#34; | sed -E \
# -e &amp;#39;s%#\{\?battery_bar%#\{?@battery_percentage%g&amp;#39; \
# -e &amp;#39;s%#\{\?battery_hbar%#\{?@battery_percentage%g&amp;#39; \
# -e &amp;#39;s%#\{\?battery_vbar%#\{?@battery_percentage%g&amp;#39; \
# -e &amp;#34;s%#\{battery_bar\}%#(nice cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _bar &amp;#39;$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_battery_bar_palette&amp;#34; | tr &amp;#39;,&amp;#39; &amp;#39;;&amp;#39;)&amp;#39; &amp;#39;$tmux_conf_battery_bar_symbol_empty&amp;#39; &amp;#39;$tmux_conf_battery_bar_symbol_full&amp;#39; &amp;#39;$tmux_conf_battery_bar_length&amp;#39; &amp;#39;#{@battery_charge}&amp;#39; &amp;#39;#{client_width}&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#\{battery_hbar\}%#(nice cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _hbar &amp;#39;$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_battery_hbar_palette&amp;#34; | tr &amp;#39;,&amp;#39; &amp;#39;;&amp;#39;)&amp;#39; &amp;#39;#{@battery_charge}&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#\{battery_vbar\}%#(nice cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _vbar &amp;#39;$(printf &amp;#39;%s&amp;#39; &amp;#34;$tmux_conf_battery_vbar_palette&amp;#34; | tr &amp;#39;,&amp;#39; &amp;#39;;&amp;#39;)&amp;#39; &amp;#39;#{@battery_charge}&amp;#39;)%g&amp;#34; \
# -e &amp;#39;s%#\{(\?)?battery_status%#\{\1@battery_status%g&amp;#39; \
# -e &amp;#39;s%#\{(\?)?battery_percentage%#\{\1@battery_percentage%g&amp;#39;)
# status_right=&amp;#34;#(echo; nice cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _battery_status &amp;#39;$tmux_conf_battery_status_charging&amp;#39; &amp;#39;$tmux_conf_battery_status_discharging&amp;#39;)$status_right&amp;#34;
# interval=60
# if [ &amp;#34;$_tmux_version&amp;#34; -ge 320 ]; then
# tmux run -b &amp;#34;trap &amp;#39;[ -n \&amp;#34;\$sleep_pid\&amp;#34; ] &amp;amp;&amp;amp; kill -9 \&amp;#34;\$sleep_pid\&amp;#34;; exit 0&amp;#39; TERM; while [ x\&amp;#34;\$(&amp;#39;$TMUX_PROGRAM&amp;#39; -S &amp;#39;#{socket_path}&amp;#39; display -p &amp;#39;#{l:#{pid}}&amp;#39;)\&amp;#34; = x\&amp;#34;#{pid}\&amp;#34; ]; do nice cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _battery_info; sleep $interval &amp;amp; sleep_pid=\$!; wait \&amp;#34;\$sleep_pid\&amp;#34;; sleep_pid=; done&amp;#34;
# elif [ &amp;#34;$_tmux_version&amp;#34; -ge 280 ]; then
# status_right=&amp;#34;#(echo; while [ x\&amp;#34;\$(&amp;#39;$TMUX_PROGRAM&amp;#39; -S &amp;#39;#{socket_path}&amp;#39; display -p &amp;#39;#{l:#{pid}}&amp;#39;)\&amp;#34; = x\&amp;#34;#{pid}\&amp;#34; ]; do nice cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _battery_info; sleep $interval; done)$status_right&amp;#34;
# elif [ &amp;#34;$_tmux_version&amp;#34; -gt 240 ]; then
# status_right=&amp;#34;#(echo; while :; do nice cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _battery_info; sleep $interval; done)$status_right&amp;#34;
# else
# status_right=&amp;#34;#(nice cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _battery_info)$status_right&amp;#34;
# fi
# ;;
# esac
# fi
#
# case &amp;#34;$status_left $status_right&amp;#34; in
# *&amp;#39;#{username}&amp;#39;*|*&amp;#39;#{hostname}&amp;#39;*|*&amp;#39;#{hostname_full}&amp;#39;*|*&amp;#39;#{username_ssh}&amp;#39;*|*&amp;#39;#{hostname_ssh}&amp;#39;*|*&amp;#39;#{hostname_full_ssh}&amp;#39;*)
# status_left=$(echo &amp;#34;$status_left&amp;#34; | sed \
# -e &amp;#34;s%#{username}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _username &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; false &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{hostname}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _hostname &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; false false &amp;#39;#h&amp;#39; &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{hostname_full}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _hostname &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; false true &amp;#39;#H&amp;#39; &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{username_ssh}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _username &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; true &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{hostname_ssh}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _hostname &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; true false &amp;#39;#h&amp;#39; &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{hostname_full_ssh}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _hostname &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; true true &amp;#39;#H&amp;#39; &amp;#39;#D&amp;#39;)%g&amp;#34;)
# status_right=$(echo &amp;#34;$status_right&amp;#34; | sed \
# -e &amp;#34;s%#{username}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _username &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; false &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{hostname}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _hostname &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; false false &amp;#39;#h&amp;#39; &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{hostname_full}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _hostname &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; false true &amp;#39;#H&amp;#39; &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{username_ssh}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _username &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; true &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{hostname_ssh}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _hostname &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; true false &amp;#39;#h&amp;#39; &amp;#39;#D&amp;#39;)%g&amp;#34; \
# -e &amp;#34;s%#{hostname_full_ssh}%#(cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _hostname &amp;#39;#{pane_pid}&amp;#39; &amp;#39;#{b:pane_tty}&amp;#39; true true &amp;#39;#H&amp;#39; &amp;#39;#D&amp;#39;)%g&amp;#34;)
# ;;
# esac
#
# _pkillf &amp;#34;cut -c3- &amp;#39;$TMUX_CONF&amp;#39; \| sh -s _uptime&amp;#34;
# case &amp;#34;$status_left $status_right&amp;#34; in
# *&amp;#39;#{uptime_&amp;#39;*|*&amp;#39;#{?uptime_&amp;#39;*)
# status_left=$(echo &amp;#34;$status_left&amp;#34; | perl -p -e &amp;#39;
# ; s/#\{(\?)?uptime_y\b/#\{\1\@uptime_y/g
# ; s/#\{(\?)?uptime_d\b/#\{\1\@uptime_d/g
# ; s/\@uptime_d\b/\@uptime_dy/g if /\@uptime_y\b/
# ; s/#\{(\?)?uptime_h\b/#\{\1\@uptime_h/g
# ; s/#\{(\?)?uptime_m\b/#\{\1\@uptime_m/g
# ; s/#\{(\?)?uptime_s\b/#\{\1\@uptime_s/g&amp;#39;)
# status_right=$(echo &amp;#34;$status_right&amp;#34; | perl -p -e &amp;#39;
# ; s/#\{(\?)?uptime_y\b/#\{\1\@uptime_y/g
# ; s/#\{(\?)?uptime_d\b/#\{\1\@uptime_d/g
# ; s/\@uptime_d\b/\@uptime_dy/g if /\@uptime_y\b/
# ; s/#\{(\?)?uptime_h\b/#\{\1\@uptime_h/g
# ; s/#\{(\?)?uptime_m\b/#\{\1\@uptime_m/g
# ; s/#\{(\?)?uptime_s\b/#\{\1\@uptime_s/g&amp;#39;)
# interval=60
# case &amp;#34;$status_left $status_right&amp;#34; in
# *&amp;#39;#{@uptime_s}&amp;#39;*)
# interval=$(tmux show -gv status-interval)
# ;;
# esac
# if [ &amp;#34;$_tmux_version&amp;#34; -ge 320 ]; then
# tmux run -b &amp;#34;trap &amp;#39;[ -n \&amp;#34;\$sleep_pid\&amp;#34; ] &amp;amp;&amp;amp; kill -9 \&amp;#34;\$sleep_pid\&amp;#34;; exit 0&amp;#39; TERM; while [ x\&amp;#34;\$(&amp;#39;$TMUX_PROGRAM&amp;#39; -S &amp;#39;#{socket_path}&amp;#39; display -p &amp;#39;#{l:#{pid}}&amp;#39;)\&amp;#34; = x\&amp;#34;#{pid}\&amp;#34; ]; do nice cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _uptime; sleep $interval &amp;amp; sleep_pid=\$!; wait \&amp;#34;\$sleep_pid\&amp;#34;; sleep_pid=; done&amp;#34;
# elif [ &amp;#34;$_tmux_version&amp;#34; -ge 280 ]; then
# status_right=&amp;#34;#(echo; while [ x\&amp;#34;\$(&amp;#39;$TMUX_PROGRAM&amp;#39; -S &amp;#39;#{socket_path}&amp;#39; display -p &amp;#39;#{l:#{pid}}&amp;#39;)\&amp;#34; = x\&amp;#34;#{pid}\&amp;#34; ]; do nice cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _uptime; sleep $interval; done)$status_right&amp;#34;
# elif [ &amp;#34;$_tmux_version&amp;#34; -gt 240 ]; then
# status_right=&amp;#34;#(echo; while :; do nice cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _uptime; sleep $interval; done)$status_right&amp;#34;
# else
# status_right=&amp;#34;#(nice cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _uptime)$status_right&amp;#34;
# fi
# ;;
# esac
#
# _pkillf &amp;#34;cut -c3- &amp;#39;$TMUX_CONF&amp;#39; \| sh -s _loadavg&amp;#34;
# case &amp;#34;$status_left $status_right&amp;#34; in
# *&amp;#39;#{loadavg&amp;#39;*|*&amp;#39;#{?loadavg&amp;#39;*)
# status_left=$(echo &amp;#34;$status_left&amp;#34; | sed -E \
# -e &amp;#39;s/#\{(\?)?loadavg/#\{\1@loadavg/g&amp;#39;)
# status_right=$(echo &amp;#34;$status_right&amp;#34; | sed -E \
# -e &amp;#39;s/#\{(\?)?loadavg/#\{\1@loadavg/g&amp;#39;)
# interval=$(tmux show -gv status-interval)
# if [ &amp;#34;$_tmux_version&amp;#34; -ge 320 ]; then
# tmux run -b &amp;#34;trap &amp;#39;[ -n \&amp;#34;\$sleep_pid\&amp;#34; ] &amp;amp;&amp;amp; kill -9 \&amp;#34;\$sleep_pid\&amp;#34;; exit 0&amp;#39; TERM; while [ x\&amp;#34;\$(&amp;#39;$TMUX_PROGRAM&amp;#39; -S &amp;#39;#{socket_path}&amp;#39; display -p &amp;#39;#{l:#{pid}}&amp;#39;)\&amp;#34; = x\&amp;#34;#{pid}\&amp;#34; ]; do nice cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _loadavg; sleep $interval &amp;amp; sleep_pid=\$!; wait \&amp;#34;\$sleep_pid\&amp;#34;; sleep_pid=; done&amp;#34;
# elif [ &amp;#34;$_tmux_version&amp;#34; -ge 280 ]; then
# status_right=&amp;#34;#(echo; while [ x\&amp;#34;\$(&amp;#39;$TMUX_PROGRAM&amp;#39; -S &amp;#39;#{socket_path}&amp;#39; display -p &amp;#39;#{l:#{pid}}&amp;#39;)\&amp;#34; = x\&amp;#34;#{pid}\&amp;#34; ]; do nice cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _loadavg; sleep $interval; done)$status_right&amp;#34;
# elif [ &amp;#34;$_tmux_version&amp;#34; -gt 240 ]; then
# status_right=&amp;#34;#(echo; while :; do nice cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _loadavg; sleep $interval; done)$status_right&amp;#34;
# else
# status_right=&amp;#34;#(nice cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s _loadavg)$status_right&amp;#34;
# fi
# ;;
# esac
#
# # -- custom variables ------------------------------------------------------
#
# if [ -f &amp;#34;$TMUX_CONF_LOCAL&amp;#34; ] &amp;amp;&amp;amp; [ &amp;#34;$(cut -c3- &amp;#34;$TMUX_CONF_LOCAL&amp;#34; | sh 2&amp;gt;/dev/null -s printf probe)&amp;#34; = &amp;#34;probe&amp;#34; ]; then
# replacements=$(perl -n -e &amp;#39;print if s!^#\s+([^_][^()\s]+)\s*\(\)\s*{\s*(?:#.*)?\n!s%#\\\{\1((?:\\s+(?:[^\{\}]+?|#\\{(?:[^\{\}]+?)\}))*)\\\}%#(cut -c3- \&amp;#34;\\\$TMUX_CONF_LOCAL\&amp;#34; | sh -s \1\\1)%g; !p&amp;#39; &amp;#34;$TMUX_CONF_LOCAL&amp;#34;)
# status_left=$(echo &amp;#34;$status_left&amp;#34; | perl -p -e &amp;#34;$replacements&amp;#34; || echo &amp;#34;$status_left&amp;#34;)
# status_right=$(echo &amp;#34;$status_right&amp;#34; | perl -p -e &amp;#34;$replacements&amp;#34; || echo &amp;#34;$status_right&amp;#34;)
# fi
#
# # --------------------------------------------------------------------------
#
# tmux set -g set-titles-string &amp;#34;$(_decode_unicode_escapes &amp;#34;$set_titles_string&amp;#34;)&amp;#34; \;\
# setw -g window-status-format &amp;#34;$(_decode_unicode_escapes &amp;#34;$window_status_format&amp;#34;)&amp;#34; \;\
# setw -g window-status-current-format &amp;#34;$(_decode_unicode_escapes &amp;#34;$window_status_current_format&amp;#34;)&amp;#34; \;\
# set -g status-left-length 1000 \; set -g status-left &amp;#34;$(_decode_unicode_escapes &amp;#34;$status_left&amp;#34;)&amp;#34; \;\
# set -g status-right-length 1000 \; set -g status-right &amp;#34;$(_decode_unicode_escapes &amp;#34;$status_right&amp;#34;)&amp;#34;
# }
#
# __apply_plugins() {
# TMUX_PLUGIN_MANAGER_PATH=&amp;#34;$1&amp;#34;
# window_active=&amp;#34;$2&amp;#34;
# tmux_conf_update_plugins_on_launch=&amp;#34;$3&amp;#34;
# tmux_conf_update_plugins_on_reload=&amp;#34;$4&amp;#34;
# tmux_conf_uninstall_plugins_on_reload=&amp;#34;$5&amp;#34;
#
# if [ -z &amp;#34;$TMUX_PLUGIN_MANAGER_PATH&amp;#34; ]; then
# return 255
# fi
# mkdir -p &amp;#34;$TMUX_PLUGIN_MANAGER_PATH&amp;#34;
#
# tpm_plugins=$(tmux show -gvq &amp;#39;@tpm_plugins&amp;#39; 2&amp;gt;/dev/null)
# if [ -z &amp;#34;$(tmux show -gv &amp;#39;@plugin&amp;#39; 2&amp;gt;/dev/null)&amp;#34; ] &amp;amp;&amp;amp; [ -z &amp;#34;$tpm_plugins&amp;#34; ]; then
# if _is_true &amp;#34;$tmux_conf_uninstall_plugins_on_reload&amp;#34; &amp;amp;&amp;amp; [ -d &amp;#34;$TMUX_PLUGIN_MANAGER_PATH/tpm&amp;#34; ]; then
# tmux display &amp;#39;Uninstalling tpm and plugins...&amp;#39;
# tmux set-environment -gu TMUX_PLUGIN_MANAGER_PATH
# rm -rf &amp;#34;$TMUX_PLUGIN_MANAGER_PATH&amp;#34;
# tmux display &amp;#39;Done uninstalling tpm and plugins...&amp;#39;
# fi
# else
# if [ &amp;#34;$(command tmux display -p &amp;#39;#{pid} #{version} #{socket_path}&amp;#39;)&amp;#34; = &amp;#34;$($TMUX_PROGRAM display -p &amp;#39;#{pid} #{version} #{socket_path}&amp;#39;)&amp;#34; ]; then
# tpm_plugins=$(cat &amp;lt;&amp;lt; EOF | tr &amp;#39; &amp;#39; &amp;#39;\n&amp;#39; | awk &amp;#39;/^\s*$/ {next;}; !seen[$0]++ { gsub(/^[ \t]+/,&amp;#34;&amp;#34;,$0); gsub(/[ \t]+$/,&amp;#34;&amp;#34;,$0); print $0 }&amp;#39;
# $tpm_plugins
# $(awk &amp;#39;/^[ \t]*set(-option)?.*[ \t]@plugin[ \t]/ { gsub(/&amp;#39;\&amp;#39;&amp;#39;/, &amp;#34;&amp;#34;); gsub(/&amp;#39;\&amp;#34;&amp;#39;/, &amp;#34;&amp;#34;); print $NF }&amp;#39; &amp;#34;$TMUX_CONF_LOCAL&amp;#34; 2&amp;gt;/dev/null)
# EOF
# )
# tmux set-environment -g TMUX_PLUGIN_MANAGER_PATH &amp;#34;$TMUX_PLUGIN_MANAGER_PATH&amp;#34;
# tmux set -g &amp;#39;@tpm_plugins&amp;#39; &amp;#34;$tpm_plugins&amp;#34;
#
# if [ -d &amp;#34;$TMUX_PLUGIN_MANAGER_PATH/tpm&amp;#34; ]; then
# [ -z &amp;#34;$(tmux show -gqv &amp;#39;@tpm-install&amp;#39;)&amp;#34; ] &amp;amp;&amp;amp; tmux set -g &amp;#39;@tpm-install&amp;#39; &amp;#39;I&amp;#39;
# [ -z &amp;#34;$(tmux show -gqv &amp;#39;@tpm-update&amp;#39;)&amp;#34; ] &amp;amp;&amp;amp; tmux set -g &amp;#39;@tpm-update&amp;#39; &amp;#39;u&amp;#39;
# [ -z &amp;#34;$(tmux show -gqv &amp;#39;@tpm-clean&amp;#39;)&amp;#34; ] &amp;amp;&amp;amp; tmux set -g &amp;#39;@tpm-clean&amp;#39; &amp;#39;M-u&amp;#39;
# &amp;#34;$TMUX_PLUGIN_MANAGER_PATH/tpm/tpm&amp;#34; || tmux display &amp;#34;One or more tpm plugin(s) failed&amp;#34;
# fi
#
# if git ls-remote -hq https://github.com/gpakosz/.tmux.git master &amp;gt; /dev/null; then
# if [ ! -d &amp;#34;$TMUX_PLUGIN_MANAGER_PATH/tpm&amp;#34; ]; then
# install_tpm=true
# tmux display &amp;#39;Installing tpm and plugins...&amp;#39;
# git clone --depth 1 https://github.com/tmux-plugins/tpm &amp;#34;$TMUX_PLUGIN_MANAGER_PATH/tpm&amp;#34;
# elif { [ -z &amp;#34;$window_active&amp;#34; ] &amp;amp;&amp;amp; _is_true &amp;#34;$tmux_conf_update_plugins_on_launch&amp;#34;; } || { [ -n &amp;#34;$window_active&amp;#34; ] &amp;amp;&amp;amp; _is_true &amp;#34;$tmux_conf_update_plugins_on_reload&amp;#34;; }; then
# update_tpm=true
# tmux display &amp;#39;Updating tpm and plugins...&amp;#39;
# (cd &amp;#34;$TMUX_PLUGIN_MANAGER_PATH/tpm&amp;#34; &amp;amp;&amp;amp; git fetch -q -p &amp;amp;&amp;amp; git checkout -q master &amp;amp;&amp;amp; git reset -q --hard origin/master)
# fi
# if [ &amp;#34;$install_tpm&amp;#34; = &amp;#34;true&amp;#34; ] || [ &amp;#34;$update_tpm&amp;#34; = &amp;#34;true&amp;#34; ]; then
# perl -0777 -p -i -e &amp;#39;s/git clone(?!\s+--depth\s+1)/git clone --depth 1/g
# ;s/(install_plugin(.(?!&amp;amp;))*)\n(\s+)done/\1&amp;amp;\n\3done\n\3wait/g&amp;#39; &amp;#34;$TMUX_PLUGIN_MANAGER_PATH/tpm/scripts/install_plugins.sh&amp;#34;
# perl -p -i -e &amp;#39;s/git submodule update --init --recursive(?!\s+--depth\s+1)/git submodule update --init --recursive --depth 1/g&amp;#39; &amp;#34;$TMUX_PLUGIN_MANAGER_PATH/tpm/scripts/update_plugin.sh&amp;#34;
# perl -p -i -e &amp;#39;s,\$tmux_file\s+&amp;gt;/dev/null\s+2&amp;gt;\&amp;amp;1,$&amp;amp; || { tmux display &amp;#34;Plugin \$(basename \${plugin_path}) failed&amp;#34; &amp;amp;&amp;amp; false; },&amp;#39; &amp;#34;$TMUX_PLUGIN_MANAGER_PATH/tpm/scripts/source_plugins.sh&amp;#34;
# fi
# if [ &amp;#34;$update_tpm&amp;#34; = &amp;#34;true&amp;#34; ]; then
# {
# {
# printf &amp;#39;List of discovered tpm plugins: %s\n&amp;#39; &amp;#34;$(printf &amp;#39;%s\n&amp;#39; &amp;#34;$tpm_plugins&amp;#34; | paste -s -d &amp;#39; &amp;#39; -)&amp;#34; | perl -MPOSIX=strftime -MTime::HiRes=gettimeofday -pe &amp;#39;my ($s, $us) = gettimeofday(); printf (&amp;#34;[%s.%03d]\t &amp;#34;, strftime(&amp;#34;%Y-%m-%d %H:%M:%S&amp;#34;, localtime $s), $us / 1000)&amp;#39;
# printf &amp;#39;%s\n&amp;#39; &amp;#34;Invoking $TMUX_PLUGIN_MANAGER_PATH/tpm/bin/install_plugins&amp;#34; | perl -MPOSIX=strftime -MTime::HiRes=gettimeofday -pe &amp;#39;my ($s, $us) = gettimeofday(); printf (&amp;#34;[%s.%03d]\t &amp;#34;, strftime(&amp;#34;%Y-%m-%d %H:%M:%S&amp;#34;, localtime $s), $us / 1000)&amp;#39;
# &amp;#34;$TMUX_PLUGIN_MANAGER_PATH/tpm/bin/install_plugins&amp;#34; 2&amp;gt;&amp;amp;1 | perl -MPOSIX=strftime -MTime::HiRes=gettimeofday -pe &amp;#39;my ($s, $us) = gettimeofday(); printf (&amp;#34;[%s.%03d]\t &amp;#34;, strftime(&amp;#34;%Y-%m-%d %H:%M:%S&amp;#34;, localtime $s), $us / 1000)&amp;#39;
# printf &amp;#39;%s\n&amp;#39; &amp;#34;Invoking $TMUX_PLUGIN_MANAGER_PATH/tpm/bin/update_plugins all&amp;#34; | perl -MPOSIX=strftime -MTime::HiRes=gettimeofday -pe &amp;#39;my ($s, $us) = gettimeofday(); printf (&amp;#34;[%s.%03d]\t &amp;#34;, strftime(&amp;#34;%Y-%m-%d %H:%M:%S&amp;#34;, localtime $s), $us / 1000)&amp;#39;
# &amp;#34;$TMUX_PLUGIN_MANAGER_PATH/tpm/bin/update_plugins&amp;#34; all 2&amp;gt;&amp;amp;1 | perl -MPOSIX=strftime -MTime::HiRes=gettimeofday -pe &amp;#39;my ($s, $us) = gettimeofday(); printf (&amp;#34;[%s.%03d]\t &amp;#34;, strftime(&amp;#34;%Y-%m-%d %H:%M:%S&amp;#34;, localtime $s), $us / 1000)&amp;#39;
# printf &amp;#39;%s\n&amp;#39; &amp;#34;Invoking $TMUX_PLUGIN_MANAGER_PATH/tpm/bin/clean_plugins all&amp;#34; | perl -MPOSIX=strftime -MTime::HiRes=gettimeofday -pe &amp;#39;my ($s, $us) = gettimeofday(); printf (&amp;#34;[%s.%03d]\t &amp;#34;, strftime(&amp;#34;%Y-%m-%d %H:%M:%S&amp;#34;, localtime $s), $us / 1000)&amp;#39;
# &amp;#34;$TMUX_PLUGIN_MANAGER_PATH/tpm/bin/clean_plugins&amp;#34; all 2&amp;gt;&amp;amp;1 | perl -MPOSIX=strftime -MTime::HiRes=gettimeofday -pe &amp;#39;my ($s, $us) = gettimeofday(); printf (&amp;#34;[%s.%03d]\t &amp;#34;, strftime(&amp;#34;%Y-%m-%d %H:%M:%S&amp;#34;, localtime $s), $us / 1000)&amp;#39;
# printf &amp;#39;Done.\n&amp;#39; | perl -MPOSIX=strftime -MTime::HiRes=gettimeofday -pe &amp;#39;my ($s, $us) = gettimeofday(); printf (&amp;#34;[%s.%03d]\t &amp;#34;, strftime(&amp;#34;%Y-%m-%d %H:%M:%S&amp;#34;, localtime $s), $us / 1000)&amp;#39;
# printf &amp;#39;\n&amp;#39;
# } &amp;gt;&amp;gt; &amp;#34;$TMUX_PLUGIN_MANAGER_PATH/tpm_log.txt&amp;#34;
#
# tmux display &amp;#39;Done updating tpm and plugins...&amp;#39;
# } || tmux display &amp;#39;Failed updating tpm and plugins...&amp;#39;
# elif [ &amp;#34;$install_tpm&amp;#34; = &amp;#34;true&amp;#34; ]; then
# {
# {
# printf &amp;#39;List of discovered tpm plugins: %s\n&amp;#39; &amp;#34;$(printf &amp;#39;%s\n&amp;#39; &amp;#34;$tpm_plugins&amp;#34; | paste -s -d &amp;#39; &amp;#39; -)&amp;#34; | perl -MPOSIX=strftime -MTime::HiRes=gettimeofday -pe &amp;#39;my ($s, $us) = gettimeofday(); printf (&amp;#34;[%s.%03d]\t &amp;#34;, strftime(&amp;#34;%Y-%m-%d %H:%M:%S&amp;#34;, localtime $s), $us / 1000)&amp;#39;
# printf &amp;#39;%s\n&amp;#39; &amp;#34;Invoking $TMUX_PLUGIN_MANAGER_PATH/tpm/bin/install_plugins&amp;#34; | perl -MPOSIX=strftime -MTime::HiRes=gettimeofday -pe &amp;#39;my ($s, $us) = gettimeofday(); printf (&amp;#34;[%s.%03d]\t &amp;#34;, strftime(&amp;#34;%Y-%m-%d %H:%M:%S&amp;#34;, localtime $s), $us / 1000)&amp;#39;
# &amp;#34;$TMUX_PLUGIN_MANAGER_PATH/tpm/bin/install_plugins&amp;#34; 2&amp;gt;&amp;amp;1 | perl -MPOSIX=strftime -MTime::HiRes=gettimeofday -pe &amp;#39;my ($s, $us) = gettimeofday(); printf (&amp;#34;[%s.%03d]\t &amp;#34;, strftime(&amp;#34;%Y-%m-%d %H:%M:%S&amp;#34;, localtime $s), $us / 1000)&amp;#39;
# printf &amp;#39;Done.\n&amp;#39; | perl -MPOSIX=strftime -MTime::HiRes=gettimeofday -pe &amp;#39;my ($s, $us) = gettimeofday(); printf (&amp;#34;[%s.%03d]\t &amp;#34;, strftime(&amp;#34;%Y-%m-%d %H:%M:%S&amp;#34;, localtime $s), $us / 1000)&amp;#39;
# printf &amp;#39;\n&amp;#39; &amp;gt;&amp;gt; &amp;#34;$TMUX_PLUGIN_MANAGER_PATH/tpm_log.txt&amp;#34;
# } &amp;gt;&amp;gt; &amp;#34;$TMUX_PLUGIN_MANAGER_PATH/tpm_log.txt&amp;#34;
#
# tmux display &amp;#39;Done installing tpm and plugins...&amp;#39;
#
# [ -z &amp;#34;$(tmux show -gqv &amp;#39;@tpm-install&amp;#39;)&amp;#34; ] &amp;amp;&amp;amp; tmux set -g &amp;#39;@tpm-install&amp;#39; &amp;#39;I&amp;#39;
# [ -z &amp;#34;$(tmux show -gqv &amp;#39;@tpm-update&amp;#39;)&amp;#34; ] &amp;amp;&amp;amp; tmux set -g &amp;#39;@tpm-update&amp;#39; &amp;#39;u&amp;#39;
# [ -z &amp;#34;$(tmux show -gqv &amp;#39;@tpm-clean&amp;#39;)&amp;#34; ] &amp;amp;&amp;amp; tmux set -g &amp;#39;@tpm-clean&amp;#39; &amp;#39;M-u&amp;#39;
# &amp;#34;$TMUX_PLUGIN_MANAGER_PATH/tpm/tpm&amp;#34; || tmux display &amp;#34;One or more tpm plugin(s) failed&amp;#34;
# } || tmux display &amp;#39;Failed installing tpm and plugins...&amp;#39;
# fi
# else
# tmux display &amp;#34;GitHub doesn&amp;#39;t seem to be reachable, skipping installing and/or updating tpm and plugins...&amp;#34;
# fi
# else
# tmux run -b &amp;#34;sleep \$((#{display-time} / 1000)) &amp;amp;&amp;amp; &amp;#39;$TMUX_PROGRAM&amp;#39; set display-time 3000 \; display &amp;#39;Cannot use tpm which assumes a globally installed tmux&amp;#39; \; set -u display-time&amp;#34;
# fi
#
# if [ &amp;#34;$_tmux_version&amp;#34; -gt 260 ]; then
# tmux set -gu &amp;#39;@tpm-install&amp;#39; \; set -gu &amp;#39;@tpm-update&amp;#39; \; set -gu &amp;#39;@tpm-clean&amp;#39; \; set -gu &amp;#39;@plugin&amp;#39; \; set -gu &amp;#39;@tpm_plugins&amp;#39;
# else
# tmux set -g &amp;#39;@tpm-install&amp;#39; &amp;#39;&amp;#39; \; set -g &amp;#39;@tpm-update&amp;#39; &amp;#39;&amp;#39; \; set -g &amp;#39;@tpm-clean&amp;#39; &amp;#39;&amp;#39; \; set -g &amp;#39;@plugin&amp;#39; &amp;#39;&amp;#39; \; set-gu &amp;#39;@tpm_plugins&amp;#39; &amp;#39;&amp;#39;
# fi
# fi
# }
#
# _apply_plugins() {
# tmux_conf_update_plugins_on_launch=${tmux_conf_update_plugins_on_launch:-true}
# tmux_conf_update_plugins_on_reload=${tmux_conf_update_plugins_on_reload:-true}
# tmux_conf_uninstall_plugins_on_reload=${tmux_conf_uninstall_plugins_on_reload:-true}
#
# if [ -z &amp;#34;$TMUX_PLUGIN_MANAGER_PATH&amp;#34; ]; then
# if [ &amp;#34;$(dirname &amp;#34;$TMUX_CONF&amp;#34;)&amp;#34; = &amp;#34;$HOME&amp;#34; ]; then
# TMUX_PLUGIN_MANAGER_PATH=&amp;#34;$HOME/.tmux/plugins&amp;#34;
# else
# TMUX_PLUGIN_MANAGER_PATH=&amp;#34;$(dirname &amp;#34;$TMUX_CONF&amp;#34;)/plugins&amp;#34;
# fi
# fi
# tmux run -b &amp;#34;cut -c3- &amp;#39;$TMUX_CONF&amp;#39; | sh -s __apply_plugins &amp;#39;$TMUX_PLUGIN_MANAGER_PATH&amp;#39; &amp;#39;$window_active&amp;#39; &amp;#39;$tmux_conf_update_plugins_on_launch&amp;#39; &amp;#39;$tmux_conf_update_plugins_on_reload&amp;#39; &amp;#39;$tmux_conf_uninstall_plugins_on_reload&amp;#39;&amp;#34;
# }
#
# _apply_important() {
# cfg=$(mktemp) &amp;amp;&amp;amp; trap &amp;#39;rm -f $cfg*&amp;#39; EXIT
#
# if perl -n -e &amp;#39;print if /^\s*(?:set|bind|unbind).+?#!important\s*$/&amp;#39; &amp;#34;$TMUX_CONF_LOCAL&amp;#34; 2&amp;gt;/dev/null &amp;gt; &amp;#34;$cfg.local&amp;#34;; then
# if ! tmux source-file &amp;#34;$cfg.local&amp;#34;; then
# if tmux source-file -v /dev/null 2&amp;gt; /dev/null; then
# verbose_flag=&amp;#39;-v&amp;#39;
# fi
# while ! out=$(tmux source-file &amp;#34;${verbose_flag:+$verbose_flag}&amp;#34; &amp;#34;$cfg.local&amp;#34;); do
# line=$(printf &amp;#34;%s&amp;#34; &amp;#34;$out&amp;#34; | tail -1 | cut -d&amp;#39;:&amp;#39; -f2)
# perl -n -i -e &amp;#34;if ($. != $line) { print }&amp;#34; &amp;#34;$cfg.local&amp;#34;
# done
# fi
# fi
# }
#
# _apply_configuration() {
# window_active=&amp;#34;$(tmux display -p &amp;#39;#{window_active}&amp;#39; 2&amp;gt;/dev/null || true)&amp;#34;
# if [ -z &amp;#34;$window_active&amp;#34; ]; then
# if ! command -v perl &amp;gt; /dev/null 2&amp;gt;&amp;amp;1; then
# tmux run -b &amp;#39;tmux set display-time 3000 \; display &amp;#34;This configuration requires perl&amp;#34; \; set -u display-time \; run &amp;#34;sleep 3&amp;#34; \; kill-server&amp;#39;
# return
# fi
# if ! perl -MTime::HiRes -e1 &amp;gt; /dev/null 2&amp;gt;&amp;amp;1; then
# tmux run -b &amp;#39;tmux set display-time 3000 \; display &amp;#34;This configuration requires perl Time::HiRes&amp;#34; \; set -u display-time \; run &amp;#34;sleep 3&amp;#34; \; kill-server&amp;#39;
# return
# fi
# if ! command -v sed &amp;gt; /dev/null 2&amp;gt;&amp;amp;1; then
# tmux run -b &amp;#39;tmux set display-time 3000 \; display &amp;#34;This configuration requires sed&amp;#34; \; set -u display-time \; run &amp;#34;sleep 3&amp;#34; \; kill-server&amp;#39;
# return
# fi
# if ! command -v awk &amp;gt; /dev/null 2&amp;gt;&amp;amp;1; then
# tmux run -b &amp;#39;tmux set display-time 3000 \; display &amp;#34;This configuration requires awk&amp;#34; \; set -u display-time \; run &amp;#34;sleep 3&amp;#34; \; kill-server&amp;#39;
# return
# fi
# if [ &amp;#34;$_tmux_version&amp;#34; -lt 260 ]; then
# tmux run -b &amp;#39;tmux set display-time 3000 \; display &amp;#34;This configuration requires tmux 2.6+&amp;#34; \; set -u display-time \; run &amp;#34;sleep 3&amp;#34; \; kill-server&amp;#39;
# return
# fi
# fi
#
# case &amp;#34;$_uname_s&amp;#34; in
# *CYGWIN*|*MSYS*)
# # prevent Cygwin and MSYS2 from cd-ing into home directory when evaluating /etc/profile
# tmux setenv -g CHERE_INVOKING 1
# ;;
# esac
#
# _apply_tmux_256color
# _apply_24b&amp;amp;
# _apply_theme&amp;amp;
# _apply_bindings&amp;amp;
# wait
#
# _apply_plugins
# _apply_important
#
# # shellcheck disable=SC2046
# tmux setenv -gu tmux_conf_dummy $(printenv | grep -E -o &amp;#39;^tmux_conf_[^=]+&amp;#39; | awk &amp;#39;{printf &amp;#34;; setenv -gu %s&amp;#34;, $0}&amp;#39;)
# }
#
# _urlview() {
# pane_id=&amp;#34;$1&amp;#34;; shift
# tmux capture-pane -J -S - -E - -b &amp;#34;urlview-$pane_id&amp;#34; -t &amp;#34;$pane_id&amp;#34;
# tmux split-window &amp;#34;&amp;#39;$TMUX_PROGRAM&amp;#39; ${TMUX_SOCKET:+-S &amp;#34;$TMUX_SOCKET&amp;#34;} show-buffer -b &amp;#39;urlview-$pane_id&amp;#39; | urlview || true; &amp;#39;$TMUX_PROGRAM&amp;#39; ${TMUX_SOCKET:+-S &amp;#34;$TMUX_SOCKET&amp;#34;} delete-buffer -b &amp;#39;urlview-$pane_id&amp;#39;&amp;#34;
# }
#
# _urlscan() {
# pane_id=&amp;#34;$1&amp;#34;; shift
# tmux capture-pane -J -S - -E - -b &amp;#34;urlscan-$pane_id&amp;#34; -t &amp;#34;$pane_id&amp;#34;
# tmux split-window &amp;#34;&amp;#39;$TMUX_PROGRAM&amp;#39; ${TMUX_SOCKET:+-S &amp;#34;$TMUX_SOCKET&amp;#34;} show-buffer -b &amp;#39;urlscan-$pane_id&amp;#39; | urlscan $* || true; &amp;#39;$TMUX_PROGRAM&amp;#39; ${TMUX_SOCKET:+-S &amp;#34;$TMUX_SOCKET&amp;#34;} delete-buffer -b &amp;#39;urlscan-$pane_id&amp;#39;&amp;#34;
# }
#
# _fpp() {
# tmux capture-pane -J -S - -E - -b &amp;#34;fpp-$1&amp;#34; -t &amp;#34;$1&amp;#34;
# tmux split-window -c &amp;#34;$2&amp;#34; &amp;#34;&amp;#39;$TMUX_PROGRAM&amp;#39; ${TMUX_SOCKET:+-S &amp;#34;$TMUX_SOCKET&amp;#34;} show-buffer -b &amp;#39;fpp-$1&amp;#39; | fpp || true; &amp;#39;$TMUX_PROGRAM&amp;#39; ${TMUX_SOCKET:+-S &amp;#34;$TMUX_SOCKET&amp;#34;} delete-buffer -b &amp;#39;fpp-$1&amp;#39;&amp;#34;
# }
#
# &amp;#34;$@&amp;#34;
&lt;/code>&lt;/pre></description></item><item><title>Rsyslog 问题记录</title><link>https://caisong.github.io/posts/rsyslog%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/</link><pubDate>Tue, 24 Dec 2024 21:42:22 +0800</pubDate><guid>https://caisong.github.io/posts/rsyslog%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/</guid><description>&lt;p>Cut out summary from your post content here.&lt;/p></description></item><item><title>容器webdav</title><link>https://caisong.github.io/posts/%E5%AE%B9%E5%99%A8webdav/</link><pubDate>Tue, 24 Dec 2024 21:41:51 +0800</pubDate><guid>https://caisong.github.io/posts/%E5%AE%B9%E5%99%A8webdav/</guid><description>&lt;p>基于容器创建webdav服务&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-Dockerfile" data-lang="Dockerfile">&lt;span style="display:flex;">&lt;span>version: &lt;span style="color:#e6db74">&amp;#39;3&amp;#39;&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>services:&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> webdav:&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> image: bytemark/webdav&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> restart: always&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> ports:&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> - &lt;span style="color:#e6db74">&amp;#34;80:80&amp;#34;&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> environment:&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> AUTH_TYPE: Digest&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> USERNAME: alice&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> PASSWORD: secret1234&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> volumes:&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> - /srv/dav:/var/lib/dav&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Rsyslog mmnormalize module</title><link>https://caisong.github.io/posts/rsyslogmmnormalizemodule/</link><pubDate>Tue, 24 Dec 2024 21:41:27 +0800</pubDate><guid>https://caisong.github.io/posts/rsyslogmmnormalizemodule/</guid><description>&lt;p>rsyslog mmnormalize module语法稀奇古怪，相关资料还特别少，看了好几遍才明白。&lt;/p>
&lt;p>最终能解析出来了，但是没法没使用，不在默认namespace &lt;code>$!&lt;/code>下，放弃了。&lt;/p>
&lt;h2 id="相关语法">相关语法&lt;/h2>
&lt;h3 id="规则语法">规则语法&lt;/h3>
&lt;pre tabindex="0">&lt;code class="language-config" data-lang="config">rule=[&amp;lt;tag1&amp;gt;[,&amp;lt;tag2&amp;gt;...]]:&amp;lt;match description&amp;gt;
# match descirption 可以出现N次
match description=&amp;lt;string literals&amp;gt;&amp;lt;field selectors&amp;gt;
# extra data是根据field type类型决定的
fileld selectors=%&amp;lt;field name&amp;gt;:&amp;lt;field type&amp;gt;[:&amp;lt;extra data&amp;gt;]%
&lt;/code>&lt;/pre>&lt;h3 id="field-type">field type&lt;/h3>
&lt;p>mmnormalize版本2的语法没有使用正则，内置了一套字段类型，与正则差不多。&lt;/p>
&lt;ul>
&lt;li>number: 数字
%field_name:number% === [0-9]+&lt;/li>
&lt;li>word: 到空格或者行末截止
%field_name:word% === \S+&lt;/li>
&lt;li>alpha: up to the next whitespace, punctuation, decimal digit or ctrl
%field_name:alpha% === \w+&lt;/li>
&lt;li>char-to: 表示直到某个字符
%field_name:char-to:,% === [^,]+&lt;/li>
&lt;li>char-sp: 表示直到某个字符，可以空。
%field_name:char-sep:,% === [^,]*&lt;/li>
&lt;li>rest：一直匹配到行结束&lt;/li>
&lt;li>quoted-string: 匹配双引号中的内容&lt;/li>
&lt;li>date-iso ： YYYY-MM-DD格式日期&lt;/li>
&lt;li>time-24hr： HH:MM:SS 24小时制时间&lt;/li>
&lt;li>time-12hr： HH:MM:SS 12小时制时间&lt;/li>
&lt;li>ipv4: 点分制ipv4地址&lt;/li>
&lt;li>date-rfc3164： Oct 29 09:47:08 格式日期&lt;/li>
&lt;li>date-rfc5424：1985-04-12T19:20:50.52-04:00 格式日期&lt;/li>
&lt;li>iptables：匹配Name=value，空格分隔的kv对
%-:iptables% 不使用字段名，匹配内容中的name替代字段名&lt;/li>
&lt;/ul>
&lt;h3 id="前置规则">前置规则&lt;/h3>
&lt;pre tabindex="0">&lt;code class="language-config" data-lang="config"># 设置前缀，可复用
prefix=&amp;lt;match description&amp;gt;
# 取消前缀
prefix=
&lt;/code>&lt;/pre>&lt;h3 id="引用">引用&lt;/h3>
&lt;p>mmnormalize匹配的内容都在&lt;code>$!&lt;/code>命名空间内，可通过&lt;code>$!field_name&lt;/code>引用&lt;/p></description></item><item><title>Golang sftp</title><link>https://caisong.github.io/posts/golangsftp/</link><pubDate>Tue, 24 Dec 2024 21:40:53 +0800</pubDate><guid>https://caisong.github.io/posts/golangsftp/</guid><description>&lt;p>golang 连接 sftp&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;golang.org/x/crypto/ssh&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;github.com/pkg/sftp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// 配置 SSH 客户端
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#a6e22e">sshConfig&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#f92672">&amp;amp;&lt;/span>&lt;span style="color:#a6e22e">ssh&lt;/span>.&lt;span style="color:#a6e22e">ClientConfig&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">User&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;your-username&amp;#34;&lt;/span>, &lt;span style="color:#75715e">// 目标服务器的用户名
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>		&lt;span style="color:#a6e22e">Auth&lt;/span>: []&lt;span style="color:#a6e22e">ssh&lt;/span>.&lt;span style="color:#a6e22e">AuthMethod&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#75715e">// 使用私钥认证
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>			&lt;span style="color:#a6e22e">ssh&lt;/span>.&lt;span style="color:#a6e22e">PublicKeysCallback&lt;/span>(&lt;span style="color:#66d9ef">func&lt;/span>() ([]&lt;span style="color:#a6e22e">ssh&lt;/span>.&lt;span style="color:#a6e22e">PublicKey&lt;/span>, &lt;span style="color:#66d9ef">error&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				&lt;span style="color:#75715e">// 加载私钥文件
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>				&lt;span style="color:#a6e22e">privateKeyPath&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;/path/to/your/private/key&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				&lt;span style="color:#a6e22e">key&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">os&lt;/span>.&lt;span style="color:#a6e22e">ReadFile&lt;/span>(&lt;span style="color:#a6e22e">privateKeyPath&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>					&lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span>, &lt;span style="color:#a6e22e">fmt&lt;/span>.&lt;span style="color:#a6e22e">Errorf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;unable to read private key: %v&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				&lt;span style="color:#75715e">// 解密私钥文件（如果私钥有密码保护）
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>				&lt;span style="color:#a6e22e">signer&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">ssh&lt;/span>.&lt;span style="color:#a6e22e">ParsePrivateKey&lt;/span>(&lt;span style="color:#a6e22e">key&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>					&lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span>, &lt;span style="color:#a6e22e">fmt&lt;/span>.&lt;span style="color:#a6e22e">Errorf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;unable to parse private key: %v&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				&lt;span style="color:#75715e">// 返回公钥认证方法
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>				&lt;span style="color:#66d9ef">return&lt;/span> []&lt;span style="color:#a6e22e">ssh&lt;/span>.&lt;span style="color:#a6e22e">PublicKey&lt;/span>{&lt;span style="color:#a6e22e">signer&lt;/span>.&lt;span style="color:#a6e22e">PublicKey&lt;/span>()}, &lt;span style="color:#66d9ef">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			}),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">HostKeyCallback&lt;/span>: &lt;span style="color:#a6e22e">ssh&lt;/span>.&lt;span style="color:#a6e22e">InsecureIgnoreHostKey&lt;/span>(), &lt;span style="color:#75715e">// 忽略主机密钥验证（适用于开发，生产环境需要提供真实的公钥验证）
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// 连接到远程主机
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#a6e22e">sshClient&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">ssh&lt;/span>.&lt;span style="color:#a6e22e">Dial&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;tcp&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;remote-server.com:22&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">sshConfig&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Fatalf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Failed to dial: %v&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">defer&lt;/span> &lt;span style="color:#a6e22e">sshClient&lt;/span>.&lt;span style="color:#a6e22e">Close&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// 创建 SFTP 客户端
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#a6e22e">client&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">sftp&lt;/span>.&lt;span style="color:#a6e22e">NewClient&lt;/span>(&lt;span style="color:#a6e22e">sshClient&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Fatalf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Failed to create SFTP client: %v&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">defer&lt;/span> &lt;span style="color:#a6e22e">client&lt;/span>.&lt;span style="color:#a6e22e">Close&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// 进行文件操作，例如列出远程目录
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#a6e22e">files&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">client&lt;/span>.&lt;span style="color:#a6e22e">ReadDir&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;/path/to/remote/directory&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Fatalf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Failed to list directory: %v&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// 打印远程目录中的文件
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#66d9ef">for&lt;/span> &lt;span style="color:#a6e22e">_&lt;/span>, &lt;span style="color:#a6e22e">file&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#66d9ef">range&lt;/span> &lt;span style="color:#a6e22e">files&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">fmt&lt;/span>.&lt;span style="color:#a6e22e">Println&lt;/span>(&lt;span style="color:#a6e22e">file&lt;/span>.&lt;span style="color:#a6e22e">Name&lt;/span>())
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docker fuse</title><link>https://caisong.github.io/posts/dockerfuse/</link><pubDate>Tue, 24 Dec 2024 21:40:39 +0800</pubDate><guid>https://caisong.github.io/posts/dockerfuse/</guid><description>&lt;p>docker fuse权限问题&lt;/p></description></item><item><title>C解析ELF</title><link>https://caisong.github.io/posts/celf/</link><pubDate>Tue, 24 Dec 2024 21:40:31 +0800</pubDate><guid>https://caisong.github.io/posts/celf/</guid><description>&lt;p>C解析elf文件&lt;/p></description></item><item><title>Apache webdav配置</title><link>https://caisong.github.io/posts/apachewebdav%E9%85%8D%E7%BD%AE/</link><pubDate>Tue, 24 Dec 2024 21:40:28 +0800</pubDate><guid>https://caisong.github.io/posts/apachewebdav%E9%85%8D%E7%BD%AE/</guid><description>&lt;p>apache webdav配置&lt;/p></description></item><item><title>Nginx配置webdav</title><link>https://caisong.github.io/posts/nginx%E9%85%8D%E7%BD%AEwebdav/</link><pubDate>Fri, 20 Dec 2024 21:41:58 +0800</pubDate><guid>https://caisong.github.io/posts/nginx%E9%85%8D%E7%BD%AEwebdav/</guid><description>&lt;p>nginx配置webdav服务， 并验证。&lt;/p>
&lt;p>&lt;code>dav_ext_methods&lt;/code>这个依赖于&lt;code>http_dav_ext &lt;/code> module，这个并不在&lt;code>Centos&lt;/code>发行版内，需要额外安装。如何手动编译，参考临沂篇《nginx添加module》&lt;/p>
&lt;h2 id="nginx配置webdav">nginx配置webdav&lt;/h2>
&lt;ul>
&lt;li>nginx配置&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-nginx" data-lang="nginx">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">server&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">listen&lt;/span> &lt;span style="color:#ae81ff">10080&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">server_name&lt;/span> &lt;span style="color:#e6db74">localhost&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">charset&lt;/span> &lt;span style="color:#e6db74">utf-8&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">root&lt;/span> &lt;span style="color:#e6db74">/home/dav&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e"># root /home/dav/$remote_addr;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">auth_basic&lt;/span> &lt;span style="color:#e6db74">realm_name&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">auth_basic_user_file&lt;/span> &lt;span style="color:#e6db74">/etc/nginx/.passwords.list&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">dav_methods&lt;/span> &lt;span style="color:#e6db74">PUT&lt;/span> &lt;span style="color:#e6db74">DELETE&lt;/span> &lt;span style="color:#e6db74">MKCOL&lt;/span> &lt;span style="color:#e6db74">COPY&lt;/span> &lt;span style="color:#e6db74">MOVE&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">dav_ext_methods&lt;/span> &lt;span style="color:#e6db74">PROPFIND&lt;/span> &lt;span style="color:#e6db74">OPTIONS&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">dav_access&lt;/span> &lt;span style="color:#e6db74">user:rw&lt;/span> &lt;span style="color:#e6db74">group:rw&lt;/span> &lt;span style="color:#e6db74">all:r&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">client_body_temp_path&lt;/span> &lt;span style="color:#e6db74">/tmp&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">client_max_body_size&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">create_full_put_path&lt;/span> &lt;span style="color:#66d9ef">on&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>设置用户名/密码&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>echo -n &lt;span style="color:#e6db74">&amp;#39;lpwm:&amp;#39;&lt;/span> | sudo tee /etc/nginx/.passwords.list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>openssl passwd -apr1 | sudo tee -a /etc/nginx/.passwords.list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>设置挂载目录权限&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo chown -r www-data:www-data /home/dav
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>启动&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>nginx -t 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>nginx -s reload
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="验证">验证&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo apt install cadaver
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cadaver http://127.0.0.1:10080
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>使用curl未尝试成功，使用的cadaver客户端&lt;/strong>&lt;/p></description></item><item><title>Tmux配置</title><link>https://caisong.github.io/posts/tmux.conf/</link><pubDate>Fri, 20 Dec 2024 21:41:37 +0800</pubDate><guid>https://caisong.github.io/posts/tmux.conf/</guid><description>&lt;pre tabindex="0">&lt;code class="language-config" data-lang="config"># remap prefix from &amp;#39;C-b&amp;#39; to &amp;#39;C-a&amp;#39;
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# split panes using | and -
bind | split-window -h
bind - split-window -v
unbind &amp;#39;&amp;#34;&amp;#39;
unbind %

# reload config file (change file location to your the tmux.conf you want to use)
bind r source-file ~/.tmux.conf

# switch panes using Alt-arrow without prefix
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# Enable mouse control (clickable windows, panes, resizable panes)
set -g mouse on

# don&amp;#39;t rename windows automatically
set-option -g allow-rename off

# DESIGN TWEAKS

# don&amp;#39;t do anything when a &amp;#39;bell&amp;#39; rings
set -g visual-activity off
set -g visual-bell off
set -g visual-silence off
setw -g monitor-activity off
set -g bell-action none

# clock mode
setw -g clock-mode-colour yellow

# copy mode
setw -g mode-style &amp;#39;fg=black bg=red bold&amp;#39;

# panes
set -g pane-border-style &amp;#39;fg=red&amp;#39;
set -g pane-active-border-style &amp;#39;fg=yellow&amp;#39;

# statusbar
set -g status-position bottom
set -g status-justify left
set -g status-style &amp;#39;fg=red&amp;#39;

set -g status-left &amp;#39;&amp;#39;
set -g status-left-length 10

set -g status-right-style &amp;#39;fg=black bg=yellow&amp;#39;
set -g status-right &amp;#39;%Y-%m-%d %H:%M &amp;#39;
set -g status-right-length 50

setw -g window-status-current-style &amp;#39;fg=black bg=red&amp;#39;
setw -g window-status-current-format &amp;#39; #I #W #F &amp;#39;

setw -g window-status-style &amp;#39;fg=red bg=black&amp;#39;
setw -g window-status-format &amp;#39; #I #[fg=white]#W #[fg=yellow]#F &amp;#39;

setw -g window-status-bell-style &amp;#39;fg=yellow bg=red bold&amp;#39;

# messages
set -g message-style &amp;#39;fg=yellow bg=red bold&amp;#39;
&lt;/code>&lt;/pre></description></item><item><title>Gowebclient</title><link>https://caisong.github.io/posts/gowebclient/</link><pubDate>Fri, 20 Dec 2024 21:40:56 +0800</pubDate><guid>https://caisong.github.io/posts/gowebclient/</guid><description>&lt;p>go webdav client示例&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-golang" data-lang="golang">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;github.com/studio-b12/gowebdav&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>(){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">cli&lt;/span>&lt;span style="color:#f92672">:=&lt;/span>&lt;span style="color:#a6e22e">gowebdav&lt;/span>.&lt;span style="color:#a6e22e">NewAuthClient&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;http://127.0.0.1:10080&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">gowebdav&lt;/span>.&lt;span style="color:#a6e22e">NewEmptyAuth&lt;/span>())
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span>&lt;span style="color:#f92672">:=&lt;/span>&lt;span style="color:#a6e22e">cli&lt;/span>.&lt;span style="color:#a6e22e">Connect&lt;/span>();&lt;span style="color:#a6e22e">err&lt;/span>&lt;span style="color:#f92672">!=&lt;/span>&lt;span style="color:#66d9ef">nil&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> panic(&lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">entries&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>&lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">cli&lt;/span>.&lt;span style="color:#a6e22e">ReadDir&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;/&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span>&lt;span style="color:#f92672">!=&lt;/span>&lt;span style="color:#66d9ef">nil&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> panic(&lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> &lt;span style="color:#a6e22e">_&lt;/span>, &lt;span style="color:#a6e22e">entry&lt;/span>&lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#66d9ef">range&lt;/span> &lt;span style="color:#a6e22e">entries&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">entry&lt;/span>.&lt;span style="color:#a6e22e">IsDir&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">fmt&lt;/span>.&lt;span style="color:#a6e22e">Println&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Dir &amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">entry&lt;/span>.&lt;span style="color:#a6e22e">Name&lt;/span>())
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }&lt;span style="color:#66d9ef">else&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">fmt&lt;/span>.&lt;span style="color:#a6e22e">Println&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;File &amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">entry&lt;/span>.&lt;span style="color:#a6e22e">Name&lt;/span>())
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Nginx添加module</title><link>https://caisong.github.io/posts/nginx%E6%B7%BB%E5%8A%A0module/</link><pubDate>Wed, 18 Dec 2024 21:41:13 +0800</pubDate><guid>https://caisong.github.io/posts/nginx%E6%B7%BB%E5%8A%A0module/</guid><description>&lt;ol>
&lt;li>直接&lt;code>nginx -V&lt;/code>查看运行的nginx的编译参数&lt;/li>
&lt;li>下载源码，使用对应的nginx参数编译nginx&lt;/li>
&lt;li>下载module，编译&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 先编译nginx，nginx编译成功后，再重新configure&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>末尾添加你需要的编译的module
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--with-http_dav_module --add-dynamic-module&lt;span style="color:#f92672">=&lt;/span>/root/nginx-dav-ext-module-3.0.0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="4">
&lt;li>部署&lt;/li>
&lt;/ol>
&lt;pre tabindex="0">&lt;code class="language-conf" data-lang="conf"># 添加module，so 放在 /usr/lib64/nginx/modules
load_module modules/ngx_http_dynamic_etag_module.so;
&lt;/code>&lt;/pre></description></item><item><title>go echo构建webdav服务器</title><link>https://caisong.github.io/posts/echowebdav/</link><pubDate>Sat, 14 Dec 2024 21:40:44 +0800</pubDate><guid>https://caisong.github.io/posts/echowebdav/</guid><description>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-golang" data-lang="golang">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;golang.org/x/net/webdav&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;github.com/labstack/echo/v4&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;github.com/labstack/echo/v4/middleware&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// 获取当前工作目录作为WebDAV服务器的根目录（可按需替换为实际的目录路径）
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#a6e22e">rootDir&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">os&lt;/span>.&lt;span style="color:#a6e22e">Getwd&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Fatal&lt;/span>(&lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// 创建WebDAV文件系统处理程序
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#a6e22e">handler&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">webdav&lt;/span>.&lt;span style="color:#a6e22e">Handler&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">FileSystem&lt;/span>: &lt;span style="color:#a6e22e">webdav&lt;/span>.&lt;span style="color:#a6e22e">Dir&lt;/span>(&lt;span style="color:#a6e22e">rootDir&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">LockSystem&lt;/span>: &lt;span style="color:#a6e22e">webdav&lt;/span>.&lt;span style="color:#a6e22e">NewMemLS&lt;/span>(),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// 创建Echo实例
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#a6e22e">e&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">echo&lt;/span>.&lt;span style="color:#a6e22e">New&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// 添加中间件（可按需添加更多如日志记录、跨域等中间件，此处以基本的恢复中间件为例）
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#a6e22e">e&lt;/span>.&lt;span style="color:#a6e22e">Use&lt;/span>(&lt;span style="color:#a6e22e">middleware&lt;/span>.&lt;span style="color:#a6e22e">Recover&lt;/span>())
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// 将WebDAV处理程序挂载到Echo框架的路由上，这里假设所有路径都由WebDAV处理
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#a6e22e">e&lt;/span>.&lt;span style="color:#a6e22e">Any&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;/*&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">echo&lt;/span>.&lt;span style="color:#a6e22e">WrapHandler&lt;/span>(&lt;span style="color:#f92672">&amp;amp;&lt;/span>&lt;span style="color:#a6e22e">handler&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// 设置服务器监听的地址和端口，这里以8080为例
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#a6e22e">addr&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;:8080&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Printf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Starting WebDAV server on %s&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">addr&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// 启动服务器
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#a6e22e">err&lt;/span> = &lt;span style="color:#a6e22e">e&lt;/span>.&lt;span style="color:#a6e22e">Start&lt;/span>(&lt;span style="color:#a6e22e">addr&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Fatal&lt;/span>(&lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Shell 常用函数</title><link>https://caisong.github.io/posts/shell%E6%89%93%E5%8D%B0/</link><pubDate>Fri, 13 Dec 2024 21:41:32 +0800</pubDate><guid>https://caisong.github.io/posts/shell%E6%89%93%E5%8D%B0/</guid><description>&lt;p>Cut out summary from your post content here.&lt;/p></description></item><item><title>Gitvimdiff设置</title><link>https://caisong.github.io/posts/gitvimdiff%E8%AE%BE%E7%BD%AE/</link><pubDate>Tue, 10 Dec 2024 21:40:50 +0800</pubDate><guid>https://caisong.github.io/posts/gitvimdiff%E8%AE%BE%E7%BD%AE/</guid><description>&lt;p>Cut out summary from your post content here.&lt;/p></description></item><item><title>PG数据库、用户操作</title><link>https://caisong.github.io/posts/pg%E6%95%B0%E6%8D%AE%E5%BA%93%E7%94%A8%E6%88%B7%E7%9B%B8%E5%85%B3/</link><pubDate>Thu, 28 Nov 2024 21:41:17 +0800</pubDate><guid>https://caisong.github.io/posts/pg%E6%95%B0%E6%8D%AE%E5%BA%93%E7%94%A8%E6%88%B7%E7%9B%B8%E5%85%B3/</guid><description>&lt;p>Cut out summary from your post content here.&lt;/p></description></item><item><title>beyond compare设置git diff</title><link>https://caisong.github.io/posts/bc%E8%AE%BE%E7%BD%AEgit%E5%AF%B9%E6%AF%94/</link><pubDate>Wed, 06 Nov 2024 21:40:29 +0800</pubDate><guid>https://caisong.github.io/posts/bc%E8%AE%BE%E7%BD%AEgit%E5%AF%B9%E6%AF%94/</guid><description>&lt;p>bc设置git 对比&lt;/p></description></item><item><title>mongo docker部署</title><link>https://caisong.github.io/posts/mongodocker%E8%BF%90%E8%A1%8C/</link><pubDate>Mon, 04 Nov 2024 21:41:12 +0800</pubDate><guid>https://caisong.github.io/posts/mongodocker%E8%BF%90%E8%A1%8C/</guid><description>&lt;p>mongo docker部署&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>docker run -d -p 27017:27017 -v mongo-data:/data/db -e MONGODB_INITDB_ROOT_USERNAME&lt;span style="color:#f92672">=&lt;/span>username -e MONGODB_INITDB_ROOT_PASSWORD&lt;span style="color:#f92672">=&lt;/span>password mongo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>取消全局代理</title><link>https://caisong.github.io/posts/%E5%8F%96%E6%B6%88%E5%85%A8%E5%B1%80%E4%BB%A3%E7%90%86/</link><pubDate>Mon, 28 Oct 2024 21:42:31 +0800</pubDate><guid>https://caisong.github.io/posts/%E5%8F%96%E6%B6%88%E5%85%A8%E5%B1%80%E4%BB%A3%E7%90%86/</guid><description>&lt;p>使用“飞机”设置PAC模式的时候，系统代理脚本坑人就会开启，但实际过程中，但我一般直接配置Firefox的PAC URL，且PAC开关开启后，许多软件没法直接打开（可能与我使用的代理有关）。&lt;/p>
&lt;p>之前一直是&lt;code>Win+x&lt;/code>，设置 &amp;ndash;&amp;gt; 网络和Interne &amp;ndash;&amp;gt; 代理 ，取消开关。
实在觉得不方便，就想找个一键脚本实现。经过尝试发现，其实打开PAC代理，就是在注册表中添加了PAC的URL，直接删除就可以关闭。注册表文件内容如下：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span>Windows Registry Editor Version 5.00
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;#34;AutoConfigURL&amp;#34;=-
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>ssh 代理</title><link>https://caisong.github.io/posts/ssh%E4%BB%A3%E7%90%86/</link><pubDate>Mon, 28 Oct 2024 21:42:25 +0800</pubDate><guid>https://caisong.github.io/posts/ssh%E4%BB%A3%E7%90%86/</guid><description>&lt;p>ssh代理&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bat" data-lang="bat">&lt;span style="display:flex;">&lt;span>@&lt;span style="color:#66d9ef">echo&lt;/span> off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">start&lt;/span> /b ssh -N -f -D 10080 caisong@190.92.245.8 -i 190.92.245.8_3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Webassembly</title><link>https://caisong.github.io/posts/webassembly/</link><pubDate>Mon, 28 Oct 2024 21:41:39 +0800</pubDate><guid>https://caisong.github.io/posts/webassembly/</guid><description>&lt;p>Cut out summary from your post content here.&lt;/p></description></item><item><title>快速读取文件</title><link>https://caisong.github.io/posts/%E5%BF%AB%E9%80%9F%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6/</link><pubDate>Fri, 18 Oct 2024 21:41:49 +0800</pubDate><guid>https://caisong.github.io/posts/%E5%BF%AB%E9%80%9F%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6/</guid><description>&lt;p>golang 快速读取大文件&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-golang" data-lang="golang">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">//github.com/bits-and-blooms/bloom/v3
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#34;bufio&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#34;sync&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> &lt;span style="color:#a6e22e">processLine&lt;/span>(&lt;span style="color:#a6e22e">line&lt;/span> &lt;span style="color:#66d9ef">string&lt;/span>, &lt;span style="color:#a6e22e">wg&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">sync&lt;/span>.&lt;span style="color:#a6e22e">WaitGroup&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">defer&lt;/span> &lt;span style="color:#a6e22e">wg&lt;/span>.&lt;span style="color:#a6e22e">Done&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// 处理每一行，例如打印
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#a6e22e">fmt&lt;/span>.&lt;span style="color:#a6e22e">Println&lt;/span>(&lt;span style="color:#a6e22e">line&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">file&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">os&lt;/span>.&lt;span style="color:#a6e22e">Open&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;largefile.txt&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">fmt&lt;/span>.&lt;span style="color:#a6e22e">Println&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Error:&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#66d9ef">return&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">defer&lt;/span> &lt;span style="color:#a6e22e">file&lt;/span>.&lt;span style="color:#a6e22e">Close&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">scanner&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">bufio&lt;/span>.&lt;span style="color:#a6e22e">NewScanner&lt;/span>(&lt;span style="color:#a6e22e">file&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">var&lt;/span> &lt;span style="color:#a6e22e">wg&lt;/span> &lt;span style="color:#a6e22e">sync&lt;/span>.&lt;span style="color:#a6e22e">WaitGroup&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">for&lt;/span> &lt;span style="color:#a6e22e">scanner&lt;/span>.&lt;span style="color:#a6e22e">Scan&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">wg&lt;/span>.&lt;span style="color:#a6e22e">Add&lt;/span>(&lt;span style="color:#ae81ff">1&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#66d9ef">go&lt;/span> &lt;span style="color:#a6e22e">processLine&lt;/span>(&lt;span style="color:#a6e22e">scanner&lt;/span>.&lt;span style="color:#a6e22e">Text&lt;/span>(), &lt;span style="color:#f92672">&amp;amp;&lt;/span>&lt;span style="color:#a6e22e">wg&lt;/span>) &lt;span style="color:#75715e">// 使用 Goroutine 处理每一行
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">scanner&lt;/span>.&lt;span style="color:#a6e22e">Err&lt;/span>(); &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">fmt&lt;/span>.&lt;span style="color:#a6e22e">Println&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Error reading file:&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">wg&lt;/span>.&lt;span style="color:#a6e22e">Wait&lt;/span>() &lt;span style="color:#75715e">// 等待所有 Goroutine 完成
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>报文切割</title><link>https://caisong.github.io/posts/%E6%8A%A5%E6%96%87%E5%88%87%E5%89%B2/</link><pubDate>Fri, 18 Oct 2024 21:41:43 +0800</pubDate><guid>https://caisong.github.io/posts/%E6%8A%A5%E6%96%87%E5%88%87%E5%89%B2/</guid><description>&lt;p>基于&lt;code>gopacket&lt;/code>实现报文切割，支持隧道。&lt;/p></description></item><item><title>简化代码</title><link>https://caisong.github.io/posts/%E7%AE%80%E5%8C%96%E4%BB%A3%E7%A0%81/</link><pubDate>Wed, 16 Oct 2024 21:41:47 +0800</pubDate><guid>https://caisong.github.io/posts/%E7%AE%80%E5%8C%96%E4%BB%A3%E7%A0%81/</guid><description>&lt;p>基于DPDK flow规则过滤流量（代码未写完）&lt;/p></description></item><item><title>Ubuntu qemu arm</title><link>https://caisong.github.io/posts/ubuntuqemuarm/</link><pubDate>Thu, 10 Oct 2024 21:41:38 +0800</pubDate><guid>https://caisong.github.io/posts/ubuntuqemuarm/</guid><description>&lt;p>x86 ubuntu 模式 arm环境&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 检验CPU是否支持&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>grep -E --color &lt;span style="color:#e6db74">&amp;#39;(vmx|svm)&amp;#39;&lt;/span> /proc/cpuinfo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 安装qemu&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt install qemu-kvm libvirt-clients libvirt-daemon-system bridge-utils virtinst libvirt-daemon
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 启动&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo systemctl enable --now libvirtd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo systemctl start libvirtd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 添加用户至相关组(否则virt-manager无权限)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo usermod -aG kvm $USER
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo usermod -aG libvirt $USER
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo usermod -aG libvirt-qemu $USER
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 安装virt-manager（图形界面，可选）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo adduser $USER libvirt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt install virt-manager
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 重新登陆后使用&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="创建空镜像文件">创建空镜像文件&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>qemu-img create -f qcow2 centos-arm.qcow2 20G
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="qemu-efi下载">qemu-efi下载&lt;/h2>
&lt;p>&lt;a href="https://releases.linaro.org/reference-platform/enterprise/17.12/uefi/release/qemu-aarch64/QEMU_EFI.fd">QEMU_EFI.fd&lt;/a>&lt;/p></description></item><item><title>　手动链接</title><link>https://caisong.github.io/posts/%E6%89%8B%E5%8A%A8%E9%93%BE%E6%8E%A5/</link><pubDate>Wed, 09 Oct 2024 21:41:53 +0800</pubDate><guid>https://caisong.github.io/posts/%E6%89%8B%E5%8A%A8%E9%93%BE%E6%8E%A5/</guid><description>&lt;p>通过解析ELF文件，实现ELF依赖库的加载&lt;/p></description></item><item><title>构建DPDK环境</title><link>https://caisong.github.io/posts/%E6%9E%84%E5%BB%BAdpdk%E7%8E%AF%E5%A2%83/</link><pubDate>Wed, 09 Oct 2024 21:41:46 +0800</pubDate><guid>https://caisong.github.io/posts/%E6%9E%84%E5%BB%BAdpdk%E7%8E%AF%E5%A2%83/</guid><description>&lt;p>构建DPDK环境 &lt;code>docker&lt;/code>镜像，未优化。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-dockerfile" data-lang="dockerfile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">FROM&lt;/span>&lt;span style="color:#e6db74"> ccr.ccs.tencentyun.com/library/centos:latest&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>&lt;span style="color:#66d9ef">LABEL&lt;/span> RUN docker run -it --privileged -v /sys/bus/pci/drivers:/sys/bus/pci/drivers -v /sys/kernel/mm/hugepages:/sys/kernel/mm/hugepages -v /sys/devices/system/node:/sys/devices/system/node -v /dev:/dev --name NAME -e NAME&lt;span style="color:#f92672">=&lt;/span>NAME -e IMAGE&lt;span style="color:#f92672">=&lt;/span>IMAGE IMAGE&lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>&lt;span style="color:#66d9ef">WORKDIR&lt;/span>&lt;span style="color:#e6db74"> /root&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>&lt;span style="color:#66d9ef">COPY&lt;/span> ./dpdk-23.11.1.tar.xz ./libpcap-1.10.4.tar.xz dpdk-kmods-linux.tar.gz pktgen-dpdk-pktgen-24.05.5.tar.gz /root&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>&lt;span style="color:#75715e"># repo&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>&lt;span style="color:#66d9ef">RUN&lt;/span> sed -e &lt;span style="color:#e6db74">&amp;#34;s|^mirrorlist=|#mirrorlist=|g&amp;#34;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#34;s|^#baseurl=http://mirror.centos.org/\$contentdir/\$releasever|baseurl=http://mirror.nju.edu.cn/centos-vault/8.5.2111|g&amp;#34;&lt;/span> -i.bak /etc/yum.repos.d/CentOS-*.repo&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>&lt;span style="color:#66d9ef">RUN&lt;/span> dnf makecache &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> dnf install epel-release -y&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>&lt;span style="color:#66d9ef">RUN&lt;/span> sed -e &lt;span style="color:#e6db74">&amp;#39;s!^metalink=!#metalink=!g&amp;#39;&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s!^#baseurl=!baseurl=!g&amp;#39;&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s!https\?://download\.fedoraproject\.org/pub/epel!http://mirror.nju.edu.cn/epel!g&amp;#39;&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s!https\?://download\.example/pub/epel!http://mirror.nju.edu.cn/epel!g&amp;#39;&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -i /etc/yum.repos.d/epel&lt;span style="color:#f92672">{&lt;/span>,-testing&lt;span style="color:#f92672">}&lt;/span>.repo &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> dnf makecache&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>&lt;span style="color:#66d9ef">RUN&lt;/span> dnf install python39 python39-pyelftools -y &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> python3 -m pip install -i https://mirrors.cernet.edu.cn/pypi/web/simple --upgrade pip &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> pip config set global.index-url https://mirrors.cernet.edu.cn/pypi/web/simple &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> pip install ninja meson&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>&lt;span style="color:#66d9ef">RUN&lt;/span> dnf install bison flex gcc make autoconf numactl-devel openssl openssl-devel libatomic-devel libatomic zlib-devel libbsd-devel which -y&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>&lt;span style="color:#66d9ef">RUN&lt;/span> tar xvf libpcap-1.10.4.tar.xz &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> cd libpcap-1.10.4 &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> ./configure &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> make &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> make install&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>&lt;span style="color:#66d9ef">WORKDIR&lt;/span>&lt;span style="color:#e6db74"> /root&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>&lt;span style="color:#66d9ef">RUN&lt;/span> tar xvf dpdk-23.11.1.tar.xz &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> cd dpdk-stable-23.11.1 &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> meson build &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> ninja -C build &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> ninja -C build install &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> export PKG_CONFIG_PATH&lt;span style="color:#f92672">=&lt;/span>/usr/local/lib64/pkgconfig &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> ldconfig&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>&lt;span style="color:#66d9ef">WORKDIR&lt;/span>&lt;span style="color:#e6db74"> /root&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>&lt;span style="color:#66d9ef">RUN&lt;/span> tar xvf pktgen-dpdk-pktgen-24.05.5.tar.gz &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> cd pktgen-dpdk-pktgen-24.05.5 &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> sed -i &lt;span style="color:#e6db74">&amp;#34;168s/%l&amp;#39;d/%d/&amp;#34;&lt;/span> app/pktgen-port-cfg.c &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> meson build &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> ninja -C build &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> ninja -C build install&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>&lt;span style="color:#66d9ef">CMD&lt;/span> [&lt;span style="color:#e6db74">&amp;#34; /sbin/init&amp;#34;&lt;/span>]&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Virtualbox开启虚拟化</title><link>https://caisong.github.io/posts/virtualbox%E5%BC%80%E5%90%AF%E8%99%9A%E6%8B%9F%E5%8C%96/</link><pubDate>Wed, 09 Oct 2024 21:41:39 +0800</pubDate><guid>https://caisong.github.io/posts/virtualbox%E5%BC%80%E5%90%AF%E8%99%9A%E6%8B%9F%E5%8C%96/</guid><description>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>F:&lt;span style="color:#ae81ff">\V&lt;/span>irtualBox&amp;gt;VBoxManage.exe list vms
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#34;rhel64&amp;#34;&lt;/span> &lt;span style="color:#f92672">{&lt;/span>240f96d8-6535-431d-892e-b70f3dc464e8&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>F:&lt;span style="color:#ae81ff">\V&lt;/span>irtualBox&amp;gt;VBoxManage.exe modifyvm &lt;span style="color:#e6db74">&amp;#34;rhel64&amp;#34;&lt;/span> --nested-hw-virt on
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>windows romt构建rustup本地镜像</title><link>https://caisong.github.io/posts/rustup%E6%9C%AC%E5%9C%B0%E9%95%9C%E5%83%8F/</link><pubDate>Wed, 09 Oct 2024 21:41:30 +0800</pubDate><guid>https://caisong.github.io/posts/rustup%E6%9C%AC%E5%9C%B0%E9%95%9C%E5%83%8F/</guid><description>&lt;p>基于外部工具&lt;code>romt&lt;/code>实现的,不过最终也没成功。。。。。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cmd" data-lang="cmd">&lt;span style="display:flex;">&lt;span># 下载toolchain
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>e:\romt-0.4.0-x86_64-windows.exe&lt;span style="color:#75715e"> toolchain -v -s stable -t x86_64-pc-windows-gnu --url https://mirror.nju.edu.cn/rustup/dist --no-signature download&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>#下载rustup
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># nju镜像路径不同，ustc镜像一样的
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>e:\romt-0.4.0-x86_64-windows.exe&lt;span style="color:#75715e"> toolchain -v -s stable -t x86_64-pc-windows-gnu --url https://mirror.nju.edu.cn/rustup/rustup --no-signature download&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># rustup缺少校验文件，直接下载后放对应目录
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># create mirror
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># 不使用镜像速度比较慢
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>e:\romt-0.4.0-x86_64-windows.exe&lt;span style="color:#75715e"> crate init --index-url https://mirror.nju.edu.cn/git/crates.io-index.git&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>#同步
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>e:\romt-0.4.0-x86_64-windows.exe&lt;span style="color:#75715e"> crate -v --keep-going --index-url https://mirror.nju.edu.cn/git/crates.io-index.git update &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>E:\mirror&lt;span style="color:#75715e">&amp;gt;e:\romt-0.4.0-x86_64-windows.exe crate -v --keep-going --index-url https://mirror.nju.edu.cn/git/crates.io-index.git --crates-url https://mirror.nju.edu.cn/git/crates.io-index.git/ --assume-ok --bundle-path=e:\mirror\crates.tar.gz&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-powershell" data-lang="powershell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 打包&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># rustup缺少256文件，powershell执行&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Get-FileHash -Algorithm SHA256 -Path .\rustup-init.exe|out-file -Encoding ASCII .\rustup-init.exe.sha256
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>romt rustup -v -s stable -t x86_64-pc-windows-gnu --assume-ok pack
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># toolchains缺少asc文件，直接no-signature&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>romt toolchain -v -s stable -t x86_64-pc-windows-gnu --no-signature pack
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>```
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>qemu x86模拟aarch64</title><link>https://caisong.github.io/posts/qemu/</link><pubDate>Wed, 09 Oct 2024 21:41:23 +0800</pubDate><guid>https://caisong.github.io/posts/qemu/</guid><description>&lt;h2 id="qemu">qemu&lt;/h2>
&lt;p>&lt;a href="https://wiki.alpinelinux.org/wiki/QEMU">qemu wiki&lt;/a>&lt;/p>
&lt;h2 id="实现步骤">实现步骤&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 创建磁盘&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>qemu-img create -f qcow2 alpine.qcow2 8G
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 基于cdrom镜像创建x86虚拟机&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>qemu-system-x86_64 -m &lt;span style="color:#ae81ff">512&lt;/span> -nic user -boot d -cdrom alpine-standard-3.20.3-x86_64.iso -hda alpine.qcow2 -display gtk -enable-kvm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 基于cdrom镜像创建arm虚拟机&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 下面命令都-bios两种引导方式&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>qemu-system-aarch64 -m &lt;span style="color:#ae81ff">2048&lt;/span> -cpu cortex-a57 -smp &lt;span style="color:#ae81ff">2&lt;/span> -M virt -bios QEMU_EFI.fd -nographic -drive &lt;span style="color:#66d9ef">if&lt;/span>&lt;span style="color:#f92672">=&lt;/span>none,file&lt;span style="color:#f92672">=&lt;/span>ubuntu-16.04.3-server-arm64.iso,id&lt;span style="color:#f92672">=&lt;/span>cdrom,media&lt;span style="color:#f92672">=&lt;/span>cdrom -device virtio-scsi-device -device scsi-cd,drive&lt;span style="color:#f92672">=&lt;/span>cdrom -drive &lt;span style="color:#66d9ef">if&lt;/span>&lt;span style="color:#f92672">=&lt;/span>none,file&lt;span style="color:#f92672">=&lt;/span>ubuntu16.04-arm64.img,id&lt;span style="color:#f92672">=&lt;/span>hd0 -device virtio-blk-device,drive&lt;span style="color:#f92672">=&lt;/span>hd0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>qemu-system-aarch64 -m &lt;span style="color:#ae81ff">1024&lt;/span> -cpu cortex-a57 -smp &lt;span style="color:#ae81ff">2&lt;/span> -M virt -bios /usr/share/AAVMF/AAVMF_CODE.fd -nographic -drive &lt;span style="color:#66d9ef">if&lt;/span>&lt;span style="color:#f92672">=&lt;/span>none,file&lt;span style="color:#f92672">=&lt;/span>/opt/os/CentOS-7-aarch64-Minimal-2009.iso,id&lt;span style="color:#f92672">=&lt;/span>cdrom,media&lt;span style="color:#f92672">=&lt;/span>cdrom -device virtio-scsi-device -device scsi-cd,drive&lt;span style="color:#f92672">=&lt;/span>cdrom -drive &lt;span style="color:#66d9ef">if&lt;/span>&lt;span style="color:#f92672">=&lt;/span>none,file&lt;span style="color:#f92672">=&lt;/span>/var/lib/libvirt/images/test.img,id&lt;span style="color:#f92672">=&lt;/span>hd0 -device virtio-blk-device,drive&lt;span style="color:#f92672">=&lt;/span>hd0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>qemu-system-arm -m &lt;span style="color:#ae81ff">1024&lt;/span> -cpu cortex-a15 -M virt -bios /usr/share/AAVMF/AAVMF_CODE.fd -nographic -drive &lt;span style="color:#66d9ef">if&lt;/span>&lt;span style="color:#f92672">=&lt;/span>none,file&lt;span style="color:#f92672">=&lt;/span>/root/CentOS-7-aarch64-Minimal-2009.iso,id&lt;span style="color:#f92672">=&lt;/span>cdrom,media&lt;span style="color:#f92672">=&lt;/span>cdrom -device virtio-scsi-device -device scsi-cd,drive&lt;span style="color:#f92672">=&lt;/span>cdrom -drive &lt;span style="color:#66d9ef">if&lt;/span>&lt;span style="color:#f92672">=&lt;/span>none,file&lt;span style="color:#f92672">=&lt;/span>/root/centos-arm.img,id&lt;span style="color:#f92672">=&lt;/span>hd0 -device virtio-blk-device,drive&lt;span style="color:#f92672">=&lt;/span>hd0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>qemu-system-arm -m &lt;span style="color:#ae81ff">1024&lt;/span> -cpu cortex-a15 -M virt -bios /usr/share/AAVMF/AAVMF_CODE.fd -nographic -drive &lt;span style="color:#66d9ef">if&lt;/span>&lt;span style="color:#f92672">=&lt;/span>none,file&lt;span style="color:#f92672">=&lt;/span>/root/CentOS-7-aarch64-Minimal-2009.iso,id&lt;span style="color:#f92672">=&lt;/span>cdrom,media&lt;span style="color:#f92672">=&lt;/span>cdrom -device virtio-scsi-device -device scsi-cd,drive&lt;span style="color:#f92672">=&lt;/span>cdrom -drive &lt;span style="color:#66d9ef">if&lt;/span>&lt;span style="color:#f92672">=&lt;/span>none,file&lt;span style="color:#f92672">=&lt;/span>/root/centos-arm.img,id&lt;span style="color:#f92672">=&lt;/span>hd0 -device virtio-blk-device,drive&lt;span style="color:#f92672">=&lt;/span>hd0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>qemu-system-aarch64 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -m 4096M -cpu cortex-a57 -M virt &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -bios QEMU_EFI.fd &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -localtime -serial telnet::4444,server -nographic &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -drive &lt;span style="color:#66d9ef">if&lt;/span>&lt;span style="color:#f92672">=&lt;/span>none,file&lt;span style="color:#f92672">=&lt;/span>./qcow2.img,id&lt;span style="color:#f92672">=&lt;/span>hd0 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -device virtio-blk-device,drive&lt;span style="color:#f92672">=&lt;/span>hd0 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -device virtio-net-device,vlan&lt;span style="color:#f92672">=&lt;/span>0,id&lt;span style="color:#f92672">=&lt;/span>net0,mac&lt;span style="color:#f92672">=&lt;/span>52:54:00:09:a4:37 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -net user,vlan&lt;span style="color:#f92672">=&lt;/span>0,name&lt;span style="color:#f92672">=&lt;/span>hostnet0 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -redir tcp:40022::22
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Kill zombie</title><link>https://caisong.github.io/posts/killzombie/</link><pubDate>Wed, 09 Oct 2024 21:41:03 +0800</pubDate><guid>https://caisong.github.io/posts/killzombie/</guid><description>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>ps -A -o stat,ppid,pid,cmd | grep -e &lt;span style="color:#e6db74">&amp;#39;^[Zz]&amp;#39;&lt;/span> | awk &lt;span style="color:#e6db74">&amp;#39;{print $2}&amp;#39;&lt;/span> | xargs kill -9
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>windows create docker machine</title><link>https://caisong.github.io/posts/docker-machinecreate/</link><pubDate>Wed, 09 Oct 2024 21:40:41 +0800</pubDate><guid>https://caisong.github.io/posts/docker-machinecreate/</guid><description>&lt;!-- raw HTML omitted -->
&lt;ul>
&lt;li>docker-machine create&lt;/li>
&lt;li>docker user&amp;amp;passwd&lt;/li>
&lt;li>docker container gdb problem&lt;/li>
&lt;/ul></description></item><item><title>nginx双向代理</title><link>https://caisong.github.io/posts/nginx%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B/</link><pubDate>Mon, 23 Sep 2024 21:41:15 +0800</pubDate><guid>https://caisong.github.io/posts/nginx%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B/</guid><description>&lt;p>使用nginx当双向代理&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-nginx" data-lang="nginx">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">server{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">server_name&lt;/span> &lt;span style="color:#ae81ff">10&lt;/span>&lt;span style="color:#e6db74">.10.110.10&lt;/span> &lt;span style="color:#e6db74">ssl&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">listen&lt;/span> &lt;span style="color:#ae81ff">16002&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">ssl_certificate&lt;/span> &lt;span style="color:#e6db74">/path/to/your_certificate.crt&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">ssl_certificate_key&lt;/span> &lt;span style="color:#e6db74">/path/to/your_private.key&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">ssl_protocols&lt;/span> &lt;span style="color:#e6db74">TLSv1.2&lt;/span> &lt;span style="color:#e6db74">TLSv1.3&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">ssl_ciphers&lt;/span> &lt;span style="color:#e6db74">HIGH:!aNULL:!MD5&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">ssl_session_cache&lt;/span> &lt;span style="color:#e6db74">shared:SSL:10m&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">ssl_session_timeout&lt;/span> &lt;span style="color:#ae81ff">10m&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">ssl_prefer_server_ciphers&lt;/span> &lt;span style="color:#66d9ef">on&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e"># 转发node --&amp;gt; center
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#66d9ef">location&lt;/span> &lt;span style="color:#e6db74">/webchat/openapi/v1&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#f92672">proxy_pass&lt;/span> &lt;span style="color:#e6db74">https://10.10.110.12:16002&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#f92672">proxy_set_header&lt;/span> &lt;span style="color:#e6db74">Host&lt;/span> $host;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#f92672">proxy_set_header&lt;/span> &lt;span style="color:#e6db74">X-Real-IP&lt;/span> $remote_addr;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#f92672">proxy_set_header&lt;/span> &lt;span style="color:#e6db74">X-Forwarded-For&lt;/span> $proxy_add_x_forwarded_for;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">proxy_set_header&lt;/span> &lt;span style="color:#e6db74">X-Forwarded-Proto&lt;/span> $scheme;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e"># center --&amp;gt; node	
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#66d9ef">location&lt;/span> &lt;span style="color:#e6db74">/webChatClient/openapi/v1&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#f92672">proxy_pass&lt;/span> &lt;span style="color:#e6db74">https://10.10.110.20:8123&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#f92672">proxy_set_header&lt;/span> &lt;span style="color:#e6db74">Host&lt;/span> $host;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#f92672">proxy_set_header&lt;/span> &lt;span style="color:#e6db74">X-Real-IP&lt;/span> $remote_addr;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#f92672">proxy_set_header&lt;/span> &lt;span style="color:#e6db74">X-Forwarded-For&lt;/span> $proxy_add_x_forwarded_for;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">proxy_set_header&lt;/span> &lt;span style="color:#e6db74">X-Forwarded-Proto&lt;/span> $scheme;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Golang数据库连接坑</title><link>https://caisong.github.io/posts/golang%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E5%9D%91/</link><pubDate>Fri, 30 Aug 2024 21:40:55 +0800</pubDate><guid>https://caisong.github.io/posts/golang%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E5%9D%91/</guid><description>&lt;p>golang 数据库连接坑&lt;/p>
&lt;ol>
&lt;li>sql.Open 只是解析了连接表达式，实际并未连接。验证是否能够连通，需要使用Ping操作&lt;/li>
&lt;li>queryRow实际也未执行查询，查询需要等到scan时才执行&lt;/li>
&lt;/ol></description></item><item><title>Nginx同时代理grpc和https</title><link>https://caisong.github.io/posts/nginx%E4%BB%A3%E7%90%86grpchttps/</link><pubDate>Wed, 28 Aug 2024 21:42:16 +0800</pubDate><guid>https://caisong.github.io/posts/nginx%E4%BB%A3%E7%90%86grpchttps/</guid><description>&lt;p>nginx 同时代理grpc和https 。基于&lt;code>grpc&lt;/code>创建了服务端和客户端，使用&lt;code>echo&lt;/code>创建了https服务器，nginx分别代理&lt;code>grpc&lt;/code>请求和&lt;code>https&lt;/code>请求。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;ul>
&lt;li>TLS证书&lt;/li>
&lt;li>GRPC&lt;/li>
&lt;li>https&lt;/li>
&lt;li>nginx代理&lt;/li>
&lt;/ul>
&lt;h2 id="tls证书">tls证书&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>openssl req -new -x509 -nodes -days &lt;span style="color:#ae81ff">365&lt;/span> -newkey rsa:2048 -keyout key.pem -out cert.pem -subj &lt;span style="color:#e6db74">&amp;#34;/CN=10.1.19.100&amp;#34;&lt;/span> -addext &lt;span style="color:#e6db74">&amp;#34;subjectAltName=IP:10.1.19.100&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="grpc">grpc&lt;/h2>
&lt;h3 id="消息">消息&lt;/h3>
&lt;ol>
&lt;li>proto文件&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-plain" data-lang="plain">&lt;span style="display:flex;">&lt;span>syntax = &amp;#34;proto3&amp;#34;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>// 根据自己module name写就行，然后直接拷贝过去
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>option go_package = &amp;#34;mygrpc/message/helloworld&amp;#34;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>// 官方示例里没注释，不过对go应该也没啥作用
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>//option java_multiple_files = true;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>//option java_package = &amp;#34;io.grpc.examples.helloworld&amp;#34;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>//option java_outer_classname = &amp;#34;HelloWorldProto&amp;#34;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>package helloworld;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>// The greeting service definition.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>service Greeter {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> // Sends a greeting
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rpc SayHello (HelloRequest) returns (HelloReply) {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>// The request message containing the user&amp;#39;s name.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>message HelloRequest {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> string name = 1;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>// The response message containing the greetings
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>message HelloReply {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> string message = 1;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>代码生成&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo apt install rotoc-gen-go protoc-gen-go-grpc
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 生成&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>protoc --go_out&lt;span style="color:#f92672">=&lt;/span>. --go-grpc_out&lt;span style="color:#f92672">=&lt;/span>. ./helloworld.proto 
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="服务端">服务端&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;context&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;net&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;flag&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">pb&lt;/span> &lt;span style="color:#e6db74">&amp;#34;mygrpc/message/helloworld&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;google.golang.org/grpc&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;google.golang.org/grpc/credentials&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">#&lt;/span>&lt;span style="color:#e6db74">&amp;#34;google.golang.org/grpc/interceptor&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">type&lt;/span> &lt;span style="color:#a6e22e">server&lt;/span> &lt;span style="color:#66d9ef">struct&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">pb&lt;/span>.&lt;span style="color:#a6e22e">UnimplementedGreeterServer&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> (&lt;span style="color:#a6e22e">s&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">server&lt;/span>) &lt;span style="color:#a6e22e">SayHello&lt;/span>(&lt;span style="color:#a6e22e">ctx&lt;/span> &lt;span style="color:#a6e22e">context&lt;/span>.&lt;span style="color:#a6e22e">Context&lt;/span>, &lt;span style="color:#a6e22e">req&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">pb&lt;/span>.&lt;span style="color:#a6e22e">HelloRequest&lt;/span>) (&lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">pb&lt;/span>.&lt;span style="color:#a6e22e">HelloReply&lt;/span>, &lt;span style="color:#66d9ef">error&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#f92672">&amp;amp;&lt;/span>&lt;span style="color:#a6e22e">pb&lt;/span>.&lt;span style="color:#a6e22e">HelloReply&lt;/span>{&lt;span style="color:#a6e22e">Message&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Hello &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#a6e22e">req&lt;/span>.&lt;span style="color:#a6e22e">Name&lt;/span>}, &lt;span style="color:#66d9ef">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">certFile&lt;/span>&lt;span style="color:#f92672">:=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;/data/code/grpc/cert.pem&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">keyFile&lt;/span>&lt;span style="color:#f92672">:=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;/data/code/grpc/key.pem&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">creds&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>&lt;span style="color:#f92672">:=&lt;/span>&lt;span style="color:#a6e22e">credentials&lt;/span>.&lt;span style="color:#a6e22e">NewServerTLSFromFile&lt;/span>(&lt;span style="color:#a6e22e">certFile&lt;/span>, &lt;span style="color:#a6e22e">keyFile&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span>&lt;span style="color:#f92672">!=&lt;/span>&lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Fatalf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Failed to generated credentials: %v&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">grpcServer&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">grpc&lt;/span>.&lt;span style="color:#a6e22e">NewServer&lt;/span>(&lt;span style="color:#a6e22e">grpc&lt;/span>.&lt;span style="color:#a6e22e">Creds&lt;/span>(&lt;span style="color:#a6e22e">creds&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// 注册 Greeter 服务
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#a6e22e">pb&lt;/span>.&lt;span style="color:#a6e22e">RegisterGreeterServer&lt;/span>(&lt;span style="color:#a6e22e">grpcServer&lt;/span>, &lt;span style="color:#f92672">&amp;amp;&lt;/span>&lt;span style="color:#a6e22e">server&lt;/span>{})
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">var&lt;/span> &lt;span style="color:#a6e22e">port&lt;/span> &lt;span style="color:#66d9ef">int&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">flag&lt;/span>.&lt;span style="color:#a6e22e">IntVar&lt;/span>(&lt;span style="color:#f92672">&amp;amp;&lt;/span>&lt;span style="color:#a6e22e">port&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;port&amp;#34;&lt;/span>, &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;listten port&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">flag&lt;/span>.&lt;span style="color:#a6e22e">Parse&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// 监听端口
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#a6e22e">listener&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">net&lt;/span>.&lt;span style="color:#a6e22e">Listen&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;tcp&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">fmt&lt;/span>.&lt;span style="color:#a6e22e">Sprintf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;:%d&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">port&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Fatalf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Failed to listen on port %d: %v&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">port&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// 启动 gRPC 服务器
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Println&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;gRPC server is listening on port&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">port&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">grpcServer&lt;/span>.&lt;span style="color:#a6e22e">Serve&lt;/span>(&lt;span style="color:#a6e22e">listener&lt;/span>); &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Fatalf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Failed to serve: %v&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="客户端">客户端&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span> 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;context&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;google.golang.org/grpc&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;google.golang.org/grpc/credentials&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">pb&lt;/span> &lt;span style="color:#e6db74">&amp;#34;grpcclient/message/helloworld&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">certFile&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;/data/code/grpc/cert.pem&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">creds&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>&lt;span style="color:#f92672">:=&lt;/span>&lt;span style="color:#a6e22e">credentials&lt;/span>.&lt;span style="color:#a6e22e">NewClientTLSFromFile&lt;/span>(&lt;span style="color:#a6e22e">certFile&lt;/span>,&lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span>&lt;span style="color:#f92672">!=&lt;/span>&lt;span style="color:#66d9ef">nil&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Fatalf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Failed to load credentials %v&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">conn&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>&lt;span style="color:#f92672">:=&lt;/span>&lt;span style="color:#a6e22e">grpc&lt;/span>.&lt;span style="color:#a6e22e">Dial&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;10.1.19.100:443&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">grpc&lt;/span>.&lt;span style="color:#a6e22e">WithTransportCredentials&lt;/span>(&lt;span style="color:#a6e22e">creds&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span>&lt;span style="color:#f92672">!=&lt;/span>&lt;span style="color:#66d9ef">nil&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Fatalf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Faield to connect %v&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">defer&lt;/span> &lt;span style="color:#a6e22e">conn&lt;/span>.&lt;span style="color:#a6e22e">Close&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">client&lt;/span>&lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">pb&lt;/span>.&lt;span style="color:#a6e22e">NewGreeterClient&lt;/span>(&lt;span style="color:#a6e22e">conn&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">resp&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>&lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">client&lt;/span>.&lt;span style="color:#a6e22e">SayHello&lt;/span>(&lt;span style="color:#a6e22e">context&lt;/span>.&lt;span style="color:#a6e22e">Background&lt;/span>(), &lt;span style="color:#f92672">&amp;amp;&lt;/span>&lt;span style="color:#a6e22e">pb&lt;/span>.&lt;span style="color:#a6e22e">HelloRequest&lt;/span>{&lt;span style="color:#a6e22e">Name&lt;/span>:&lt;span style="color:#e6db74">&amp;#34;grpc&amp;#34;&lt;/span>})
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span>&lt;span style="color:#f92672">!=&lt;/span>&lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Fatalf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Faield to say hello %v&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Printf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Response %s&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">resp&lt;/span>.&lt;span style="color:#a6e22e">Message&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="https">https&lt;/h2>
&lt;h3 id="服务端-1">服务端&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;flag&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;github.com/labstack/echo/v4&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>(){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">e&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">echo&lt;/span>.&lt;span style="color:#a6e22e">New&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">var&lt;/span> &lt;span style="color:#a6e22e">port&lt;/span> &lt;span style="color:#66d9ef">int&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">flag&lt;/span>.&lt;span style="color:#a6e22e">IntVar&lt;/span>(&lt;span style="color:#f92672">&amp;amp;&lt;/span>&lt;span style="color:#a6e22e">port&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;port&amp;#34;&lt;/span>, &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;listen port&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">flag&lt;/span>.&lt;span style="color:#a6e22e">Parse&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">e&lt;/span>.&lt;span style="color:#a6e22e">GET&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;/h/&amp;#34;&lt;/span>, &lt;span style="color:#66d9ef">func&lt;/span>(&lt;span style="color:#a6e22e">c&lt;/span> &lt;span style="color:#a6e22e">echo&lt;/span>.&lt;span style="color:#a6e22e">Context&lt;/span>) &lt;span style="color:#66d9ef">error&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#a6e22e">c&lt;/span>.&lt;span style="color:#a6e22e">String&lt;/span>(&lt;span style="color:#a6e22e">http&lt;/span>.&lt;span style="color:#a6e22e">StatusOK&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Hello, Https World&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> })
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">e&lt;/span>.&lt;span style="color:#a6e22e">StartTLS&lt;/span>(&lt;span style="color:#a6e22e">fmt&lt;/span>.&lt;span style="color:#a6e22e">Sprintf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;:%d&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">port&lt;/span>), &lt;span style="color:#e6db74">&amp;#34;/data/code/grpc/cert.pem&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;/data/code/grpc/key.pem&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span>&lt;span style="color:#f92672">!=&lt;/span>&lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Fatalf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;failed to start server: %v&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="nginx代理">nginx代理&lt;/h2>
&lt;p>原来想给grpc添加前缀的，但是grpc添加前缀有点麻烦，就给http添加前缀了。&lt;/p></description></item><item><title>自签证书</title><link>https://caisong.github.io/posts/%E8%87%AA%E7%AD%BE%E8%AF%81%E4%B9%A6/</link><pubDate>Wed, 28 Aug 2024 21:41:55 +0800</pubDate><guid>https://caisong.github.io/posts/%E8%87%AA%E7%AD%BE%E8%AF%81%E4%B9%A6/</guid><description>&lt;h2 id="自签证书">自签证书&lt;/h2>
&lt;ol>
&lt;li>生成server的私钥&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>openssl genrsa -out server.key &lt;span style="color:#ae81ff">2048&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>生成自己签名证书&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>openssl req -x509 -new -nodes -key server.key -subj &lt;span style="color:#e6db74">&amp;#34;/CN=localhost&amp;#34;&lt;/span> -addext &lt;span style="color:#e6db74">&amp;#34;subjectAltName=DNS:localhost&amp;#34;&lt;/span> -days &lt;span style="color:#ae81ff">3650&lt;/span> -out server.crt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ca签发证书">CA签发证书&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>生成ca证书，流程与自签证书相同&lt;/p>
&lt;/li>
&lt;li>
&lt;p>生成server的私钥&lt;/p>
&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>openssl genrsa -out server.key &lt;span style="color:#ae81ff">2048&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="3">
&lt;li>根据配置文件csr.conf和私钥，生成证书签名请求csr&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>openssl req -new -key server.key -config csr.conf -out server.csr
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="4">
&lt;li>CA签名&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>openssl x509 -req -in server.csr -CA ca.crt -CAKey ca.key -CAcreateserial -days &lt;span style="color:#ae81ff">365&lt;/span> -out server.crt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>使用工厂模式创建db对象</title><link>https://caisong.github.io/posts/1.%E4%BD%BF%E7%94%A8%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E5%88%9B%E5%BB%BAdb%E5%AF%B9%E8%B1%A1/</link><pubDate>Wed, 31 Jul 2024 21:42:03 +0800</pubDate><guid>https://caisong.github.io/posts/1.%E4%BD%BF%E7%94%A8%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E5%88%9B%E5%BB%BAdb%E5%AF%B9%E8%B1%A1/</guid><description>&lt;p>Cut out summary from your post content here.&lt;/p></description></item><item><title>Golang template</title><link>https://caisong.github.io/posts/golangtemplate/</link><pubDate>Mon, 29 Jul 2024 21:40:54 +0800</pubDate><guid>https://caisong.github.io/posts/golangtemplate/</guid><description>&lt;p>golang 使用 template 生成检测文件，检测DB连接&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-golang" data-lang="golang">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">//模板文件
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>{{&lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#66d9ef">range&lt;/span> . }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">host&lt;/span>: {{ .&lt;span style="color:#a6e22e">Host&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{&lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">eq&lt;/span> .&lt;span style="color:#a6e22e">Category&lt;/span> &lt;span style="color:#e6db74">&amp;#34;DataBase&amp;#34;&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{&lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">eq&lt;/span> .&lt;span style="color:#a6e22e">Role&lt;/span> &lt;span style="color:#e6db74">&amp;#34;PostgreSQL&amp;#34;&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">task&lt;/span>: &lt;span style="color:#a6e22e">check&lt;/span> &lt;span style="color:#a6e22e">postgresql&lt;/span> &lt;span style="color:#a6e22e">connection&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">cmd&lt;/span>.&lt;span style="color:#a6e22e">database&lt;/span>.&lt;span style="color:#a6e22e">dbtool&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">name&lt;/span>: &lt;span style="color:#a6e22e">pg&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">args&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">port&lt;/span>: {{ .&lt;span style="color:#a6e22e">DBPort&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">user&lt;/span>: {{ .&lt;span style="color:#a6e22e">DBUser&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">passwd&lt;/span>: {{ .&lt;span style="color:#a6e22e">DBPasswd&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">dbname&lt;/span> : {{ .&lt;span style="color:#a6e22e">DBName&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{&lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#66d9ef">else&lt;/span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">eq&lt;/span> .&lt;span style="color:#a6e22e">Role&lt;/span> &lt;span style="color:#e6db74">&amp;#34;MongoDB&amp;#34;&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">task&lt;/span>: &lt;span style="color:#a6e22e">check&lt;/span> &lt;span style="color:#a6e22e">mongodb&lt;/span> &lt;span style="color:#a6e22e">connection&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">cmd&lt;/span>.&lt;span style="color:#a6e22e">database&lt;/span>.&lt;span style="color:#a6e22e">dbtool&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">name&lt;/span>: &lt;span style="color:#a6e22e">mongo&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">args&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">port&lt;/span>: {{ .&lt;span style="color:#a6e22e">DBPort&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">user&lt;/span>: {{ .&lt;span style="color:#a6e22e">DBUser&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">passwd&lt;/span>: {{ .&lt;span style="color:#a6e22e">DBPasswd&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{&lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#66d9ef">else&lt;/span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">eq&lt;/span> .&lt;span style="color:#a6e22e">Role&lt;/span> &lt;span style="color:#e6db74">&amp;#34;Redis&amp;#34;&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">task&lt;/span>: &lt;span style="color:#a6e22e">check&lt;/span> &lt;span style="color:#a6e22e">redis&lt;/span> &lt;span style="color:#a6e22e">connection&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">cmd&lt;/span>.&lt;span style="color:#a6e22e">database&lt;/span>.&lt;span style="color:#a6e22e">dbtool&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">name&lt;/span>: &lt;span style="color:#a6e22e">redis&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">args&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">port&lt;/span>: {{ .&lt;span style="color:#a6e22e">DBPort&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">passwd&lt;/span>: {{ .&lt;span style="color:#a6e22e">DBPasswd&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{&lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#a6e22e">end&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{&lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#a6e22e">end&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{&lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">eq&lt;/span> .&lt;span style="color:#a6e22e">Category&lt;/span> &lt;span style="color:#e6db74">&amp;#34;Server&amp;#34;&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{&lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">eq&lt;/span> .&lt;span style="color:#a6e22e">Role&lt;/span> &lt;span style="color:#e6db74">&amp;#34;app1&amp;#34;&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">task&lt;/span>: &lt;span style="color:#a6e22e">check&lt;/span> &lt;span style="color:#a6e22e">fdp&lt;/span> &lt;span style="color:#a6e22e">server&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">cmd&lt;/span>.&lt;span style="color:#a6e22e">server&lt;/span>.&lt;span style="color:#a6e22e">tool&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">name&lt;/span>: &lt;span style="color:#a6e22e">fdp&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">args&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#a6e22e">arg1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#a6e22e">arg2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{&lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#a6e22e">end&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{&lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#a6e22e">end&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{&lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">eq&lt;/span> .&lt;span style="color:#a6e22e">Category&lt;/span> &lt;span style="color:#e6db74">&amp;#34;Web&amp;#34;&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{&lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">eq&lt;/span> .&lt;span style="color:#a6e22e">Role&lt;/span> &lt;span style="color:#e6db74">&amp;#34;app2&amp;#34;&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">task&lt;/span>: &lt;span style="color:#a6e22e">check&lt;/span> &lt;span style="color:#a6e22e">full&lt;/span> &lt;span style="color:#a6e22e">text&lt;/span> &lt;span style="color:#a6e22e">web&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">cmd&lt;/span>.&lt;span style="color:#a6e22e">web&lt;/span>.&lt;span style="color:#a6e22e">tool&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">name&lt;/span>: &lt;span style="color:#a6e22e">fulltext&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">args&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{&lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#a6e22e">end&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{&lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#a6e22e">end&lt;/span> }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{{&lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#a6e22e">end&lt;/span> }}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-golang" data-lang="golang">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;text/template&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">type&lt;/span> &lt;span style="color:#a6e22e">RoleInfo&lt;/span> &lt;span style="color:#66d9ef">struct&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">Role&lt;/span>, &lt;span style="color:#a6e22e">Category&lt;/span>, &lt;span style="color:#a6e22e">DBName&lt;/span>, &lt;span style="color:#a6e22e">Host&lt;/span>, &lt;span style="color:#a6e22e">DBPort&lt;/span>, &lt;span style="color:#a6e22e">DBUser&lt;/span>, &lt;span style="color:#a6e22e">DBPasswd&lt;/span> &lt;span style="color:#66d9ef">string&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">SshRequired&lt;/span>, &lt;span style="color:#a6e22e">SudoRequired&lt;/span>, &lt;span style="color:#a6e22e">FudeRequired&lt;/span>, &lt;span style="color:#a6e22e">InstallRequired&lt;/span> &lt;span style="color:#66d9ef">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">SetFlags&lt;/span>(&lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Lshortfile&lt;/span> | &lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Ltime&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">roles&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> []&lt;span style="color:#a6e22e">RoleInfo&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 	{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 		&lt;span style="color:#e6db74">&amp;#34;PostgreSQL&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;DataBase&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;postgres&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;172.16.10.21&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 		&lt;span style="color:#e6db74">&amp;#34;5432&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;postgres&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;123456&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 		&lt;span style="color:#66d9ef">true&lt;/span>, &lt;span style="color:#66d9ef">true&lt;/span>, &lt;span style="color:#66d9ef">true&lt;/span>, &lt;span style="color:#66d9ef">false&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 	},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 	{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 		&lt;span style="color:#e6db74">&amp;#34;MongoDB&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;DataBase&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;test&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;172.16.10.22&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 		&lt;span style="color:#e6db74">&amp;#34;27017&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;mongo&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;123456&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 		&lt;span style="color:#66d9ef">true&lt;/span>, &lt;span style="color:#66d9ef">true&lt;/span>, &lt;span style="color:#66d9ef">false&lt;/span>, &lt;span style="color:#66d9ef">false&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 	},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 	{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 		&lt;span style="color:#e6db74">&amp;#34;Redis&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;DataBase&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;172.16.10.23&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 		&lt;span style="color:#e6db74">&amp;#34;6379&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;123456&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 		&lt;span style="color:#66d9ef">true&lt;/span>, &lt;span style="color:#66d9ef">false&lt;/span>, &lt;span style="color:#66d9ef">false&lt;/span>, &lt;span style="color:#66d9ef">false&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 	},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 	{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 		&lt;span style="color:#e6db74">&amp;#34;app1&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Server&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;172.16.10.31&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 		&lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 		&lt;span style="color:#66d9ef">true&lt;/span>, &lt;span style="color:#66d9ef">true&lt;/span>, &lt;span style="color:#66d9ef">false&lt;/span>, &lt;span style="color:#66d9ef">false&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 	},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 	{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 		&lt;span style="color:#e6db74">&amp;#34;app2&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Web&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;172.16.10.41&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 		&lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 		&lt;span style="color:#66d9ef">true&lt;/span>, &lt;span style="color:#66d9ef">true&lt;/span>, &lt;span style="color:#66d9ef">true&lt;/span>, &lt;span style="color:#66d9ef">true&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 	},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">tmpl&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">template&lt;/span>.&lt;span style="color:#a6e22e">ParseFiles&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;task.tpl&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 	&lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Fatal&lt;/span>(&lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">err&lt;/span> = &lt;span style="color:#a6e22e">tmpl&lt;/span>.&lt;span style="color:#a6e22e">Execute&lt;/span>(&lt;span style="color:#a6e22e">os&lt;/span>.&lt;span style="color:#a6e22e">Stdout&lt;/span>, &lt;span style="color:#a6e22e">roles&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 	&lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Fatal&lt;/span>(&lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>QML简单记录</title><link>https://caisong.github.io/posts/qml%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/</link><pubDate>Tue, 23 Jul 2024 21:42:19 +0800</pubDate><guid>https://caisong.github.io/posts/qml%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/</guid><description>&lt;p>QML 简单记录&lt;/p>
&lt;p>显示风车旋转&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-qml" data-lang="qml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">import&lt;/span> &lt;span style="color:#a6e22e">QtQuick&lt;/span> &lt;span style="color:#ae81ff">2.12&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">import&lt;/span> &lt;span style="color:#a6e22e">QtQuick&lt;/span>.&lt;span style="color:#a6e22e">Window&lt;/span> &lt;span style="color:#ae81ff">2.12&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Window&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">Image&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">id:background&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">source:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;qrc:/background.png&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">Image&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">id:wheel&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">anchors.centerIn:&lt;/span> &lt;span style="color:#a6e22e">parent&lt;/span> &lt;span style="color:#75715e">//居中
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">source:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;qrc:/pinwheel.png&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">Behavior&lt;/span> &lt;span style="color:#a6e22e">on&lt;/span> &lt;span style="color:#a6e22e">rotation&lt;/span> { &lt;span style="color:#75715e">// behavior on &amp;lt;prooerty&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#a6e22e">NumberAnimation&lt;/span> { &lt;span style="color:#75715e">// numberanimation 延迟动画
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">duration:&lt;/span> &lt;span style="color:#ae81ff">250&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">MouseArea&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">anchors.fill:&lt;/span> &lt;span style="color:#a6e22e">parent&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">onPressed:&lt;/span> { &lt;span style="color:#75715e">//事件
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#a6e22e">wheel&lt;/span>.&lt;span style="color:#a6e22e">rotation&lt;/span> &lt;span style="color:#f92672">+=&lt;/span> &lt;span style="color:#ae81ff">90&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">visible:&lt;/span> &lt;span style="color:#66d9ef">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">width:&lt;/span> &lt;span style="color:#a6e22e">background&lt;/span>.&lt;span style="color:#a6e22e">width&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">height:&lt;/span> &lt;span style="color:#a6e22e">background&lt;/span>.&lt;span style="color:#a6e22e">height&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">title:&lt;/span> &lt;span style="color:#a6e22e">qsTr&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Hello World&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>
&lt;p>ubuntu使用quick时，&lt;code>Unknown module(s) in QT: qml quick&lt;/code> &lt;br>
安装开发包&lt;code>qtdeclarative5-dev&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>问题 module &amp;ldquo;QtQuick.Controls&amp;rdquo; version 2.12 is not installed&lt;br>
安装&lt;code>qml-module-qtquick-controls2&lt;/code>&lt;/p></description></item><item><title>golang 编译动态参数</title><link>https://caisong.github.io/posts/golang%E6%9D%A1%E4%BB%B6%E7%BC%96%E8%AF%91/</link><pubDate>Mon, 22 Jul 2024 21:40:55 +0800</pubDate><guid>https://caisong.github.io/posts/golang%E6%9D%A1%E4%BB%B6%E7%BC%96%E8%AF%91/</guid><description>&lt;p>golang 编译时指定变量值&lt;/p></description></item><item><title>DockerDB容器启动环境变量</title><link>https://caisong.github.io/posts/dockerdb%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/</link><pubDate>Mon, 22 Jul 2024 21:40:38 +0800</pubDate><guid>https://caisong.github.io/posts/dockerdb%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/</guid><description>&lt;p>Cut out summary from your post content here.&lt;/p></description></item><item><title>QT网络操作</title><link>https://caisong.github.io/posts/qt%E6%93%8D%E4%BD%9C/</link><pubDate>Thu, 18 Jul 2024 21:42:20 +0800</pubDate><guid>https://caisong.github.io/posts/qt%E6%93%8D%E4%BD%9C/</guid><description>&lt;p>真的好难用&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cpp" data-lang="cpp">&lt;span style="display:flex;">&lt;span> QString ctx &lt;span style="color:#f92672">=&lt;/span> QString(&lt;span style="color:#e6db74">&amp;#34;{&lt;/span>&lt;span style="color:#ae81ff">\&amp;#34;&lt;/span>&lt;span style="color:#e6db74">name&lt;/span>&lt;span style="color:#ae81ff">\&amp;#34;&lt;/span>&lt;span style="color:#e6db74">:&lt;/span>&lt;span style="color:#ae81ff">\&amp;#34;&lt;/span>&lt;span style="color:#e6db74">%1&lt;/span>&lt;span style="color:#ae81ff">\&amp;#34;&lt;/span>&lt;span style="color:#e6db74">, &lt;/span>&lt;span style="color:#ae81ff">\&amp;#34;&lt;/span>&lt;span style="color:#e6db74">message&lt;/span>&lt;span style="color:#ae81ff">\&amp;#34;&lt;/span>&lt;span style="color:#e6db74">:&lt;/span>&lt;span style="color:#ae81ff">\&amp;#34;&lt;/span>&lt;span style="color:#e6db74">%2&lt;/span>&lt;span style="color:#ae81ff">\&amp;#34;&lt;/span>&lt;span style="color:#e6db74">}&amp;#34;&lt;/span>).arg(name).arg(message&lt;span style="color:#f92672">-&amp;gt;&lt;/span>text());
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> qDebug() &lt;span style="color:#f92672">&amp;lt;&amp;lt;&lt;/span> ctx &lt;span style="color:#f92672">&amp;lt;&amp;lt;&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> QNetworkRequest request;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> request.setHeader(QNetworkRequest&lt;span style="color:#f92672">::&lt;/span>ContentTypeHeader, &lt;span style="color:#e6db74">&amp;#34;application/json&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> request.setUrl(QUrl(url));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> manager&lt;span style="color:#f92672">-&amp;gt;&lt;/span>post(request, ctx.toUtf8());
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cpp" data-lang="cpp">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">void&lt;/span> Widget&lt;span style="color:#f92672">::&lt;/span>replyFinished(QNetworkReply &lt;span style="color:#f92672">*&lt;/span>reply)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// 处理网络响应的代码
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">if&lt;/span> (reply&lt;span style="color:#f92672">-&amp;gt;&lt;/span>error() &lt;span style="color:#f92672">==&lt;/span> QNetworkReply&lt;span style="color:#f92672">::&lt;/span>NoError) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// 处理成功响应的情况
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">if&lt;/span>(reply&lt;span style="color:#f92672">-&amp;gt;&lt;/span>operation()&lt;span style="color:#f92672">==&lt;/span>QNetworkAccessManager&lt;span style="color:#f92672">::&lt;/span>GetOperation){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> QByteArray responseData &lt;span style="color:#f92672">=&lt;/span> reply&lt;span style="color:#f92672">-&amp;gt;&lt;/span>readAll();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> txt&lt;span style="color:#f92672">-&amp;gt;&lt;/span>appendPlainText(QString&lt;span style="color:#f92672">::&lt;/span>fromUtf8(responseData));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">else&lt;/span> &lt;span style="color:#a6e22e">if&lt;/span> (reply&lt;span style="color:#f92672">-&amp;gt;&lt;/span>operation() &lt;span style="color:#f92672">==&lt;/span> QNetworkAccessManager&lt;span style="color:#f92672">::&lt;/span>PostOperation){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> message&lt;span style="color:#f92672">-&amp;gt;&lt;/span>clear();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#66d9ef">else&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// 处理错误情况
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> qDebug() &lt;span style="color:#f92672">&amp;lt;&amp;lt;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;Network request error:&amp;#34;&lt;/span> &lt;span style="color:#f92672">&amp;lt;&amp;lt;&lt;/span> reply&lt;span style="color:#f92672">-&amp;gt;&lt;/span>errorString();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> reply&lt;span style="color:#f92672">-&amp;gt;&lt;/span>deleteLater(); &lt;span style="color:#75715e">// 释放资源
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cpp" data-lang="cpp">&lt;span style="display:flex;">&lt;span> manager &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">new&lt;/span> QNetworkAccessManager(&lt;span style="color:#66d9ef">this&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> connect(manager, &lt;span style="color:#f92672">&amp;amp;&lt;/span>QNetworkAccessManager&lt;span style="color:#f92672">::&lt;/span>finished, &lt;span style="color:#66d9ef">this&lt;/span>, &lt;span style="color:#f92672">&amp;amp;&lt;/span>Widget&lt;span style="color:#f92672">::&lt;/span>replyFinished);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> connect(message, &lt;span style="color:#f92672">&amp;amp;&lt;/span>QLineEdit&lt;span style="color:#f92672">::&lt;/span>returnPressed, &lt;span style="color:#66d9ef">this&lt;/span>, &lt;span style="color:#f92672">&amp;amp;&lt;/span>Widget&lt;span style="color:#f92672">::&lt;/span>send_message);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> QTimer &lt;span style="color:#f92672">*&lt;/span>timer &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">new&lt;/span> QTimer(&lt;span style="color:#66d9ef">this&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> connect(timer, &lt;span style="color:#f92672">&amp;amp;&lt;/span>QTimer&lt;span style="color:#f92672">::&lt;/span>timeout, &lt;span style="color:#66d9ef">this&lt;/span>, &lt;span style="color:#f92672">&amp;amp;&lt;/span>Widget&lt;span style="color:#f92672">::&lt;/span>display_message);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> timer&lt;span style="color:#f92672">-&amp;gt;&lt;/span>start(&lt;span style="color:#ae81ff">1000&lt;/span>);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Alpine vsftp搭建</title><link>https://caisong.github.io/posts/alpinevsftp%E6%90%AD%E5%BB%BA/</link><pubDate>Thu, 18 Jul 2024 21:42:06 +0800</pubDate><guid>https://caisong.github.io/posts/alpinevsftp%E6%90%AD%E5%BB%BA/</guid><description>&lt;p>alpine 搭建 vsftp 配置&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-ini" data-lang="ini">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">anonymous_enable&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">NO&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">dirmessage_enable&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">YES&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">xferlog_enable&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">YES&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">connect_from_port_20&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">YES&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">listen&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">YES&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">local_enable&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">YES&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">chroot_local_user&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">YES&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">allow_writeable_chroot&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">YES&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">background&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">NO&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">ftpd_banner&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">Welcome to FTP Server&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">dirmessage_enable&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">YES&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">max_clients&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">10&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">max_per_ip&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">5&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">write_enable&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">YES&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">local_umask&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">022&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">passwd_chroot_enable&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">yes&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">listen_ipv6&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">NO&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">seccomp_sandbox&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">NO&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">log_ftp_protocol&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">YES&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">xferlog_enable&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">YES&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">xferlog_std_format&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">NO&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">dual_log_enable&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">YES&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">xferlog_file&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">/var/log/vsftpd/xferlog.log&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">vsftpd_log_file&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">/var/log/vsftpd/vsftpd.log&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>创建用户&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>addgroup -S ftpuser
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>adduser -D -G ftpuser -h /home/vsftpd/ftpuser -s /bin/false ftpuser
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mkdir -p /home/vsftpd/ftpuser
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>chown -R ftpuser:ftpuser /home/vs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$FTP_USER&lt;span style="color:#e6db74">:&lt;/span>$FTP_PASS&lt;span style="color:#e6db74">&amp;#34;&lt;/span> | /usr/sbin/chpasswd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>启动服务&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>rc-service vsftpd start
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>连通性检测</title><link>https://caisong.github.io/posts/%E8%BF%9E%E9%80%9A%E6%80%A7%E6%A3%80%E6%B5%8B/</link><pubDate>Thu, 18 Jul 2024 21:41:50 +0800</pubDate><guid>https://caisong.github.io/posts/%E8%BF%9E%E9%80%9A%E6%80%A7%E6%A3%80%E6%B5%8B/</guid><description>&lt;p>不使用第三方工具直接tcp检测网络端口连通性&lt;/p></description></item><item><title>Salt docker cluster</title><link>https://caisong.github.io/posts/saltdockercluster/</link><pubDate>Tue, 16 Jul 2024 21:42:23 +0800</pubDate><guid>https://caisong.github.io/posts/saltdockercluster/</guid><description>&lt;p>salt docker cluster dockerfile&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">version&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;3&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">services&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">master&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">saltstack/salt&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">hostname&lt;/span>: &lt;span style="color:#ae81ff">salt-master&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">60080&lt;/span>:&lt;span style="color:#ae81ff">8000&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>: 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">SALT_MASTER_CONFIG={&amp;#34;netapi_enable_clients&amp;#34;:[&amp;#34;local&amp;#34;, &amp;#34;local_aysnc&amp;#34;, &amp;#34;local_batch&amp;#34;, &amp;#34;local_subset&amp;#34;, &amp;#34;runner&amp;#34;, &amp;#34;wheel&amp;#34;, &amp;#34;runner_async&amp;#34;], &amp;#34;file_roots&amp;#34;:{&amp;#34;base&amp;#34;:[&amp;#34;/srv/salt&amp;#34;], &amp;#34;formula&amp;#34;:[&amp;#34;/srv/formula/my-formula-0.0.2&amp;#34;]}}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./srv:/srv&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">backend&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">minion1&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">saltstack/salt&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">hostname&lt;/span>: &lt;span style="color:#ae81ff">minion1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">SALT_MINION_CONFIG={&amp;#34;master&amp;#34;:&amp;#34;salt-master&amp;#34;}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">backend&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">minion2&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">saltstack/salt&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">hostname&lt;/span>: &lt;span style="color:#ae81ff">minion2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">SALT_MINION_CONFIG={&amp;#34;master&amp;#34;:&amp;#34;salt-master&amp;#34;}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">backend&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">backend&lt;/span>:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>文件监听文件</title><link>https://caisong.github.io/posts/%E6%96%87%E4%BB%B6%E7%9B%91%E5%90%AC%E6%96%87%E4%BB%B6/</link><pubDate>Wed, 10 Jul 2024 21:42:32 +0800</pubDate><guid>https://caisong.github.io/posts/%E6%96%87%E4%BB%B6%E7%9B%91%E5%90%AC%E6%96%87%E4%BB%B6/</guid><description>&lt;p>文件服务器，支持监控文件变化，实现差量同步&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;path/filepath&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;strconv&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;sync&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;github.com/fsnotify/fsnotify&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#e6db74">&amp;#34;github.com/labstack/echo/v4&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// ChangeInfo represents information about a file change event
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">type&lt;/span> &lt;span style="color:#a6e22e">ChangeInfo&lt;/span> &lt;span style="color:#66d9ef">struct&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">Path&lt;/span> &lt;span style="color:#66d9ef">string&lt;/span> &lt;span style="color:#e6db74">`json:&amp;#34;path&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">Op&lt;/span> &lt;span style="color:#a6e22e">fsnotify&lt;/span>.&lt;span style="color:#a6e22e">Op&lt;/span> &lt;span style="color:#e6db74">`json:&amp;#34;type&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">Timestamp&lt;/span> &lt;span style="color:#a6e22e">time&lt;/span>.&lt;span style="color:#a6e22e">Time&lt;/span> &lt;span style="color:#e6db74">`json:&amp;#34;timestamp&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// DataStore stores the change events
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">type&lt;/span> &lt;span style="color:#a6e22e">DataStore&lt;/span> &lt;span style="color:#66d9ef">struct&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">sync&lt;/span>.&lt;span style="color:#a6e22e">Mutex&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">Changes&lt;/span> []&lt;span style="color:#a6e22e">ChangeInfo&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> &lt;span style="color:#a6e22e">NewDataStore&lt;/span>() &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">DataStore&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#f92672">&amp;amp;&lt;/span>&lt;span style="color:#a6e22e">DataStore&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">Changes&lt;/span>: make([]&lt;span style="color:#a6e22e">ChangeInfo&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> (&lt;span style="color:#a6e22e">ds&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">DataStore&lt;/span>) &lt;span style="color:#a6e22e">AddChange&lt;/span>(&lt;span style="color:#a6e22e">path&lt;/span> &lt;span style="color:#66d9ef">string&lt;/span>, &lt;span style="color:#a6e22e">op&lt;/span> &lt;span style="color:#a6e22e">fsnotify&lt;/span>.&lt;span style="color:#a6e22e">Op&lt;/span>, &lt;span style="color:#a6e22e">timestamp&lt;/span> &lt;span style="color:#a6e22e">time&lt;/span>.&lt;span style="color:#a6e22e">Time&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">ds&lt;/span>.&lt;span style="color:#a6e22e">Lock&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">defer&lt;/span> &lt;span style="color:#a6e22e">ds&lt;/span>.&lt;span style="color:#a6e22e">Unlock&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">ds&lt;/span>.&lt;span style="color:#a6e22e">Changes&lt;/span> = append(&lt;span style="color:#a6e22e">ds&lt;/span>.&lt;span style="color:#a6e22e">Changes&lt;/span>, &lt;span style="color:#a6e22e">ChangeInfo&lt;/span>{&lt;span style="color:#a6e22e">path&lt;/span>, &lt;span style="color:#a6e22e">op&lt;/span>, &lt;span style="color:#a6e22e">timestamp&lt;/span>})
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> (&lt;span style="color:#a6e22e">ds&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">DataStore&lt;/span>) &lt;span style="color:#a6e22e">DelChanges&lt;/span>(&lt;span style="color:#a6e22e">threshold&lt;/span> &lt;span style="color:#a6e22e">time&lt;/span>.&lt;span style="color:#a6e22e">Time&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">ds&lt;/span>.&lt;span style="color:#a6e22e">Lock&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">defer&lt;/span> &lt;span style="color:#a6e22e">ds&lt;/span>.&lt;span style="color:#a6e22e">Unlock&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">var&lt;/span> &lt;span style="color:#a6e22e">pos&lt;/span> &lt;span style="color:#66d9ef">int&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">for&lt;/span> &lt;span style="color:#a6e22e">idx&lt;/span>, &lt;span style="color:#a6e22e">item&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#66d9ef">range&lt;/span> &lt;span style="color:#a6e22e">ds&lt;/span>.&lt;span style="color:#a6e22e">Changes&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">item&lt;/span>.&lt;span style="color:#a6e22e">Timestamp&lt;/span>.&lt;span style="color:#a6e22e">After&lt;/span>(&lt;span style="color:#a6e22e">threshold&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#66d9ef">break&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">pos&lt;/span> = &lt;span style="color:#a6e22e">idx&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">ds&lt;/span>.&lt;span style="color:#a6e22e">Changes&lt;/span> = &lt;span style="color:#a6e22e">ds&lt;/span>.&lt;span style="color:#a6e22e">Changes&lt;/span>[&lt;span style="color:#a6e22e">pos&lt;/span>&lt;span style="color:#f92672">+&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>:]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> (&lt;span style="color:#a6e22e">ds&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">DataStore&lt;/span>) &lt;span style="color:#a6e22e">GetChangesSince&lt;/span>(&lt;span style="color:#a6e22e">since&lt;/span> &lt;span style="color:#a6e22e">time&lt;/span>.&lt;span style="color:#a6e22e">Time&lt;/span>) []&lt;span style="color:#a6e22e">ChangeInfo&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">ds&lt;/span>.&lt;span style="color:#a6e22e">Lock&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">defer&lt;/span> &lt;span style="color:#a6e22e">ds&lt;/span>.&lt;span style="color:#a6e22e">Unlock&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// var changes []ChangeInfo
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#66d9ef">var&lt;/span> &lt;span style="color:#a6e22e">pos&lt;/span> &lt;span style="color:#66d9ef">int&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">for&lt;/span> &lt;span style="color:#a6e22e">idx&lt;/span>, &lt;span style="color:#a6e22e">val&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#66d9ef">range&lt;/span> &lt;span style="color:#a6e22e">ds&lt;/span>.&lt;span style="color:#a6e22e">Changes&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Println&lt;/span>(&lt;span style="color:#a6e22e">since&lt;/span>, &lt;span style="color:#a6e22e">val&lt;/span>.&lt;span style="color:#a6e22e">Timestamp&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">val&lt;/span>.&lt;span style="color:#a6e22e">Timestamp&lt;/span>.&lt;span style="color:#a6e22e">After&lt;/span>(&lt;span style="color:#a6e22e">since&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#a6e22e">pos&lt;/span> = &lt;span style="color:#a6e22e">idx&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#66d9ef">break&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">changes&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">ds&lt;/span>.&lt;span style="color:#a6e22e">Changes&lt;/span>[&lt;span style="color:#a6e22e">pos&lt;/span>:]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// sort.Slice(changes, func(i, j int) bool {
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#75715e">// 	return changes[i].Timestamp.Before(changes[j].Timestamp)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#75715e">// })
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Println&lt;/span>(&lt;span style="color:#a6e22e">changes&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#a6e22e">changes&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> &lt;span style="color:#a6e22e">fsMonitor&lt;/span>(&lt;span style="color:#a6e22e">ds&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">DataStore&lt;/span>, &lt;span style="color:#a6e22e">dir&lt;/span> &lt;span style="color:#66d9ef">string&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">watcher&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">fsnotify&lt;/span>.&lt;span style="color:#a6e22e">NewWatcher&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Fatal&lt;/span>(&lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">defer&lt;/span> &lt;span style="color:#a6e22e">watcher&lt;/span>.&lt;span style="color:#a6e22e">Close&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">ticker&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">time&lt;/span>.&lt;span style="color:#a6e22e">NewTicker&lt;/span>(&lt;span style="color:#ae81ff">1&lt;/span> &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#a6e22e">time&lt;/span>.&lt;span style="color:#a6e22e">Hour&lt;/span>) &lt;span style="color:#75715e">// Adjust the cleanup interval as needed
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">go&lt;/span> &lt;span style="color:#66d9ef">func&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#66d9ef">for&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#66d9ef">select&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#66d9ef">case&lt;/span> &lt;span style="color:#a6e22e">event&lt;/span>, &lt;span style="color:#a6e22e">ok&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#f92672">&amp;lt;-&lt;/span>&lt;span style="color:#a6e22e">watcher&lt;/span>.&lt;span style="color:#a6e22e">Events&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				&lt;span style="color:#66d9ef">if&lt;/span> !&lt;span style="color:#a6e22e">ok&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>					&lt;span style="color:#66d9ef">return&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				&lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Println&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;event:&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">event&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">event&lt;/span>.&lt;span style="color:#a6e22e">Has&lt;/span>(&lt;span style="color:#a6e22e">fsnotify&lt;/span>.&lt;span style="color:#a6e22e">Write&lt;/span> | &lt;span style="color:#a6e22e">fsnotify&lt;/span>.&lt;span style="color:#a6e22e">Remove&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>					&lt;span style="color:#a6e22e">ds&lt;/span>.&lt;span style="color:#a6e22e">AddChange&lt;/span>(&lt;span style="color:#a6e22e">event&lt;/span>.&lt;span style="color:#a6e22e">String&lt;/span>(), &lt;span style="color:#a6e22e">event&lt;/span>.&lt;span style="color:#a6e22e">Op&lt;/span>, &lt;span style="color:#a6e22e">time&lt;/span>.&lt;span style="color:#a6e22e">Now&lt;/span>())
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#66d9ef">case&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span>, &lt;span style="color:#a6e22e">ok&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#f92672">&amp;lt;-&lt;/span>&lt;span style="color:#a6e22e">watcher&lt;/span>.&lt;span style="color:#a6e22e">Errors&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				&lt;span style="color:#66d9ef">if&lt;/span> !&lt;span style="color:#a6e22e">ok&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>					&lt;span style="color:#66d9ef">return&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				&lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Println&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;error:&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#75715e">// case &amp;lt;-time.After(2 * time.Second):
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>			&lt;span style="color:#75715e">// 	log.Println(&amp;#34;operation timed out&amp;#34;)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>			&lt;span style="color:#66d9ef">case&lt;/span> &lt;span style="color:#f92672">&amp;lt;-&lt;/span>&lt;span style="color:#a6e22e">ticker&lt;/span>.&lt;span style="color:#a6e22e">C&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				&lt;span style="color:#75715e">// Cleanup changes older than 7 days (adjust as needed)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>				&lt;span style="color:#a6e22e">threshold&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">time&lt;/span>.&lt;span style="color:#a6e22e">Now&lt;/span>().&lt;span style="color:#a6e22e">Add&lt;/span>(&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">24&lt;/span> &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#a6e22e">time&lt;/span>.&lt;span style="color:#a6e22e">Hour&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				&lt;span style="color:#a6e22e">ds&lt;/span>.&lt;span style="color:#a6e22e">DelChanges&lt;/span>(&lt;span style="color:#a6e22e">threshold&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				&lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Println&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Cleaned up old changes&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Println&lt;/span>(&lt;span style="color:#a6e22e">ds&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// Add a path.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#a6e22e">err&lt;/span> = &lt;span style="color:#a6e22e">watcher&lt;/span>.&lt;span style="color:#a6e22e">Add&lt;/span>(&lt;span style="color:#a6e22e">dir&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Fatal&lt;/span>(&lt;span style="color:#a6e22e">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// // Block main goroutine forever.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#f92672">&amp;lt;-&lt;/span>make(&lt;span style="color:#66d9ef">chan&lt;/span> &lt;span style="color:#66d9ef">struct&lt;/span>{})
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// Initialize fsnotify watcher
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// Initialize data store for changes
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#a6e22e">dataStore&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">NewDataStore&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// Define the directory to watch (replace with your directory path)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#a6e22e">dirToWatch&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;F:\\code&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">go&lt;/span> &lt;span style="color:#a6e22e">fsMonitor&lt;/span>(&lt;span style="color:#a6e22e">dataStore&lt;/span>, &lt;span style="color:#a6e22e">dirToWatch&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">// e.GET(&amp;#34;/users/:id&amp;#34;, getUser)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#75715e">// id := c.Param(&amp;#34;id&amp;#34;)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#75715e">// /show?team=x-men&amp;amp;member=wolverine
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>	&lt;span style="color:#75715e">// team := c.QueryParam(&amp;#34;team&amp;#34;)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">e&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">echo&lt;/span>.&lt;span style="color:#a6e22e">New&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">e&lt;/span>.&lt;span style="color:#a6e22e">GET&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;/changes/:since&amp;#34;&lt;/span>, &lt;span style="color:#66d9ef">func&lt;/span>(&lt;span style="color:#a6e22e">c&lt;/span> &lt;span style="color:#a6e22e">echo&lt;/span>.&lt;span style="color:#a6e22e">Context&lt;/span>) &lt;span style="color:#66d9ef">error&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">since&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">c&lt;/span>.&lt;span style="color:#a6e22e">Param&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;since&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Println&lt;/span>(&lt;span style="color:#a6e22e">since&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">ts&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">strconv&lt;/span>.&lt;span style="color:#a6e22e">ParseInt&lt;/span>(&lt;span style="color:#a6e22e">since&lt;/span>, &lt;span style="color:#ae81ff">10&lt;/span>, &lt;span style="color:#ae81ff">64&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#a6e22e">c&lt;/span>.&lt;span style="color:#a6e22e">JSON&lt;/span>(&lt;span style="color:#a6e22e">http&lt;/span>.&lt;span style="color:#a6e22e">StatusOK&lt;/span>, &lt;span style="color:#66d9ef">nil&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">log&lt;/span>.&lt;span style="color:#a6e22e">Println&lt;/span>(&lt;span style="color:#a6e22e">ts&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">changes&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">dataStore&lt;/span>.&lt;span style="color:#a6e22e">GetChangesSince&lt;/span>(&lt;span style="color:#a6e22e">time&lt;/span>.&lt;span style="color:#a6e22e">Unix&lt;/span>(&lt;span style="color:#a6e22e">ts&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#a6e22e">c&lt;/span>.&lt;span style="color:#a6e22e">JSON&lt;/span>(&lt;span style="color:#a6e22e">http&lt;/span>.&lt;span style="color:#a6e22e">StatusOK&lt;/span>, &lt;span style="color:#a6e22e">changes&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	})
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">e&lt;/span>.&lt;span style="color:#a6e22e">GET&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;/files/:path&amp;#34;&lt;/span>, &lt;span style="color:#66d9ef">func&lt;/span>(&lt;span style="color:#a6e22e">c&lt;/span> &lt;span style="color:#a6e22e">echo&lt;/span>.&lt;span style="color:#a6e22e">Context&lt;/span>) &lt;span style="color:#66d9ef">error&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">subpath&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">c&lt;/span>.&lt;span style="color:#a6e22e">Param&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;path&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#a6e22e">path&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">filepath&lt;/span>.&lt;span style="color:#a6e22e">Join&lt;/span>(&lt;span style="color:#a6e22e">dirToWatch&lt;/span>, &lt;span style="color:#a6e22e">subpath&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">_&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">os&lt;/span>.&lt;span style="color:#a6e22e">Stat&lt;/span>(&lt;span style="color:#a6e22e">path&lt;/span>); &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#a6e22e">c&lt;/span>.&lt;span style="color:#a6e22e">File&lt;/span>(&lt;span style="color:#a6e22e">path&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#a6e22e">c&lt;/span>.&lt;span style="color:#a6e22e">JSON&lt;/span>(&lt;span style="color:#a6e22e">http&lt;/span>.&lt;span style="color:#a6e22e">StatusNotFound&lt;/span>, &lt;span style="color:#66d9ef">nil&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	})
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">e&lt;/span>.&lt;span style="color:#a6e22e">Logger&lt;/span>.&lt;span style="color:#a6e22e">Fatal&lt;/span>(&lt;span style="color:#a6e22e">e&lt;/span>.&lt;span style="color:#a6e22e">Start&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;:1323&amp;#34;&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Nginx文件监听</title><link>https://caisong.github.io/posts/nginx%E6%96%87%E4%BB%B6%E7%9B%91%E5%90%AC/</link><pubDate>Tue, 09 Jul 2024 21:41:14 +0800</pubDate><guid>https://caisong.github.io/posts/nginx%E6%96%87%E4%BB%B6%E7%9B%91%E5%90%AC/</guid><description>&lt;ul>
&lt;li>在&lt;code>http&lt;/code>模块下配置&lt;code>init_by_lua_block &lt;/code>实现nginx启动时启动任务&lt;/li>
&lt;li>使用nginx.swapn&lt;/li>
&lt;/ul></description></item><item><title>Python hook</title><link>https://caisong.github.io/posts/pythonhook/</link><pubDate>Fri, 05 Jul 2024 21:41:20 +0800</pubDate><guid>https://caisong.github.io/posts/pythonhook/</guid><description>&lt;h2 id="python-hook">python hook&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># -*- coding: utf-8 -*-&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> sys
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> types
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> pathlib &lt;span style="color:#f92672">import&lt;/span> Path
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> importlib.machinery &lt;span style="color:#f92672">import&lt;/span> ModuleSpec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> importlib.abc &lt;span style="color:#f92672">import&lt;/span> MetaPathFinder, Loader
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># sys.path.insert(0, &amp;#39;module&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">class&lt;/span> &lt;span style="color:#a6e22e">DynamicLoader&lt;/span>(Loader):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">def&lt;/span> __init__(self, path):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> self&lt;span style="color:#f92672">.&lt;/span>__path &lt;span style="color:#f92672">=&lt;/span> path
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">create_module&lt;/span>(self, spec):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> module &lt;span style="color:#f92672">=&lt;/span> types&lt;span style="color:#f92672">.&lt;/span>ModuleType(spec&lt;span style="color:#f92672">.&lt;/span>name)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> module
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">exec_module&lt;/span>(self, module):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(self&lt;span style="color:#f92672">.&lt;/span>__path)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> source &lt;span style="color:#f92672">=&lt;/span> self&lt;span style="color:#f92672">.&lt;/span>__path&lt;span style="color:#f92672">.&lt;/span>read_bytes()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> exec(source, module&lt;span style="color:#f92672">.&lt;/span>__dict__)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">class&lt;/span> &lt;span style="color:#a6e22e">DynamicFinder&lt;/span>(MetaPathFinder):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> base_path &lt;span style="color:#f92672">=&lt;/span> Path(&lt;span style="color:#e6db74">&amp;#39;module&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">find_spec&lt;/span>(self, fullname, path, target&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">None&lt;/span>):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> fullname &lt;span style="color:#f92672">in&lt;/span> sys&lt;span style="color:#f92672">.&lt;/span>modules: 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> sys&lt;span style="color:#f92672">.&lt;/span>modules[fullname]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> self&lt;span style="color:#f92672">.&lt;/span>base_path&lt;span style="color:#f92672">.&lt;/span>joinpath(&lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#39;&lt;/span>&lt;span style="color:#e6db74">{&lt;/span>fullname&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">.py&amp;#39;&lt;/span>)&lt;span style="color:#f92672">.&lt;/span>exists():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> abs_path &lt;span style="color:#f92672">=&lt;/span> self&lt;span style="color:#f92672">.&lt;/span>base_path &lt;span style="color:#f92672">/&lt;/span> &lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#39;&lt;/span>&lt;span style="color:#e6db74">{&lt;/span>fullname&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">.py&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">elif&lt;/span> self&lt;span style="color:#f92672">.&lt;/span>base_path&lt;span style="color:#f92672">.&lt;/span>joinpath(fullname, &lt;span style="color:#e6db74">&amp;#39;__init__.py&amp;#39;&lt;/span>)&lt;span style="color:#f92672">.&lt;/span>exists():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> abs_path &lt;span style="color:#f92672">=&lt;/span> self&lt;span style="color:#f92672">.&lt;/span>base_path &lt;span style="color:#f92672">/&lt;/span> fullname &lt;span style="color:#f92672">/&lt;/span> &lt;span style="color:#e6db74">&amp;#39;__init__.py&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">else&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">None&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> ModuleSpec(&lt;span style="color:#e6db74">&amp;#39;msg&amp;#39;&lt;/span>, DynamicLoader(abs_path))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">dynamic_hook&lt;/span>(path):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> DynamicFinder()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sys&lt;span style="color:#f92672">.&lt;/span>meta_path&lt;span style="color:#f92672">.&lt;/span>append(DynamicFinder())
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#sys.path_hooks = [dynamic_hook]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sys&lt;span style="color:#f92672">.&lt;/span>path_importer_cache&lt;span style="color:#f92672">.&lt;/span>clear()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> __name__ &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#e6db74">&amp;#39;__main__&amp;#39;&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">import&lt;/span> msg
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(msg&lt;span style="color:#f92672">.&lt;/span>message(sys&lt;span style="color:#f92672">.&lt;/span>argv[&lt;span style="color:#ae81ff">1&lt;/span>]))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Podman 无守护进程模式</title><link>https://caisong.github.io/posts/podman%E7%9A%84%E6%97%A0%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%B8%BB%E8%A6%81%E4%BE%9D%E8%B5%96%E4%BB%A5%E4%B8%8B%E5%87%A0%E4%B8%AA%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF%E5%92%8C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF/</link><pubDate>Thu, 04 Jul 2024 21:42:17 +0800</pubDate><guid>https://caisong.github.io/posts/podman%E7%9A%84%E6%97%A0%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%B8%BB%E8%A6%81%E4%BE%9D%E8%B5%96%E4%BB%A5%E4%B8%8B%E5%87%A0%E4%B8%AA%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF%E5%92%8C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF/</guid><description>&lt;p>摘自于chatgpt&lt;/p>
&lt;p>Podman 的无守护进程模式实现主要依赖以下几个关键技术和设计思路：&lt;/p>
&lt;p>1.FIFO 文件与 API: Podman 使用一个 FIFO 文件（命名管道）作为与用户交互的接口。命令行工具和其他程序通过写入到这个 FIFO 文件来发送操作请求给 Podman。Podman 会读取这些请求并执行相应的容器管理操作。这种方式避免了常驻后台的守护进程，每次需要管理容器时，Podman 进程会被启动，并处理完请求后自行退出。
2.Systemd Socket Activation: Podman 可以利用 systemd 的 socket 激活机制来实现在无守护进程的情况下运行。当有请求到达 Podman 监听的 socket 时，systemd 会启动 Podman 进程来处理请求。处理完成后，Podman 进程会自行终止，从而避免了常驻后台的守护进程。
3.无需 Root 权限: Podman 的无守护进程模式还支持 Rootless 模式，即在无需 root 权限的情况下运行容器。这是通过使用用户命名空间、文件系统映射以及其他安全技术来实现的。Rootless 模式使得每个用户可以在自己的账户下启动和管理容器，而无需对整个系统有特权访问。
4.API 兼容性: Podman 的命令行接口与 Docker 兼容，这使得用户可以无需学习新的命令和操作方式，就可以在无守护进程模式下管理容器。Podman 使用的命名管道和 socket 机制确保了命令行操作的流畅性和高效性。&lt;/p>
&lt;p>综上所述，Podman 的无守护进程模式通过使用 FIFO 文件、systemd socket 激活、无需 Root 权限的支持以及与 Docker 兼容的 API 设计，实现了在无常驻后台守护进程的情况下有效管理容器的功能。这使得 Podman 在一些对安全性要求较高或不希望常驻守护进程的场景下具有很大的优势。&lt;/p></description></item><item><title>Docker内核</title><link>https://caisong.github.io/posts/docker%E5%AE%B9%E5%99%A8%E5%9F%BA%E4%BA%8E%E5%AE%BF%E4%B8%BB%E6%9C%BA%E5%86%85%E6%A0%B8%E5%AE%B9%E5%99%A8%E7%9A%84%E5%86%85%E6%A0%B8%E5%92%8C%E5%AE%BF%E4%B8%BB%E6%9C%BA%E7%9A%84%E5%86%85%E5%AE%B9%E7%9B%B8%E5%90%8C/</link><pubDate>Thu, 04 Jul 2024 21:42:10 +0800</pubDate><guid>https://caisong.github.io/posts/docker%E5%AE%B9%E5%99%A8%E5%9F%BA%E4%BA%8E%E5%AE%BF%E4%B8%BB%E6%9C%BA%E5%86%85%E6%A0%B8%E5%AE%B9%E5%99%A8%E7%9A%84%E5%86%85%E6%A0%B8%E5%92%8C%E5%AE%BF%E4%B8%BB%E6%9C%BA%E7%9A%84%E5%86%85%E5%AE%B9%E7%9B%B8%E5%90%8C/</guid><description>&lt;p>docker容器基于宿主机内核，容器的内核和宿主机的内容相同。&lt;/p></description></item><item><title>Opetelemetry web页面信息上报</title><link>https://caisong.github.io/posts/opetelemetry/</link><pubDate>Tue, 18 Jun 2024 21:41:16 +0800</pubDate><guid>https://caisong.github.io/posts/opetelemetry/</guid><description>&lt;p>opetelemetry目前还没有直接的web js的组件，尝试将nodejs的打包，实现页面的监控&lt;/p>
&lt;ul>
&lt;li>基于nodejs创建信息上报脚本&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-javascript" data-lang="javascript">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// auto.js
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">const&lt;/span> { &lt;span style="color:#a6e22e">WebTracerProvider&lt;/span> } &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">require&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;@opentelemetry/sdk-trace-web&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">const&lt;/span> { &lt;span style="color:#a6e22e">getWebAutoInstrumentations&lt;/span> } &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">require&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;@opentelemetry/auto-instrumentations-web&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// const { CollectorTraceExporter } = require(&amp;#39;@opentelemetry/exporter-collector&amp;#39;);
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// const { OTLPTraceExporter } = require(&amp;#39;@opentelemetry/exporter-trace-otlp-http&amp;#39;);
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">const&lt;/span> { &lt;span style="color:#a6e22e">ConsoleSpanExporter&lt;/span> } &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">require&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;@opentelemetry/sdk-trace-base&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">const&lt;/span> { &lt;span style="color:#a6e22e">SimpleSpanProcessor&lt;/span> } &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">require&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;@opentelemetry/sdk-trace-base&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">const&lt;/span> { &lt;span style="color:#a6e22e">registerInstrumentations&lt;/span> } &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">require&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;@opentelemetry/instrumentation&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">const&lt;/span> { &lt;span style="color:#a6e22e">ZoneContextManager&lt;/span> } &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">require&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;@opentelemetry/context-zone&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">const&lt;/span> { &lt;span style="color:#a6e22e">B3Propagator&lt;/span> } &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">require&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;@opentelemetry/propagator-b3&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#a6e22e">collectorOptions&lt;/span> &lt;span style="color:#f92672">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// url: &amp;#39;&amp;lt;opentelemetry-collector-url&amp;gt;&amp;#39;, // url is optional and can be omitted - default is http://localhost:4318/v1/traces
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#a6e22e">headers&lt;/span>&lt;span style="color:#f92672">:&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Content-Type&amp;#39;&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#39;application/json&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Access-Control-Allow-Origin&amp;#39;&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#39;*&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Access-Control-Allow-Methods&amp;#39;&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#39;GET, POST, OPTIONS&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Access-Control-Allow-Headers&amp;#39;&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#39;Content-Type, Authorization&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }, &lt;span style="color:#75715e">// an optional object containing custom headers to be sent with each request
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#a6e22e">concurrencyLimit&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#ae81ff">10&lt;/span>, &lt;span style="color:#75715e">// an optional limit on pending requests
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#a6e22e">exporter&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">new&lt;/span> &lt;span style="color:#a6e22e">ConsoleSpanExporter&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// const exporter = new OTLPTraceExporter(collectorOptions);
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#a6e22e">provider&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">new&lt;/span> &lt;span style="color:#a6e22e">WebTracerProvider&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">provider&lt;/span>.&lt;span style="color:#a6e22e">addSpanProcessor&lt;/span>(&lt;span style="color:#66d9ef">new&lt;/span> &lt;span style="color:#a6e22e">SimpleSpanProcessor&lt;/span>(&lt;span style="color:#a6e22e">exporter&lt;/span>));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">provider&lt;/span>.&lt;span style="color:#a6e22e">register&lt;/span>({
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">contextManager&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#66d9ef">new&lt;/span> &lt;span style="color:#a6e22e">ZoneContextManager&lt;/span>(),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">propagator&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#66d9ef">new&lt;/span> &lt;span style="color:#a6e22e">B3Propagator&lt;/span>(),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>});
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">registerInstrumentations&lt;/span>({
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">instrumentations&lt;/span>&lt;span style="color:#f92672">:&lt;/span> [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">getWebAutoInstrumentations&lt;/span>({
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// load custom configuration for xml-http-request instrumentation
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#e6db74">&amp;#39;@opentelemetry/instrumentation-xml-http-request&amp;#39;&lt;/span>&lt;span style="color:#f92672">:&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">clearTimingResources&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#66d9ef">true&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> },
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>});
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>nodejs 转 web js&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>npx browserify auto.js -o bundle-auto.js
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>jaeger 接收端&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>docker run --rm --name jaeger -p 6831:6831/udp -p 6832:6832/udp -p 5778:5778 -p 16686:16686 -p 4317:4317 -p 4318:4318 -p 14250:14250 -p 14268:14268 -p 14269:14269 -d jaegertracing/all-in-one
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>环境变量&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>export JAVA_TOOL_OPTIONS=&amp;#34;-javaagent:/data/software/opentelemetry-javaagent.jar&amp;#34; OTEL_TRACES_EXPORTER=logging OTEL_METRICS_EXPORTER=logging OTEL_LOGS_EXPORTER=logging OTEL_METRIC_EXPORT_INTERVAL=150000 OTEL_PROPAGATORS=b3multi OTEL_TRACES_SAMPLER=always_off
&lt;/code>&lt;/pre>&lt;p>&lt;strong>js使用&lt;code>propagate b3&lt;/code>将&lt;code>traceID&lt;/code>相关信息写在头文件中，java后端必须配置&lt;code>OTEL_PROPAGATORS=b3multi OTEL_TRACES_SAMPLER=always_off&lt;/code>环境变量才能获取&lt;/strong>&lt;/p></description></item><item><title>ELF 字段说明</title><link>https://caisong.github.io/posts/elfhttpshansimov.gitbook.iogitbooki/</link><pubDate>Wed, 05 Jun 2024 21:40:26 +0800</pubDate><guid>https://caisong.github.io/posts/elfhttpshansimov.gitbook.iogitbooki/</guid><description>&lt;p>Cut out summary from your post content here.&lt;/p></description></item><item><title>运维管理分发</title><link>https://caisong.github.io/posts/%E8%BF%90%E7%BB%B4%E7%AE%A1%E7%90%86%E5%88%86%E5%8F%91/</link><pubDate>Mon, 03 Jun 2024 21:41:53 +0800</pubDate><guid>https://caisong.github.io/posts/%E8%BF%90%E7%BB%B4%E7%AE%A1%E7%90%86%E5%88%86%E5%8F%91/</guid><description>&lt;p>运维分发工具,记录下。后期使用了再补充。&lt;/p></description></item><item><title>PXELiveCD</title><link>https://caisong.github.io/posts/pxelivecd/</link><pubDate>Wed, 22 May 2024 21:41:19 +0800</pubDate><guid>https://caisong.github.io/posts/pxelivecd/</guid><description>&lt;p>基于linux live cd 镜像，使用pxe批量安装&lt;/p>
&lt;h2 id="主要流程">主要流程&lt;/h2>
&lt;p>** 个人理解，不一定准确 **&lt;/p>
&lt;ol>
&lt;li>使用DHCP 引导入PXE&lt;/li>
&lt;li>PXE 使用tftp 引导syslinux？&lt;/li>
&lt;li>加载nfs或http的系统&lt;/li>
&lt;/ol>
&lt;h1 id="virtualbox环境配置">virtualbox环境配置&lt;/h1>
&lt;p>主要就是必须保证pxe server 和client在同一网段。（dhcp支持replay的忽略）
pxe server 使用两张网卡，一张nat用于下载包，一张内部网络
pxe client 使用一张网卡，使用内部网络。
也可以使用host-only模式，但是要关闭dhcp服务，因为pxe server要作为dhcp服务引导pxe。&lt;/p>
&lt;h2 id="注意事项">注意事项&lt;/h2>
&lt;ol>
&lt;li>关闭防火墙&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>systemctl stop firewalld
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>禁用selinux&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>setenforce &lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="部署流程">部署流程&lt;/h2>
&lt;ol>
&lt;li>安装tftp
&lt;strong>tftp支持xinet.d启动和systemctl启动，只能用一个，建议&lt;code>systemctl&lt;/code>&lt;/strong>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>dnf install tftp-server
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># tftp-server 路径挂载在/var/lib/tftpboot，服务路径使用systemctl status查看&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>pxe相关内容安装至tftp挂载路径&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 这个包直接建syslinux相关内容放在/tftpboot目录下了（出现过直接放在/var/lib/tftpboot的，自己查看下。最终都要拷贝到自己的挂载路径。）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dnf install syslinux-tftpboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>安装dhcp
&lt;code>dhcp&lt;/code>是引导pxe的关键，其实如果客户端使用ipxe，也能不使用&lt;code>dhcp&lt;/code>，目前还有&lt;code>uefi&lt;/code>的方式，暂未研究。
不用使用dnsmasq，没配置出来。&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>dnf install dhcpd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;pre tabindex="0">&lt;code class="language-conf" data-lang="conf">allow bootp;
allow booting;
max-lease-time 1200;
default-lease-time 900;
log-facility local7;

option ip-forwarding false;
option mask-supplier false;
#192.168.10.1 pxe server的ip
 subnet 192.168.10.0 netmask 255.255.255.0 {
 option routers 192.168.10.1;
 option domain-name-servers 127.0.0.1;
 range 192.168.10.100 192.168.10.200;
 next-server 192.168.10.1;
 filename &amp;#34;pxelinux.0&amp;#34;;
 }
&lt;/code>&lt;/pre>&lt;ol start="3">
&lt;li>安装httpd或nfs&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>dnf install httpd nfs-utils
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>httpd默认root目录是/var/www/html
想偷懒的，直接将iso镜像挂载到该目录。&lt;/p></description></item><item><title>CentOS 8网络安装源配置</title><link>https://caisong.github.io/posts/centos8%E7%BD%91%E7%BB%9C%E5%AE%89%E8%A3%85%E6%BA%90%E9%85%8D%E7%BD%AE/</link><pubDate>Sat, 18 May 2024 21:40:33 +0800</pubDate><guid>https://caisong.github.io/posts/centos8%E7%BD%91%E7%BB%9C%E5%AE%89%E8%A3%85%E6%BA%90%E9%85%8D%E7%BD%AE/</guid><description>&lt;p>CentOS 8 网络安装源配置&lt;/p>
&lt;p>&lt;a href="https://mirror.nju.edu.cn/centos/8-stream/BaseOS/aarch64/os/">https://mirror.nju.edu.cn/centos/8-stream/BaseOS/aarch64/os/&lt;/a>&lt;/p>
&lt;p>&lt;strong>不要远程使用brctl 添加网桥，会造成网络IP丢失，断开！！！！！！！！！！！&lt;/strong>&lt;/p></description></item><item><title>Pyspark ipython 设置</title><link>https://caisong.github.io/posts/pysparkipython%E8%AE%BE%E7%BD%AE/</link><pubDate>Fri, 12 Jan 2024 21:41:20 +0800</pubDate><guid>https://caisong.github.io/posts/pysparkipython%E8%AE%BE%E7%BD%AE/</guid><description>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>export JAVA_HOME&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;具体路径&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export SPARK_HOME&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;具体路径&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PYSPARK_DRIVER_PYTHON&lt;span style="color:#f92672">=&lt;/span>ipython3
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>source &lt;span style="color:#e6db74">${&lt;/span>venv&lt;span style="color:#e6db74">}&lt;/span>/bin/active
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>source &lt;span style="color:#e6db74">${&lt;/span>SPARK_HOME&lt;span style="color:#e6db74">}&lt;/span>/bin/pyspark
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>构建本地rust镜像</title><link>https://caisong.github.io/posts/romtrustup-v-sstable-tx86_64-pc-wi/</link><pubDate>Thu, 04 Jan 2024 21:42:21 +0800</pubDate><guid>https://caisong.github.io/posts/romtrustup-v-sstable-tx86_64-pc-wi/</guid><description>&lt;p>&lt;strong>别整，太麻烦了&lt;/strong>&lt;/p>
&lt;h2 id="制作">制作&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>romt rustup -v -s stable -t x86_64-pc-windows-gnu -t linux --url https://mirror.nju.edu.cn/rustup/rustup download
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 需要预先将日期目录内下载stable的toml和对应sha256验证文件&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>romt toolchain -v -s stable -t x86_64-pc-windows-gnu -t linux --url https://mirror.nju.edu.cn/rustup/dist --no-signature download
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>romt crate -v --index-url https://mirrors.aliyun.com/crates.io-index.git init
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>romt crate -v --keep-going --crates-url https://mirrors.aliyun.com/crates/api/v1/crates/&lt;span style="color:#f92672">{&lt;/span>crate&lt;span style="color:#f92672">}&lt;/span>/&lt;span style="color:#f92672">{&lt;/span>version&lt;span style="color:#f92672">}&lt;/span>/download update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#https://crates-io.proxy.ustclug.org/api/v1/crates&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#0e3b3b0db16628fc9644f46be8b6774bf8e6026f&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>romt crate -v --index-url https://mirrors.aliyun.com/crates.io-index.git init
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>可用镜像
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#https://mirrors.aliyun.com/crates.io-index.git&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#https://rsproxy.cn/crates.io-index&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>romt crate --index-url https://mirrors.aliyun.com/crates.io-index.git --crates-url https://mirrors.aliyun.com/crates/api/v1/crates/&lt;span style="color:#f92672">{&lt;/span>crate&lt;span style="color:#f92672">}&lt;/span>/&lt;span style="color:#f92672">{&lt;/span>version&lt;span style="color:#f92672">}&lt;/span>/download -v --keep-going export
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="部署">部署&lt;/h2>
&lt;p>镜像完成后导入、部署、使用&lt;/p></description></item><item><title>PowerShell 设置环境变量</title><link>https://caisong.github.io/posts/windows%E4%B8%8B%E5%AF%B9%E5%BA%94%E7%9A%84%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E7%9A%84powershell%E5%91%BD%E4%BB%A4%E4%B8%BA/</link><pubDate>Wed, 27 Dec 2023 21:42:28 +0800</pubDate><guid>https://caisong.github.io/posts/windows%E4%B8%8B%E5%AF%B9%E5%BA%94%E7%9A%84%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E7%9A%84powershell%E5%91%BD%E4%BB%A4%E4%B8%BA/</guid><description>&lt;p>一般cmd命令行设置环境变量使用&lt;code>set&lt;/code>, 但是在powershell环境下不生效，特地查询了下，记录于此。
Windows 下对应的设置环境变量的 PowerShell 命令为：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-powershell" data-lang="powershell">&lt;span style="display:flex;">&lt;span>$env:RUSTUP_DIST_SERVER=&lt;span style="color:#e6db74">&amp;#34;https://mirror.nju.edu.cn/rustup&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$env:RUSTUP_UPDATE_ROOT=&lt;span style="color:#e6db74">&amp;#34;https://mirror.nju.edu.cn/rustup/rustup&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>运维接口</title><link>https://caisong.github.io/posts/%E8%BF%90%E7%BB%B4%E6%8E%A5%E5%8F%A3/</link><pubDate>Sun, 22 Oct 2023 21:41:54 +0800</pubDate><guid>https://caisong.github.io/posts/%E8%BF%90%E7%BB%B4%E6%8E%A5%E5%8F%A3/</guid><description>&lt;p>考虑如何上报运维数据，未落地方案&lt;/p></description></item><item><title>Rust c交互</title><link>https://caisong.github.io/posts/rustc%E4%BA%A4%E4%BA%92/</link><pubDate>Tue, 18 Apr 2023 21:41:30 +0800</pubDate><guid>https://caisong.github.io/posts/rustc%E4%BA%A4%E4%BA%92/</guid><description>&lt;h2 id="rust-调用-c">rust 调用 c&lt;/h2>
&lt;ul>
&lt;li>调用普通&lt;code>c&lt;/code>函数&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">int&lt;/span> &lt;span style="color:#a6e22e">add&lt;/span>(&lt;span style="color:#66d9ef">int&lt;/span> a, &lt;span style="color:#66d9ef">int&lt;/span> b) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> a &lt;span style="color:#f92672">+&lt;/span> b;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// main.rs
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">//指定链接到C 库
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#75715e">#[link(name = &lt;/span>&lt;span style="color:#e6db74">&amp;#34;add&amp;#34;&lt;/span>&lt;span style="color:#75715e">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">extern&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">fn&lt;/span> &lt;span style="color:#a6e22e">add&lt;/span>(a: &lt;span style="color:#66d9ef">i32&lt;/span>, b: &lt;span style="color:#66d9ef">i32&lt;/span>) -&amp;gt; &lt;span style="color:#66d9ef">i32&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">fn&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">let&lt;/span> result &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">unsafe&lt;/span> { add(&lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">2&lt;/span>) };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> println!(&lt;span style="color:#e6db74">&amp;#34;1 + 2 = &lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>, result);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 编译C库&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ gcc -c -fPIC add.c -o add.o
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ gcc add.o -shared -o libadd.so
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># rust 链接&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ rustc main.rs -L /path/to/library/folder -l add
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ ./main
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">1&lt;/span> + 2 &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">3&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>调用C结构体&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;stdio.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">typedef&lt;/span> &lt;span style="color:#66d9ef">struct&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">int&lt;/span> x;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">int&lt;/span> y;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>} Point;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">print_point&lt;/span>(Point&lt;span style="color:#f92672">*&lt;/span> p) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">printf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Point: (%d, %d)&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>, p&lt;span style="color:#f92672">-&amp;gt;&lt;/span>x, p&lt;span style="color:#f92672">-&amp;gt;&lt;/span>y);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// main.rs
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#[repr(C)]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">struct&lt;/span> &lt;span style="color:#a6e22e">Point&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> x: &lt;span style="color:#66d9ef">i32&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> y: &lt;span style="color:#66d9ef">i32&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#[link(name = &lt;/span>&lt;span style="color:#e6db74">&amp;#34;mylib&amp;#34;&lt;/span>&lt;span style="color:#75715e">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">extern&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">fn&lt;/span> &lt;span style="color:#a6e22e">print_point&lt;/span>(p: &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#66d9ef">const&lt;/span> Point);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">fn&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">let&lt;/span> p &lt;span style="color:#f92672">=&lt;/span> Point { x: &lt;span style="color:#ae81ff">10&lt;/span>, y: &lt;span style="color:#ae81ff">20&lt;/span> };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// 转换 Point 结构体为 C 的结构体指针类型
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">let&lt;/span> c_p &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">&amp;amp;&lt;/span>p &lt;span style="color:#66d9ef">as&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#66d9ef">const&lt;/span> Point;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// 调用 C 函数
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">unsafe&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print_point(c_p);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>调用C内存分配&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// main.rs
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">use&lt;/span> libc::{malloc, free};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">use&lt;/span> std::ffi::CString;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#[link(name = &lt;/span>&lt;span style="color:#e6db74">&amp;#34;mylib&amp;#34;&lt;/span>&lt;span style="color:#75715e">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">extern&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">fn&lt;/span> &lt;span style="color:#a6e22e">process_string&lt;/span>(s: &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#66d9ef">u8&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">fn&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">let&lt;/span> s &lt;span style="color:#f92672">=&lt;/span> CString::new(&lt;span style="color:#e6db74">&amp;#34;Hello, world!&amp;#34;&lt;/span>).unwrap();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// 计算字符串的长度（包括终止符）
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">let&lt;/span> len &lt;span style="color:#f92672">=&lt;/span> s.as_bytes().len() &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// 在 C 中分配足够的空间来保存字符串
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">let&lt;/span> c_str &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">unsafe&lt;/span> { malloc(len) &lt;span style="color:#66d9ef">as&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#66d9ef">mut&lt;/span> &lt;span style="color:#66d9ef">u8&lt;/span> };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// 把 Rust 字符串复制到 C 字符串中
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">unsafe&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> std::ptr::copy_nonoverlapping(s.as_ptr(), c_str, len);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// 调用 C 函数并传递指向 C 字符串的指针
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">unsafe&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> process_string(c_str);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// 释放由 C 分配的内存
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">unsafe&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> free(c_str &lt;span style="color:#66d9ef">as&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#66d9ef">mut&lt;/span> libc::c_void);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>调用C自定义内存分配函数&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// main.rs
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">use&lt;/span> std::os::raw::c_void;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">use&lt;/span> std::alloc::{Layout, alloc, dealloc};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">extern&lt;/span> &lt;span style="color:#e6db74">&amp;#34;C&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">fn&lt;/span> &lt;span style="color:#a6e22e">my_malloc&lt;/span>(size: &lt;span style="color:#66d9ef">usize&lt;/span>) -&amp;gt; &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#66d9ef">mut&lt;/span> c_void;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">fn&lt;/span> &lt;span style="color:#a6e22e">my_free&lt;/span>(ptr: &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#66d9ef">mut&lt;/span> c_void);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">fn&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">let&lt;/span> size &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">1024&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// 在 Rust 中分配内存
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">let&lt;/span> layout &lt;span style="color:#f92672">=&lt;/span> Layout::from_size_align(size, &lt;span style="color:#ae81ff">1&lt;/span>).unwrap();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">let&lt;/span> ptr &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">unsafe&lt;/span> { my_malloc(size) &lt;span style="color:#66d9ef">as&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#66d9ef">mut&lt;/span> &lt;span style="color:#66d9ef">u8&lt;/span> };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// 使用 Rust 操作分配的内存
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">for&lt;/span> i &lt;span style="color:#66d9ef">in&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>&lt;span style="color:#f92672">..&lt;/span>size {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">unsafe&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">*&lt;/span>ptr.offset(i &lt;span style="color:#66d9ef">as&lt;/span> &lt;span style="color:#66d9ef">isize&lt;/span>) &lt;span style="color:#f92672">=&lt;/span> i &lt;span style="color:#66d9ef">as&lt;/span> &lt;span style="color:#66d9ef">u8&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// 调用自定义的 C 函数释放内存
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">unsafe&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> my_free(ptr &lt;span style="color:#66d9ef">as&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#66d9ef">mut&lt;/span> c_void);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="c调用rust">C调用rust&lt;/h2>
&lt;ul>
&lt;li>&lt;code>rust&lt;/code>代码&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#[no_mangle]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">pub&lt;/span> &lt;span style="color:#66d9ef">extern&lt;/span> &lt;span style="color:#e6db74">&amp;#34;C&amp;#34;&lt;/span> &lt;span style="color:#66d9ef">fn&lt;/span> &lt;span style="color:#a6e22e">add_numbers&lt;/span>(a:&lt;span style="color:#66d9ef">i32&lt;/span>, b:&lt;span style="color:#66d9ef">i32&lt;/span>) -&amp;gt; &lt;span style="color:#66d9ef">i32&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> a &lt;span style="color:#f92672">+&lt;/span> b
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>C 使用动态库方式调用rust&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>rustc --crate-type&lt;span style="color:#f92672">=&lt;/span>cdylib my_lib.rs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;stdio.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;stdint.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;stdlib.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;dlfcn.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">typedef&lt;/span> &lt;span style="color:#a6e22e">void&lt;/span> (&lt;span style="color:#f92672">*&lt;/span>add_fn)(&lt;span style="color:#66d9ef">int32_t&lt;/span>, &lt;span style="color:#66d9ef">int32_t&lt;/span>, &lt;span style="color:#66d9ef">int32_t&lt;/span>&lt;span style="color:#f92672">*&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">int&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">void&lt;/span>&lt;span style="color:#f92672">*&lt;/span> handle &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">dlopen&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;./libmylib.so&amp;#34;&lt;/span>, RTLD_LAZY &lt;span style="color:#f92672">|&lt;/span> RTLD_GLOBAL);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> (&lt;span style="color:#f92672">!&lt;/span>handle) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">printf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Failed to open library: %s&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">dlerror&lt;/span>());
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> add_fn add &lt;span style="color:#f92672">=&lt;/span> (add_fn)&lt;span style="color:#a6e22e">dlsym&lt;/span>(handle, &lt;span style="color:#e6db74">&amp;#34;add&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> (&lt;span style="color:#f92672">!&lt;/span>add) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">printf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Failed to find symbol: %s&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">dlerror&lt;/span>());
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">dlclose&lt;/span>(handle);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">int32_t&lt;/span> a &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">int32_t&lt;/span> b &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">2&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">int32_t&lt;/span> result;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">int32_t&lt;/span> &lt;span style="color:#f92672">*&lt;/span>result_ptr &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">&amp;amp;&lt;/span>result;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">add&lt;/span>(a, b, result_ptr);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">printf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;%d + %d = %d&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>, a, b, result);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">dlclose&lt;/span>(handle);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>C 使用静态库方式调用rust&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>rustc --crate-type&lt;span style="color:#f92672">=&lt;/span>staticlib my_lib.rs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;stdio.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;stdint.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">extern&lt;/span> &lt;span style="color:#66d9ef">int32_t&lt;/span> &lt;span style="color:#a6e22e">add&lt;/span>(&lt;span style="color:#66d9ef">int32_t&lt;/span>, &lt;span style="color:#66d9ef">int32_t&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">int&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">int32_t&lt;/span> a &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">int32_t&lt;/span> b &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">2&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">int32_t&lt;/span> result &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">add&lt;/span>(a, b);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">printf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;%d + %d = %d&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>, a, b, result);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>C 直接调用rust代码&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;stdio.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;stdint.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">int32_t&lt;/span> &lt;span style="color:#a6e22e">add&lt;/span>(&lt;span style="color:#66d9ef">int32_t&lt;/span>, &lt;span style="color:#66d9ef">int32_t&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">int&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">int32_t&lt;/span> a &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">int32_t&lt;/span> b &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">2&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">int32_t&lt;/span> result &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">add&lt;/span>(a, b);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">printf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;%d + %d = %d&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>, a, b, result);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Git地址替换</title><link>https://caisong.github.io/posts/git%E5%9C%B0%E5%9D%80%E6%9B%BF%E6%8D%A2/</link><pubDate>Fri, 14 Apr 2023 21:42:13 +0800</pubDate><guid>https://caisong.github.io/posts/git%E5%9C%B0%E5%9D%80%E6%9B%BF%E6%8D%A2/</guid><description>&lt;p>设置git直接替换镜像地址&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>git config url.https://hub.njuu.cf/.insteadof https://github.com/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Rasa简单介绍及demo实现</title><link>https://caisong.github.io/posts/rasa%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D%E5%8F%8Ademo%E5%AE%9E%E7%8E%B0/</link><pubDate>Thu, 03 Nov 2022 21:41:24 +0800</pubDate><guid>https://caisong.github.io/posts/rasa%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D%E5%8F%8Ademo%E5%AE%9E%E7%8E%B0/</guid><description>&lt;p>chatgpt大火前搞得，现在，哎。。。。。&lt;/p>
&lt;h2 id="rasa-简单介绍及demo实现">rasa 简单介绍及demo实现&lt;/h2>
&lt;p>ps. 本文基于rasa 3.1版本(python 3.8)&lt;/p>
&lt;h2 id="rasa简介">Rasa简介&lt;/h2>
&lt;p>Rasa是开源的机器学习框架，用于构建AI小助手和聊天机器人。支持自然语言处理、聊天会话和外部应用对接等。&lt;/p>
&lt;p>Rasa有两个主要模块：&lt;/p>
&lt;ul>
&lt;li>Rasa NLU 用于对用户消息内容的语义理解（用于聊天机器人中的意图提取和实体提取）&lt;/li>
&lt;li>Rasa Core 用于对话管理（用于构建AI助手的对话引擎）&lt;/li>
&lt;/ul>
&lt;p>RasaX 帮助用户提升和部署由Rasa框架构建的AI小助手和聊天机器人（用于发布机器人的）&lt;/p>
&lt;h2 id="rasa-core消息处理流程这部分未验证根据demo执行看基本一致">Rasa core消息处理流程（这部分未验证，根据demo执行看，基本一致）&lt;/h2>
&lt;p>&lt;a href="https://upload-images.jianshu.io/upload_images/3285850-ece175b3a873ff90?imageMogr2/auto-orient/strip">https://upload-images.jianshu.io/upload_images/3285850-ece175b3a873ff90?imageMogr2/auto-orient/strip&lt;/a>|imageView2/2/w/719/format/webp&lt;/p>
&lt;ol>
&lt;li>将用户输入的Message传递到Interpreter(Rasa NLU模块)，该模块负责识别Message中的&amp;quot;意图(intent)“和提取所有&amp;quot;实体”(entity)数据；&lt;/li>
&lt;li>Rasa Core会将Interpreter提取到的意图和识别传给Tracker对象，该对象的主要作用是跟踪会话状态(conversation state)；&lt;/li>
&lt;li>利用policy记录Tracker对象的当前状态&lt;/li>
&lt;li>选择执行相应的action&lt;/li>
&lt;li>action执行，action 记录在Track对象中的？（暂时没明白）&lt;/li>
&lt;li>将执行action返回的结果输出&lt;/li>
&lt;/ol>
&lt;h2 id="rasa-安装">Rasa 安装&lt;/h2>
&lt;p>按照官方教程安装
ps. 必须得使用python3.8(3.8以上，机器学习的库有版本冲突)&lt;/p>
&lt;h2 id="rasa概念自己理解可能与官方文档有出入供参考">Rasa概念(自己理解，可能与官方文档有出入，供参考)&lt;/h2>
&lt;ul>
&lt;li>story: 一种训练数据的形式，是用户和BOT之间的对话表示。用户输入表示为intent，BOT响应表示为action&lt;/li>
&lt;li>intent: 根据用户输入，经过NLU识别后认为用户的意图（目的）&lt;/li>
&lt;li>action: 针对itent可执行的行为&lt;/li>
&lt;li>entity: 就是识别出来的关键字&lt;/li>
&lt;li>slot: 中间变量，结合关键字实现entity存储和逻辑控制&lt;/li>
&lt;li>synonym: 同义词，entity同一关键字的不同说法&lt;/li>
&lt;li>response: bot回复的模板&lt;/li>
&lt;/ul>
&lt;h2 id="rasa项目结构">Rasa项目结构&lt;/h2>
&lt;p>执行&lt;code>rasa init&lt;/code>后可得到基础结构&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th style="text-align: left">路径&lt;/th>
 &lt;th style="text-align: left">文件说明&lt;/th>
 &lt;th>备注&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td style="text-align: left">actions&lt;/td>
 &lt;td style="text-align: left">自定义action代码路径&lt;/td>
 &lt;td>custom action才需要，默认空&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">models&lt;/td>
 &lt;td style="text-align: left">初始训练的模型数据&lt;/td>
 &lt;td>执行 &lt;code>rasa train&lt;/code> 产生模型文件&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">tests&lt;/td>
 &lt;td style="text-align: left">&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">config.yml&lt;/td>
 &lt;td style="text-align: left">NLU、Core配置文件&lt;/td>
 &lt;td>pipeline nlu相关，policy core相关&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">domain.yml&lt;/td>
 &lt;td style="text-align: left">Rasa domain文件&lt;/td>
 &lt;td>Core配置文件your assistant’s domain&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">endpoints.yml&lt;/td>
 &lt;td style="text-align: left">对接外部消息服务的endpoint&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">data&lt;/td>
 &lt;td style="text-align: left">数据&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">data/nlu.yml&lt;/td>
 &lt;td style="text-align: left">Rasa NLU的训练数据&lt;/td>
 &lt;td>描述intent如何识别和entity如何提取的训练文件&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">data/stories.yml&lt;/td>
 &lt;td style="text-align: left">Rasa Stories数据&lt;/td>
 &lt;td>描述针对不同的intent该采取的action&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">data/rule.yml&lt;/td>
 &lt;td style="text-align: left">Rasa Rule文件&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">credentials.yml&lt;/td>
 &lt;td style="text-align: left">details for connecting to other services&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>3.1 都是用yaml格式，且格式与内容跟之前版本都有所差别。官方提供了migrate工具（我没用起来，根据理解重新写的yml文件）&lt;/p></description></item><item><title>Gitbook配置</title><link>https://caisong.github.io/posts/gitbook%E9%85%8D%E7%BD%AE/</link><pubDate>Sun, 09 Oct 2022 21:40:51 +0800</pubDate><guid>https://caisong.github.io/posts/gitbook%E9%85%8D%E7%BD%AE/</guid><description>&lt;h2 id="gitbook-安装流程">gitbook 安装流程&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>mkdir -p ~/.nvm/versions/node
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tar xvf node-v12.22.12-linux-x64.tar.xz
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mv node-v12.22.12-linux-x64 ~/.nvm/versions/node/v12.22.12
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>npm config set registry https://registry.npmmirror.com
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>npm install -g gitbook-cli
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gitbook init
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gitbook build
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gitbook install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="设置book配置">设置book配置&lt;/h2>
&lt;p>&lt;em>book.json&lt;/em>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">&amp;#34;title&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;前端家族集锦&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">&amp;#34;description&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;重学前端，梳理自己的前端格局&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">&amp;#34;author&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;贰拾壹先生&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">&amp;#34;language&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;zh-hans&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">&amp;#34;link&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#f92672">&amp;#34;sidebar&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#f92672">&amp;#34;HOME&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;https://www.baidu.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">&amp;#34;plugins&amp;#34;&lt;/span>: [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;-sharing&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;-lunr&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;-search&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;search-pro&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;back-to-top-button&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;chapter-fold&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;expandable-chapters-small&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;code&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;copy-code-button&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;advanced-emoji&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;splitter&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;tbfed-pagefooter&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;ancre-navigation&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;anchor-navigation-ex&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;pageview-count&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;hide-element&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;popup&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;anchors&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;expandable-chapters&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;chapter-fold&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;page-treeview&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;back-to-top-button&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;page-toc-button&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;anchor-navigation-ex&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;ancre-navigation&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;favicon&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;alerts&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;flexible-alerts&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;todo&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#e6db74">&amp;#34;emphasize&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">&amp;#34;pluginsConfig&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#f92672">&amp;#34;code&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#f92672">&amp;#34;copyButtons&amp;#34;&lt;/span>: &lt;span style="color:#66d9ef">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#f92672">&amp;#34;github&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#f92672">&amp;#34;url&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;https://github.com/zhengliming&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#f92672">&amp;#34;tbfed-pagefooter&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#f92672">&amp;#34;copyright&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Copyright &amp;amp;copy jsbbmm.com 2021&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#f92672">&amp;#34;modify_label&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;该文件修订时间：&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#f92672">&amp;#34;modify_format&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;YYYY-MM-DD HH:mm:ss&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#f92672">&amp;#34;hide-element&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#f92672">&amp;#34;elements&amp;#34;&lt;/span>: [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				&lt;span style="color:#e6db74">&amp;#34;.gitbook-link&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				&lt;span style="color:#e6db74">&amp;#34;.copyright&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#f92672">&amp;#34;anchor-navigation-ex&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#f92672">&amp;#34;showLevel&amp;#34;&lt;/span>: &lt;span style="color:#66d9ef">false&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#f92672">&amp;#34;showGoTop&amp;#34;&lt;/span>: &lt;span style="color:#66d9ef">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#f92672">&amp;#34;page-toc-button&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#f92672">&amp;#34;maxTocDepth&amp;#34;&lt;/span>: &lt;span style="color:#ae81ff">2&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#f92672">&amp;#34;minTocSize&amp;#34;&lt;/span>: &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#f92672">&amp;#34;favicon&amp;#34;&lt;/span>:{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#f92672">&amp;#34;shortcut&amp;#34;&lt;/span>:&lt;span style="color:#e6db74">&amp;#34;_book/gitbook/images/favicon.ico&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#f92672">&amp;#34;bookmark&amp;#34;&lt;/span>:&lt;span style="color:#e6db74">&amp;#34;_book/gitbook/images/favicon.ico&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#f92672">&amp;#34;flexible-alerts&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#f92672">&amp;#34;note&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				&lt;span style="color:#f92672">&amp;#34;label&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>					&lt;span style="color:#f92672">&amp;#34;de&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Hinweis&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>					&lt;span style="color:#f92672">&amp;#34;en&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Note&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#f92672">&amp;#34;tip&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				&lt;span style="color:#f92672">&amp;#34;label&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>					&lt;span style="color:#f92672">&amp;#34;de&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Tipp&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>					&lt;span style="color:#f92672">&amp;#34;en&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Tip&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#f92672">&amp;#34;warning&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				&lt;span style="color:#f92672">&amp;#34;label&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>					&lt;span style="color:#f92672">&amp;#34;de&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Warnung&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>					&lt;span style="color:#f92672">&amp;#34;en&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Warning&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			&lt;span style="color:#f92672">&amp;#34;danger&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				&lt;span style="color:#f92672">&amp;#34;label&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>					&lt;span style="color:#f92672">&amp;#34;de&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Achtung&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>					&lt;span style="color:#f92672">&amp;#34;en&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Attention&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>				}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>			}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ps">ps&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-plain" data-lang="plain">&lt;span style="display:flex;">&lt;span>移植gitbook时，除了module下的文件夹，还有一个在～/.gitbook
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>L2TP部署</title><link>https://caisong.github.io/posts/l2tp/</link><pubDate>Wed, 28 Sep 2022 21:41:05 +0800</pubDate><guid>https://caisong.github.io/posts/l2tp/</guid><description>&lt;h2 id="l2tp服务端">L2TP服务端&lt;/h2>
&lt;ol>
&lt;li>内核加载&lt;code>modprobe af_key&lt;/code>&lt;/li>
&lt;li>配置文件&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>cat &amp;gt; vpn.env &lt;span style="color:#e6db74">&amp;lt;&amp;lt; EOF
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">VPN_IPSEC_PSK=random
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">VPN_USER=caisong
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">VPN_PASSWORD=123456
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="3">
&lt;li>l2tp容器&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 容器内通信，不需要对外连接&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>docker run --name l2tp-vpn-server --env-file ./vpn.env -p 500:500/udp -p 4500:4500/udp -v /lib/modules:/lib/modules:ro -d --privileged hwdsl2/ipsec-vpn-server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="l2tp客户端">L2TP客户端&lt;/h2>
&lt;ol>
&lt;li>centos基础镜像&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 必须挂载module，容器里没有&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>docker run -itd -v /lib/modules:/lib/modules:ro --privileged centos:8 /sbin/init
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>客户端配置&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 容器镜像不带这些module，安装软件会有依赖。直接先把依赖的module安装完成后，再这个镜像基础上再安装l2tp客户端&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dnf install xl2tpd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>VPN_SERVER_IP&lt;span style="color:#f92672">=&lt;/span>random 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>VPN_IPSEC_PSK&lt;span style="color:#f92672">=&lt;/span>172.17.0.2 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>VPN_USERNAME&lt;span style="color:#f92672">=&lt;/span>caisong
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>VPN_PASSWORD&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">123456&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>/etc/xl2tpd/xl2tpd.conf&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>cat &amp;gt; /etc/xl2tpd/xl2tpd.conf &lt;span style="color:#e6db74">&amp;lt;&amp;lt;EOF
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">[lac myvpn]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">lns = $VPN_SERVER_IP
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">ppp debug = yes
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">pppoptfile = /etc/ppp/options.l2tpd.client
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">length bit = yes
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>/etc/ppp/options.l2tpd.client&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>cat &amp;gt; /etc/ppp/options.l2tpd.client &lt;span style="color:#e6db74">&amp;lt;&amp;lt;EOF
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">ipcp-accept-local
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">ipcp-accept-remote
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">refuse-eap
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">require-chap
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">noccp
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">noauth
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">mtu 1280
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">mru 1280
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">noipdefault
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">defaultroute
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">usepeerdns
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">connect-delay 5000
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">name $VPN_USER
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">password $VPN_PASSWORD
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Create xl2tpd control file:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>mkdir -p /var/run/xl2tpd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>touch /var/run/xl2tpd/l2tp-control
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>systemctl start xl2tpd 
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Makefile通用模板</title><link>https://caisong.github.io/posts/makefile/</link><pubDate>Fri, 23 Sep 2022 21:41:09 +0800</pubDate><guid>https://caisong.github.io/posts/makefile/</guid><description>&lt;p>简单makefile套用模板&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 编译当前文件夹下的所有cpp文件&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>CC&lt;span style="color:#f92672">=&lt;/span>g++ -std&lt;span style="color:#f92672">=&lt;/span>c++11
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>objects :&lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">$(&lt;/span>patsubst %.cpp,%.o,&lt;span style="color:#66d9ef">$(&lt;/span>wildcard *.cpp&lt;span style="color:#66d9ef">))&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>target :&lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">$(&lt;/span>basename &lt;span style="color:#66d9ef">$(&lt;/span>objects&lt;span style="color:#66d9ef">))&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>all: &lt;span style="color:#66d9ef">$(&lt;/span>target&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">$(&lt;/span>target&lt;span style="color:#66d9ef">)&lt;/span>: &lt;span style="color:#66d9ef">$(&lt;/span>objects&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">$(&lt;/span>CC&lt;span style="color:#66d9ef">)&lt;/span> -o $@ $@.o
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">$(&lt;/span>objects&lt;span style="color:#66d9ef">)&lt;/span>: %.o: %.cpp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">$(&lt;/span>CC&lt;span style="color:#66d9ef">)&lt;/span> -c &lt;span style="color:#66d9ef">$(&lt;/span>CLFAGS&lt;span style="color:#66d9ef">)&lt;/span> $&amp;lt; -o $@
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>.PHONY : clean
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>clean:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rm &lt;span style="color:#66d9ef">$(&lt;/span>target&lt;span style="color:#66d9ef">)&lt;/span> &lt;span style="color:#66d9ef">$(&lt;/span>objects&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>CC&lt;span style="color:#f92672">=&lt;/span>g++ -std&lt;span style="color:#f92672">=&lt;/span>c++11
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>target :&lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">$(&lt;/span>patsubst %.cpp,%,&lt;span style="color:#66d9ef">$(&lt;/span>wildcard *.cpp&lt;span style="color:#66d9ef">))&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>all: &lt;span style="color:#66d9ef">$(&lt;/span>target&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>clean:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	rm &lt;span style="color:#66d9ef">$(&lt;/span>target&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Kafaka消费组管理</title><link>https://caisong.github.io/posts/kafaka%E6%B6%88%E8%B4%B9%E7%BB%84%E7%AE%A1%E7%90%86/</link><pubDate>Wed, 31 Aug 2022 21:41:03 +0800</pubDate><guid>https://caisong.github.io/posts/kafaka%E6%B6%88%E8%B4%B9%E7%BB%84%E7%AE%A1%E7%90%86/</guid><description>&lt;p>Cut out summary from your post content here.&lt;/p></description></item><item><title>自签HTTPS证书</title><link>https://caisong.github.io/posts/https%E8%AF%81%E4%B9%A6/</link><pubDate>Tue, 30 Aug 2022 21:40:59 +0800</pubDate><guid>https://caisong.github.io/posts/https%E8%AF%81%E4%B9%A6/</guid><description>&lt;h1 id="https证书">HTTPS证书&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>sudo openssl req -x509 -nodes -days &lt;span style="color:#ae81ff">365&lt;/span> -newkey rsa:2048 -keyout /etc/ssl/private/nginx-selfsigned.key -out /etc/ssl/certs/nginx-selfsigned.crt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>静态路由</title><link>https://caisong.github.io/posts/%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1/</link><pubDate>Sat, 27 Aug 2022 21:41:48 +0800</pubDate><guid>https://caisong.github.io/posts/%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1/</guid><description>&lt;p>静态路由&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 同一个路由器的不同端口，默认直连，即使IP不同。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 配置静态路由，就是配置next-hop的地址（下一跳地址)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ip route static 220.220.118.0 255.255.255.0 13.25.46.25
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>对外服务</title><link>https://caisong.github.io/posts/%E5%AF%B9%E5%A4%96%E6%9C%8D%E5%8A%A1/</link><pubDate>Sat, 27 Aug 2022 21:41:45 +0800</pubDate><guid>https://caisong.github.io/posts/%E5%AF%B9%E5%A4%96%E6%9C%8D%E5%8A%A1/</guid><description>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 主要命令&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># global 外部IP&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># inside 内部IP&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>nat server global 13.25.46.123 inside 192.168.10.1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 另外配置下出口静态路由&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ip route static 220.220.118.0 255.255.255.0 13.25.46.25
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Nat转换</title><link>https://caisong.github.io/posts/nat%E8%BD%AC%E6%8D%A2/</link><pubDate>Sat, 27 Aug 2022 21:41:13 +0800</pubDate><guid>https://caisong.github.io/posts/nat%E8%BD%AC%E6%8D%A2/</guid><description>&lt;p>Cut out summary from your post content here.&lt;/p></description></item><item><title>ensp acl</title><link>https://caisong.github.io/posts/enspacl/</link><pubDate>Tue, 23 Aug 2022 21:40:45 +0800</pubDate><guid>https://caisong.github.io/posts/enspacl/</guid><description>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 不知道指令直接输入？会有提示&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>acl name test
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 进入acl&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rule deny ip source 192.168.10.0 0.0.0.255 destination 192.168.30.0 0.0.0.255
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rule permit ip source any dentination any
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>q
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>int g0/0/03
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>traffic-filter inbound acl name test
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>ensp三层路由</title><link>https://caisong.github.io/posts/ensp%E4%B8%89%E5%B1%82%E8%B7%AF%E7%94%B1/</link><pubDate>Mon, 22 Aug 2022 21:40:46 +0800</pubDate><guid>https://caisong.github.io/posts/ensp%E4%B8%89%E5%B1%82%E8%B7%AF%E7%94%B1/</guid><description>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 两个交换机&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 第二层交换机配置网关&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>vlan batch &lt;span style="color:#ae81ff">10&lt;/span> to &lt;span style="color:#ae81ff">20&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>int g0/0/1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>port link-type trunk
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>port trunk allow-pass vlan &lt;span style="color:#ae81ff">10&lt;/span> &lt;span style="color:#ae81ff">20&lt;/span> &lt;span style="color:#ae81ff">30&lt;/span> 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>int vlanif &lt;span style="color:#ae81ff">10&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ip address 192.168.10.254 255.255.255.0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>int vlanif &lt;span style="color:#ae81ff">20&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ip address 192.168.20.254 255.255.255.0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>int vlanif &lt;span style="color:#ae81ff">30&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ip address 192.168.30.254 255.255.255.0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Ensp单臂路由</title><link>https://caisong.github.io/posts/ensp%E5%8D%95%E8%87%82%E8%B7%AF%E7%94%B1/</link><pubDate>Tue, 16 Aug 2022 21:40:47 +0800</pubDate><guid>https://caisong.github.io/posts/ensp%E5%8D%95%E8%87%82%E8%B7%AF%E7%94%B1/</guid><description>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 关闭提示信息&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># undo info-center enable&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>un in en
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 进入system view&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sys
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 创建vlan，批量创建待补充&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>vlan &lt;span style="color:#ae81ff">10&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>vlan &lt;span style="color:#ae81ff">20&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 交换机&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 端口操作&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>int g0/0/1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>port link-type access
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>port default vlan &lt;span style="color:#ae81ff">10&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>int g0/0/2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>port link-type access
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>port default vlan &lt;span style="color:#ae81ff">20&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>int g0/0/3
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>port link-type trunk
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>port trunk allow-pass vlan &lt;span style="color:#ae81ff">10&lt;/span> &lt;span style="color:#ae81ff">20&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 路由器&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>int e0/0/0.1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dot1q termination vid &lt;span style="color:#ae81ff">10&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ip address 192.168.1.254 &lt;span style="color:#ae81ff">24&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>arp broadcast enable
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>int e0/0/0.2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dot1q termination vid &lt;span style="color:#ae81ff">20&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ip address 192.168.2.254 &lt;span style="color:#ae81ff">24&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>arp br en
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Alpinek8s安装</title><link>https://caisong.github.io/posts/alpinek8s%E5%AE%89%E8%A3%85/</link><pubDate>Thu, 17 Mar 2022 21:40:27 +0800</pubDate><guid>https://caisong.github.io/posts/alpinek8s%E5%AE%89%E8%A3%85/</guid><description>&lt;h2 id="alpine-k8s安装">alpine k8s安装&lt;/h2>
&lt;p>&lt;a href="https://dev.to/xphoniex/how-to-create-a-kubernetes-cluster-on-alpine-linux-kcg">安装参考&lt;/a>&lt;/p>
&lt;h3 id="配置vagrant">配置vagrant&lt;/h3>
&lt;p>略&lt;/p>
&lt;h3 id="master节点安装">master节点安装&lt;/h3>
&lt;ol>
&lt;li>添加edge软件源&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>https://mirrors.ustc.edu.cn/alpine/latest-stable/main
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>https://mirrors.ustc.edu.cn/alpine/latest-stable/community
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>@testing http://mirrors.ustc.edu.cn/alpine/edge/testing
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>@community http://mirrors.ustc.edu.cn/alpine/edge/community
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>apk更新后，重启，否则docker启动失败，报iptables相关错误&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 重启后失败再尝试以下命令&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo modprobe ip_tables
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo echo &lt;span style="color:#e6db74">&amp;#39;ip_tables&amp;#39;&lt;/span> &amp;gt;&amp;gt; /etc/modules
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="3">
&lt;li>安装软件包&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># mater节点&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apk add kubernetes@testing
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apk add docker@community
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apk add cni-plugins@testing
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apk add kubelet@testing
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># node节点&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apk add docker@community
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apk add kubelet@testing
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="3">
&lt;li>kubeadm init 的时候指定镜像源&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 先查看IP和kubernetes的版本&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubeadm version
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># init的时候指定registry源&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo kubeadm init --kubernetes-version&lt;span style="color:#f92672">=&lt;/span>v1.23.4 --image-repository registry.aliyuncs.com/google_containers --apiserver-advertise-address&lt;span style="color:#f92672">=&lt;/span>192.168.33.10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>记录命令执行后返回的结果&lt;/p></description></item><item><title>Repo源制作</title><link>https://caisong.github.io/posts/repo%E6%BA%90%E5%88%B6%E4%BD%9C/</link><pubDate>Wed, 29 Dec 2021 21:41:25 +0800</pubDate><guid>https://caisong.github.io/posts/repo%E6%BA%90%E5%88%B6%E4%BD%9C/</guid><description>&lt;h1 id="repo源制作">repo源制作&lt;/h1>
&lt;p>制作源最好找一台什么都没装的虚拟机，或者&lt;code>docker&lt;/code>拉一个原始镜像，不然要制作的软件依赖包可能缺失。&lt;/p>
&lt;ol>
&lt;li>下载软件包及依赖&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>yum install yum-plugin-downloadonly
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 下载nano为例&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>yum install --downloadonly --downloaddir&lt;span style="color:#f92672">=&lt;/span>/root/package/nano nano
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>不加&amp;ndash;downloaddir参数，CentOS 7下载的依赖包会放在默认路径*/var/cache/yum/x86_64/7/base/packages*下。&lt;/p>
&lt;ol start="2">
&lt;li>制作源&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>yum install createrepo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd &amp;lt;rpm安装包目录&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>createrepo .
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="3">
&lt;li>制作repo
RHEL默认releaserver为版本号+server，如AS6U4的releaseServer为6Server；CentOS直接使用版本号,如6、7。&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>cat &amp;gt; /etc/yum.repos.d/&amp;lt;your_repo_name.repo&amp;gt; &lt;span style="color:#e6db74">&amp;lt;&amp;lt;EOF
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">[repo-name]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">name=&amp;lt;repo name&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">baseurl=file:///&amp;lt;rpm direcotry&amp;gt;/\$releaserver/
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">enabled=1
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">gpgcheck=0
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Tmux配置文件（修复版）</title><link>https://caisong.github.io/posts/tmux%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BF%AE%E5%A4%8D%E7%89%88/</link><pubDate>Tue, 21 Dec 2021 21:42:26 +0800</pubDate><guid>https://caisong.github.io/posts/tmux%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BF%AE%E5%A4%8D%E7%89%88/</guid><description>&lt;p>tmux配置文件（修复版）&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-plain" data-lang="plain">&lt;span style="display:flex;">&lt;span>unbind C-b
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set -g prefix C-a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>bind C-a send-prefix
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>bind r source-file ~/.tmux.conf \; display &amp;#34;Reloaded!&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># Use Shift-arrow keys to switch panes
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>bind -n S-Left select-pane -L
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>bind -n S-Right select-pane -R
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>bind -n S-Up select-pane -U
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>bind -n S-Down select-pane -D
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># Alt-arrow to switch windows
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>bind -n M-Left previous-window
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>bind -n M-Right next-window
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>#Enable mouse mode (tmux 2.1 and above)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>setw -g mouse on
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set -g mouse on
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>#Enable oh my zsh in tmux
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>#set -g default-command /bin/zsh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># Mouse based copy
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>bind-key -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel &amp;#34;reattach-to-user-namespace
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>pbcopy&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>bind-key -T copy-mode MouseDragEnd1Pane send -X copy-pipe-and-cancel &amp;#34;reattach-to-user-namespace pbc
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>opy&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>#开启status-bar uft-8支持
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set -g status-utf8 on
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>#设置终端颜色为256色
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set -g default-terminal &amp;#34;screen-256color&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>#开启status-bar uft-8支持
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set -g status-utf8 on
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>#设置pan前景色
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set -g pane-border-fg green
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>#设置pane背景色
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set -g pane-border-bg black
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>#设置活跃pane前景色
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set -g pane-active-border-fg white
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>#设置活跃pane背景色
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set -g pane-active-border-bg yellow
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>#设置消息前景色
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set -g message-fg white
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>#设置消息背景色
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set -g message-bg black
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>#设置消息高亮显示
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set -g message-attr bright
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>#设置status-bar颜色
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set -g status-fg white
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set -g status-bg black
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>#设置窗口列表颜色
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>setw -g window-status-style fg=cyan
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>setw -g window-status-style bg=default
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>setw -g window-status-style dim
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>#设置当前窗口在status bar中的颜色
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>setw -g window-status-current-style fg=white
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>setw -g window-status-current-style bg=red
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>setw -g window-status-current-style bright
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>#设置status bar格式
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set -g status-left-length 40
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set -g status-left &amp;#34;#[fg=green]Session: #S #[fg=yellow]#I #[fg=cyan]#P&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set -g status-right &amp;#34;#[fg=cyan]%b %d %R&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set -g status-interval 60
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set -g status-justify centre
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Alpine无法使用minikube，具体原因未知</title><link>https://caisong.github.io/posts/alpine%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8minikube%E5%85%B7%E4%BD%93%E5%8E%9F%E5%9B%A0%E6%9C%AA%E7%9F%A5/</link><pubDate>Tue, 21 Dec 2021 21:42:07 +0800</pubDate><guid>https://caisong.github.io/posts/alpine%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8minikube%E5%85%B7%E4%BD%93%E5%8E%9F%E5%9B%A0%E6%9C%AA%E7%9F%A5/</guid><description>&lt;p>使用alpine镜像构建ks8 minikube集群&lt;/p></description></item><item><title>Linux网络概念</title><link>https://caisong.github.io/posts/linux%E7%BD%91%E7%BB%9C%E6%A6%82%E5%BF%B5/</link><pubDate>Thu, 14 Oct 2021 21:41:07 +0800</pubDate><guid>https://caisong.github.io/posts/linux%E7%BD%91%E7%BB%9C%E6%A6%82%E5%BF%B5/</guid><description>&lt;p>&lt;strong>这篇装载的，忘记转自哪儿了！侵删！&lt;/strong>&lt;/p>
&lt;h1 id="linux-网络概念">linux 网络概念&lt;/h1>
&lt;h2 id="虚拟网络设备">虚拟网络设备&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Network Namespace （以下简称netns）&lt;/p>
&lt;p>是Linux内核提供的一项实现网络隔离的功能，它能隔离多个不同的网络空间，并且各自拥有独立的网络协议栈，这其中便包括了网络接口（网卡），路由表，iptables规则等。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>veth pair&lt;/p>
&lt;p>是成对出现的一种虚拟网络设备接口，一端连着网络协议栈，一端彼此相连。如下图所示：
&lt;img src="https://pic2.zhimg.com/v2-6b0a6467e43cedacc73275b04421490d_r.jpg" alt="img">&lt;/p>
&lt;p>由于它的这个特性，常常被用于构建虚拟网络拓扑。例如连接两个不同的网络命名空间(netns)，连接docker容器，连接网桥(Bridge)等，其中一个很常见的案例就是OpenStack Neutron底层用它来构建非常复杂的网络拓扑。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>tun/tap&lt;/p>
&lt;p>tun是网络层的虚拟网络设备，可以收发第三层数据报文包，如IP封包，因此常用于一些点对点IP隧道，例如OpenVPN，IPSec等。&lt;/p>
&lt;p>tap是链路层的虚拟网络设备，等同于一个以太网设备，它可以收发第二层数据报文包，如以太网数据帧。Tap最常见的用途就是做为虚拟机的网卡，因为它和普通的物理网卡更加相近，也经常用作普通机器的虚拟网卡。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>bridge&lt;/p>
&lt;p>Linux Bridge（网桥）是用纯软件实现的虚拟交换机，有着和物理交换机相同的功能，例如二层交换，MAC地址学习等。因此我们可以把tun/tap，veth pair等设备绑定到网桥上，就像是把设备连接到物理交换机上一样。此外它和veth pair、tun/tap一样，也是一种虚拟网络设备，具有虚拟设备的所有特性，例如配置IP，MAC地址等。&lt;/p>
&lt;p>Linux Bridge通常是搭配KVM、docker等虚拟化技术一起使用的，用于构建虚拟网络。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>本地回环lo&lt;/p>
&lt;p>大多数操作系统都在网络层实现了环回能力，通常是使用一个虚拟的环回网络接口来实现。这个虚拟的环回网络接口看着像是一个真实的网卡，实际上是操作系统用软件模拟的，它可以通过&lt;code>TCP/IP&lt;/code>与同一台主机上的其他服务进行通信，以&lt;code>127&lt;/code>开头的&lt;code>IPv4&lt;/code>地址就是为它保留的，主流&lt;code>Linux&lt;/code>操作系统为环回网卡分配的地址都是&lt;code>127.0.0.1&lt;/code>，主机名是&lt;code>localhost&lt;/code>。&lt;/p>
&lt;p>环回网络接口之所以被称之为环回网络接口，**是因为从本机发送到本机任意一个IP的数据报文都会在网络层交给环回网络接口，不再下发到数据链路层进行处理，环回网络接口直接发送回网络层，最终交由应用层软件程序进行处理。**这种方式对于性能测试非常有用，因为省去了硬件的开销，可以直接测试协议栈软件所需要的时间。&lt;/p>
&lt;p>那环回网络接口是如何判断目的IP是否为本机地址的呢？答案就是网络层在进行路由转发的时候会先查本地的路由表，发现是本机IP后交给环回网络接口。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="设备">设备&lt;/h2>
&lt;ul>
&lt;li>网关&lt;/li>
&lt;/ul>
&lt;p>网关是 电信中使用的网络节点，它将具有不同传输协议的两个网络连接在一起。网关充当网络的入口和出口点，因为所有数据在路由之前必须经过网关或与网关通信。在大多数基于IP的网络中，唯一不通过至少一个网关的流量是在同一局域网（LAN）段上的节点之间流动的流量。术语默认网关或网络网关也可用于描述相同的概念。&lt;/p>
&lt;ul>
&lt;li>路由器&lt;/li>
&lt;/ul>
&lt;p>路由器（Router）是一种负责寻径的网络设备，它在互连网络中从多条路径中寻找通讯量最少的一条网络路径提供给用户通信。路由器用于连接多个逻辑上分开的网络。对用户提供最佳的通信路径，路由器利用路由表为数据传输选择路径，路由表包含网络地址以及各地址之间距离的清单，路由器利用路由表查找数据包从当前位置到目的地址的正确路径。路由器使用最少时间算法或最优路径算法来调整信息传递的路径，如果某一网络路径发生故障或堵塞，路由器可选择另一条路径，以保证信息的正常传输。路由器可进行数据格式的转换，成为不同协议之间网络互连的必要设备。&lt;/p>
&lt;h3 id="区别">区别&lt;/h3>
&lt;ol>
&lt;li>本质区别&lt;/li>
&lt;/ol>
&lt;p>网关这种设备它主要是用来连接两种不同的网络，同时，网关它还能够同时与两边的主机之间进行通信。但是两边的主机是不能够直接进行通信，是必须要经过网关才能进行通信。网关的工作是在应用层当中。&lt;/p>
&lt;p>路由器它是属于网络层设备，通常是以包为单位进行数据的发送。在路由器的子接口，是有分割广播域的作用，所以当我们用交换机做VLAN以后，都是要在路由器上做一个三层的路由。&lt;/p>
&lt;ol start="2">
&lt;li>使用方式的区别&lt;/li>
&lt;/ol>
&lt;p>网关它可以是路由器，交换机或者是PC。在同一网段之内进行通信，是不需要将网关介入其中，只有当主机个非本网段设备进行通信的时候，才需要将数据包全部发给网关设备，再经由网关设备进行转发或者是有路由处理等。&lt;/p>
&lt;p>路由器它是一个网络层系统，路由器在现在市场上一般是被分成了两大类，一类是单协议路由器，另一类是多协议路由器。路由器它可以进行数据格式的转换，成为不同于协议之间的网络互连的必要设备。&lt;/p>
&lt;ol start="3">
&lt;li>功能上的区别&lt;/li>
&lt;/ol>
&lt;p>网关可以分为传输型网关和应用型网关，它的功能是充当转换重任，实质上就是一个网络通向其他网络的IP地址。&lt;/p>
&lt;p>路由器的功能主要有：连通不同的网络和信息传输作用。按照使用可分为：接入、企业级、骨干级、太比特、多WAN以及3G无线等。&lt;/p></description></item><item><title>ovs-dpdk验证</title><link>https://caisong.github.io/posts/dpdk%E9%AA%8C%E8%AF%81/</link><pubDate>Thu, 23 Sep 2021 21:40:43 +0800</pubDate><guid>https://caisong.github.io/posts/dpdk%E9%AA%8C%E8%AF%81/</guid><description>&lt;p>Cut out summary from your post content here.&lt;/p></description></item><item><title>常用零宽字符</title><link>https://caisong.github.io/posts/%E9%9B%B6%E5%AE%BD%E5%BA%A6%E7%A9%BA%E6%A0%BC%E7%AC%A6zero-widthspaceu+200b%E7%94%A8%E4%BA%8E%E8%BE%83%E9%95%BF%E5%8D%95%E8%AF%8D/</link><pubDate>Mon, 06 Sep 2021 21:42:30 +0800</pubDate><guid>https://caisong.github.io/posts/%E9%9B%B6%E5%AE%BD%E5%BA%A6%E7%A9%BA%E6%A0%BC%E7%AC%A6zero-widthspaceu+200b%E7%94%A8%E4%BA%8E%E8%BE%83%E9%95%BF%E5%8D%95%E8%AF%8D/</guid><description>&lt;p>&lt;strong>零宽字符&lt;/strong>是字节宽度为0的特殊字符，可以用于文本加密、文章水印等。记录下常见的零宽字符。&lt;/p></description></item><item><title>安装win10商店安装包</title><link>https://caisong.github.io/posts/%E5%AE%89%E8%A3%85win10%E5%95%86%E5%BA%97%E5%AE%89%E8%A3%85%E5%8C%85/</link><pubDate>Mon, 06 Sep 2021 21:42:29 +0800</pubDate><guid>https://caisong.github.io/posts/%E5%AE%89%E8%A3%85win10%E5%95%86%E5%BA%97%E5%AE%89%E8%A3%85%E5%8C%85/</guid><description>&lt;p>安装win10 商店安装包&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-powershell" data-lang="powershell">&lt;span style="display:flex;">&lt;span>Add-AppPackage *.msixbundle
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Python遍历文件</title><link>https://caisong.github.io/posts/python%E9%81%8D%E5%8E%86%E6%96%87%E4%BB%B6/</link><pubDate>Fri, 03 Sep 2021 21:42:18 +0800</pubDate><guid>https://caisong.github.io/posts/python%E9%81%8D%E5%8E%86%E6%96%87%E4%BB%B6/</guid><description>&lt;p>python 遍历文件&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> os
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>s &lt;span style="color:#f92672">=&lt;/span> os&lt;span style="color:#f92672">.&lt;/span>sep
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>root &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;d:&amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> s &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#e6db74">&amp;#34;ll&amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> s 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> rt, dirs, files &lt;span style="color:#f92672">in&lt;/span> os&lt;span style="color:#f92672">.&lt;/span>walk(root):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> f &lt;span style="color:#f92672">in&lt;/span> files:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fname &lt;span style="color:#f92672">=&lt;/span> os&lt;span style="color:#f92672">.&lt;/span>path&lt;span style="color:#f92672">.&lt;/span>splitext(f)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> new &lt;span style="color:#f92672">=&lt;/span> fname[&lt;span style="color:#ae81ff">0&lt;/span>] &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#e6db74">&amp;#39;b&amp;#39;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> fname[&lt;span style="color:#ae81ff">1&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> os&lt;span style="color:#f92672">.&lt;/span>rename(os&lt;span style="color:#f92672">.&lt;/span>path&lt;span style="color:#f92672">.&lt;/span>join(rt,f),os&lt;span style="color:#f92672">.&lt;/span>path&lt;span style="color:#f92672">.&lt;/span>join(rt,new))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Ipv6 connect</title><link>https://caisong.github.io/posts/ipv6connect/</link><pubDate>Fri, 03 Sep 2021 21:42:16 +0800</pubDate><guid>https://caisong.github.io/posts/ipv6connect/</guid><description>&lt;h2 id="ipv6-connect">ipv6 connect&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/*connect(7, {sa_family=AF_INET6, sin6_port=htons(80), inet_pton(AF_INET6,
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> &amp;#34;fe80::21f:16ff:fe1a:f5b8&amp;#34;, &amp;amp;sin6_addr), sin6_flowinfo=0, sin6_scope_id=0},28)*/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">struct&lt;/span> sockaddr_in6 sin6;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> . . .
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sin6.sin6_family &lt;span style="color:#f92672">=&lt;/span> AF_INET6;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sin6.sin6_flowinfo &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sin6.sin6_port &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">htons&lt;/span>(&lt;span style="color:#ae81ff">23&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sin6.sin6_addr &lt;span style="color:#f92672">=&lt;/span> in6addr_loopback; &lt;span style="color:#75715e">/* structure assignment */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> . . .
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> (&lt;span style="color:#a6e22e">connect&lt;/span>(s, (&lt;span style="color:#66d9ef">struct&lt;/span> sockaddr &lt;span style="color:#f92672">*&lt;/span>) &lt;span style="color:#f92672">&amp;amp;&lt;/span>sin6, &lt;span style="color:#66d9ef">sizeof&lt;/span>(sin6)) &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="获取网卡信息">获取网卡信息&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">struct&lt;/span> ifreq ifr;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">char&lt;/span> &lt;span style="color:#f92672">*&lt;/span>iface &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;eth0&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">char&lt;/span> &lt;span style="color:#f92672">*&lt;/span>mac;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fd &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">socket&lt;/span>(AF_INET, SOCK_DGRAM, &lt;span style="color:#ae81ff">0&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ifr.ifr_addr.sa_family &lt;span style="color:#f92672">=&lt;/span> AF_INET;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">strncpy&lt;/span>(ifr.ifr_name , iface , IFNAMSIZ&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">ioctl&lt;/span>(fd, SIOCGIFHWADDR, &lt;span style="color:#f92672">&amp;amp;&lt;/span>ifr);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> (AF_INET6 &lt;span style="color:#f92672">==&lt;/span> remote_addrinfo&lt;span style="color:#f92672">-&amp;gt;&lt;/span>ai_family) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ((&lt;span style="color:#66d9ef">struct&lt;/span> sockaddr_in6 &lt;span style="color:#f92672">*&lt;/span>)remote_addrinfo&lt;span style="color:#f92672">-&amp;gt;&lt;/span>ai_addr)&lt;span style="color:#f92672">-&amp;gt;&lt;/span>sin6_scope_id &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">2&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>if_nametoindex
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>GPG错误NOPUBLICKEY</title><link>https://caisong.github.io/posts/gpg%E9%94%99%E8%AF%AFnopublickey/</link><pubDate>Fri, 03 Sep 2021 21:42:15 +0800</pubDate><guid>https://caisong.github.io/posts/gpg%E9%94%99%E8%AF%AFnopublickey/</guid><description>&lt;p>GPG错误 NO PUBLIC KEY
&lt;a href="https://my.oschina.net/emptytimespace/blog/83633">no pulic key 修复&lt;/a>&lt;/p>
&lt;p>ubuntu有效&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>apt-get install debian-keyring debian-archive-keyring
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>apt-key update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>apt-get upgrade
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Git修改已提交的commit</title><link>https://caisong.github.io/posts/git%E5%A6%82%E4%BD%95%E4%BF%AE%E6%94%B9%E5%B7%B2%E6%8F%90%E4%BA%A4%E7%9A%84commitissue12uolcanob/</link><pubDate>Fri, 03 Sep 2021 21:42:14 +0800</pubDate><guid>https://caisong.github.io/posts/git%E5%A6%82%E4%BD%95%E4%BF%AE%E6%94%B9%E5%B7%B2%E6%8F%90%E4%BA%A4%E7%9A%84commitissue12uolcanob/</guid><description>&lt;p>&lt;a href="https://github.com/uolcano/blog/issues/12" title="git">git 修改已提交的commit&lt;/a>&lt;/p></description></item><item><title>python远程控制 自动化部署</title><link>https://caisong.github.io/posts/fabric%E8%BD%BB%E9%87%8F%E8%BF%9C%E7%AB%AF%E9%83%A8%E7%BD%B2/</link><pubDate>Fri, 03 Sep 2021 21:42:11 +0800</pubDate><guid>https://caisong.github.io/posts/fabric%E8%BD%BB%E9%87%8F%E8%BF%9C%E7%AB%AF%E9%83%A8%E7%BD%B2/</guid><description>&lt;ul>
&lt;li>fabric：轻量远端部署&lt;/li>
&lt;li>ShutIt：基于python的expect库&lt;/li>
&lt;li>Ansible：自动化部署&lt;/li>
&lt;li>saltstack：自动化部署&lt;/li>
&lt;li>Puppet：自动化配置管理工具（Ruby）&lt;/li>
&lt;/ul></description></item><item><title>Docker Toolbox</title><link>https://caisong.github.io/posts/dockertoolbox/</link><pubDate>Fri, 03 Sep 2021 21:42:09 +0800</pubDate><guid>https://caisong.github.io/posts/dockertoolbox/</guid><description>&lt;p>Docker Toolbox 设置docker镜像&lt;/p></description></item><item><title>水印防止泄漏</title><link>https://caisong.github.io/posts/1.%E9%87%8D%E8%A6%81%E7%9A%84%E5%9B%BE%E7%89%87%E6%88%96%E8%80%85%E6%96%87%E6%A1%A3%E5%86%85%E5%8A%A0%E6%B0%B4%E5%8D%B0%E6%96%87%E4%BB%B6%E9%87%8C%E9%9D%A2%E5%86%8D%E5%8A%A0%E4%B8%8A%E5%85%A8%E6%81%AF%E6%95%B0%E5%AD%97%E6%B0%B4%E5%8D%B0%E8%BF%99%E4%B8%AA%E5%A4%A7%E5%AE%B6%E9%83%BD%E8%AF%B4%E5%BE%97%E5%BE%88%E5%85%A8%E9%9D%A2/</link><pubDate>Fri, 03 Sep 2021 21:42:05 +0800</pubDate><guid>https://caisong.github.io/posts/1.%E9%87%8D%E8%A6%81%E7%9A%84%E5%9B%BE%E7%89%87%E6%88%96%E8%80%85%E6%96%87%E6%A1%A3%E5%86%85%E5%8A%A0%E6%B0%B4%E5%8D%B0%E6%96%87%E4%BB%B6%E9%87%8C%E9%9D%A2%E5%86%8D%E5%8A%A0%E4%B8%8A%E5%85%A8%E6%81%AF%E6%95%B0%E5%AD%97%E6%B0%B4%E5%8D%B0%E8%BF%99%E4%B8%AA%E5%A4%A7%E5%AE%B6%E9%83%BD%E8%AF%B4%E5%BE%97%E5%BE%88%E5%85%A8%E9%9D%A2/</guid><description>&lt;p>Cut out summary from your post content here.&lt;/p></description></item><item><title>1.将字符串的时间转换为时间戳</title><link>https://caisong.github.io/posts/1.%E5%B0%86%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%97%B6%E9%97%B4%E8%BD%AC%E6%8D%A2%E4%B8%BA%E6%97%B6%E9%97%B4%E6%88%B3/</link><pubDate>Fri, 03 Sep 2021 21:42:04 +0800</pubDate><guid>https://caisong.github.io/posts/1.%E5%B0%86%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%97%B6%E9%97%B4%E8%BD%AC%E6%8D%A2%E4%B8%BA%E6%97%B6%E9%97%B4%E6%88%B3/</guid><description>&lt;!-- raw HTML omitted -->
&lt;ul>
&lt;li>将字符串的时间转换为时间戳&lt;/li>
&lt;li>字符串格式更改&lt;/li>
&lt;li>字符串格式更改&lt;/li>
&lt;li>添加数据源&lt;/li>
&lt;li>修改PostgrsSQL认证方式&lt;/li>
&lt;li>验证&lt;/li>
&lt;li>ODBC 连接数据库&lt;/li>
&lt;/ul></description></item><item><title>1.常用软件</title><link>https://caisong.github.io/posts/1.%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6/</link><pubDate>Fri, 03 Sep 2021 21:42:03 +0800</pubDate><guid>https://caisong.github.io/posts/1.%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6/</guid><description>&lt;ul>
&lt;li>windows下使用过的觉得还比较好用的软件&lt;/li>
&lt;li>vim的一些插件&lt;/li>
&lt;/ul></description></item><item><title>Lisp</title><link>https://caisong.github.io/posts/lisp/</link><pubDate>Fri, 03 Sep 2021 21:42:01 +0800</pubDate><guid>https://caisong.github.io/posts/lisp/</guid><description>&lt;p>忘记干啥的，先留着吧&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-lisp" data-lang="lisp">&lt;span style="display:flex;">&lt;span>(&lt;span style="color:#66d9ef">setq&lt;/span> backup-directory-alist &lt;span style="color:#f92672">&amp;#39;&lt;/span>((&lt;span style="color:#e6db74">&amp;#34;.&amp;#34;&lt;/span> &lt;span style="color:#f92672">.&lt;/span> &lt;span style="color:#e6db74">&amp;#34;~/.emacs.d/backup&amp;#34;&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> backup-by-copying &lt;span style="color:#66d9ef">t&lt;/span> &lt;span style="color:#75715e">; Don&amp;#39;t delink hardlinks&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> version-control &lt;span style="color:#66d9ef">t&lt;/span> &lt;span style="color:#75715e">; Use version numbers on backups&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> delete-old-versions &lt;span style="color:#66d9ef">t&lt;/span> &lt;span style="color:#75715e">; Automatically delete excess backups&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> kept-new-versions &lt;span style="color:#ae81ff">20&lt;/span> &lt;span style="color:#75715e">; how many of the newest versions to keep&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> kept-old-versions &lt;span style="color:#ae81ff">5&lt;/span> &lt;span style="color:#75715e">; and how many of the old&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Git实用命令</title><link>https://caisong.github.io/posts/git%E5%AE%9E%E7%94%A8%E5%91%BD%E4%BB%A4httpsgithub.comuolcanoblogiss/</link><pubDate>Fri, 03 Sep 2021 21:42:00 +0800</pubDate><guid>https://caisong.github.io/posts/git%E5%AE%9E%E7%94%A8%E5%91%BD%E4%BB%A4httpsgithub.comuolcanoblogiss/</guid><description>&lt;p>&lt;a href="https://github.com/uolcano/blog/issues/12">git 实用命令&lt;/a>&lt;/p>
&lt;p>git虽好，但总会遇到一些不希望的提交，所以就会有增删改某次或某些提交的需求。下面收集一下，修改本地和远程版本历史的一些方法。&lt;/p>
&lt;h2 id="本地修改">本地修改&lt;/h2>
&lt;p>由于以下修改本身是对版本历史的修改，在需要push到远程仓库时，往往是不成功的，只能强行push，这样会出现的一个问题就是，如果你是push到多人协作的远程仓库中，会对其他人的远程操作构成影响。通常情况下，建议与项目远程仓库的管理员进行沟通，在完成你强制push操作后，通知其他人同步。&lt;/p>
&lt;pre>&lt;code>修改最近一次的commit

修改提交的描述

git commit --amend

然后会进入一个文本编辑器界面，修改commit的描述内容，即可完成操作。

修改提交的文件

git add &amp;lt;filename&amp;gt; # 或者 git rm
git commit --amend # 将缓存区的内容做为最近一次提交

修改任意提交历史位置的commit

可以通过变基命令，修改最近一次提交以前的某次提交。不过修改的提交到当前提交之间的所有提交的hash值都会改变。
变基操作需要非常小心，一定要多用git status命令来查看你是否还处于变基操作，可能某次误操作的会对后面的提交历史造成很大影响。

首先查看提交日志，以便变基后，确认提交历史的修改

git log

变基操作。 可以用commit~n或commit^^这种形式替代：前者表示当前提交到n次以前的提交，后者^符号越多表示的范围越大，commit可以是HEAD或者某次提交的hash值；-i参数表示进入交互模式。

git rebase -i &amp;lt;commit range&amp;gt;

以上变基命令会进入文本编辑器，其中每一行就是某次提交，把pick修改为edit，保存退出该文本编辑器。

**注意：**变基命令打开的文本编辑器中的commit顺序跟git log查看的顺序是相反的，也就是最近的提交在下面，老旧的提交在上面

**注意：**变基命令其实可以同时对多个提交进行修改，只需要修改将对应行前的pick都修改为edit，保存退出后会根据你修改的数目多次打开修改某次commit的文本编辑器界面。但是这个范围内的最终祖先commit不能修改，也就是如果有5行commit信息，你只能修改下面4行的，这不仅限于commit修改，重排、删除以及合并都如此。

git commit --amend

接下来修改提交描述内容或者文件内容，跟最近一次的commit的操作相同，不赘述。

然后完成变基操作

git rebase --continue

有时候会完成变基失败，需要git add --all才能解决，一般git会给出提示。

再次查看提交日志，对比变基前后的修改，可以看到的内的所有提交的hash值都被修改了

git log

如果过了一段时间后，你发现这次历史修改有误，想退回去怎么办？请往下继续阅读

重排或删除某些提交

变基命令非常强大，还可以将提交历史重新手动排序或者删除某次提交。这为某些误操作，导致不希望公开信息的提交，提供了补救措施

git rebase -i &amp;lt;commit range&amp;gt;

如前面描述，这会进入文本编辑器，对某行提交进行排序或者删除，保存退出。可以是多行修改。

后续操作同上。

合并多次提交

非关键性的提交太多会让版本历史很难看、冗余，所以合并多次提交也是挺有必要的。同样是使用以上的变基命令，不同的是变基命令打开的文本编辑器里的内容的修改。

将pick修改为squash，可以是多行修改，然后保存退出。这个操作会将标记为squash的所有提交，都合并到最近的一个祖先提交上。

**注意：**不能对的第一行commit进行修改，至少保证第一行是接受合并的祖先提交。

后续操作同上。

分离某次提交

变基命令还能分离提交，这里不描述，详情查看后面的参考链接

终极手段

git还提供了修改版本历史的“大杀器”——filter-branch，可以对整个版本历史中的每次提交进行修改，可用于删除误操作提交的密码等敏感信息。

删除所有提交中的某个文件

git filter-branch --treefilter 'rm -f password.txt' HEAD

将新建的主目录作为所有提交的根目录

git filter-branch --subdirectory-filter trunk HEAD
&lt;/code>&lt;/pre>
&lt;h2 id="本地回退">本地回退&lt;/h2>
&lt;p>回退操作也是对过往提交的一剂“后悔药”，常用的回退方式有三种：checkout、reset和revert&lt;/p></description></item><item><title>Ipv6地址设定</title><link>https://caisong.github.io/posts/ipv6%E5%9C%B0%E5%9D%80%E8%AE%BE%E5%AE%9A/</link><pubDate>Fri, 03 Sep 2021 21:41:59 +0800</pubDate><guid>https://caisong.github.io/posts/ipv6%E5%9C%B0%E5%9D%80%E8%AE%BE%E5%AE%9A/</guid><description>&lt;p>Cut out summary from your post content here.&lt;/p></description></item><item><title>Atime noatime nodiratime relatime 区别</title><link>https://caisong.github.io/posts/atimenoatimenodiratimerelatime/</link><pubDate>Fri, 03 Sep 2021 21:41:56 +0800</pubDate><guid>https://caisong.github.io/posts/atimenoatimenodiratimerelatime/</guid><description>&lt;p>atime/noatime/nodiratime/relatime 差异&lt;/p></description></item><item><title>Zeal离线源</title><link>https://caisong.github.io/posts/zeal%E7%A6%BB%E7%BA%BF/</link><pubDate>Fri, 03 Sep 2021 21:41:42 +0800</pubDate><guid>https://caisong.github.io/posts/zeal%E7%A6%BB%E7%BA%BF/</guid><description>&lt;p>zeal是开源的devdoc查看工具，类似于Macos下的&lt;code>Dash&lt;/code>,且可以使用&lt;code>Dash&lt;/code>对应的源，github地址 &lt;code>Kapeli/feeds&lt;/code>&lt;/p></description></item><item><title>Wireshark编译、打包</title><link>https://caisong.github.io/posts/wireshark%E7%BC%96%E8%AF%91%E6%89%93%E5%8C%85/</link><pubDate>Fri, 03 Sep 2021 21:41:40 +0800</pubDate><guid>https://caisong.github.io/posts/wireshark%E7%BC%96%E8%AF%91%E6%89%93%E5%8C%85/</guid><description>&lt;p>&lt;strong>构建wireshark发布包，必须先生成user guide,并下载以下软件&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>htmlhelp （微软官网已经下不到了，直接百度找个）&lt;/li>
&lt;li>nsis 发布exe包用的&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bat" data-lang="bat">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">rem wireshark源码路径&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">set&lt;/span> WIRESHARK_BASE_DIR=E:\code
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">rem QT编译库路径&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">set&lt;/span> QT5_BASE_DIR=D:\Qt\5.15.2\msvc2019_64
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">rem 编译目录&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">cd&lt;/span> E:\code\wsbuild64
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cmake -G &lt;span style="color:#e6db74">&amp;#34;Visual Studio 16 2019&amp;#34;&lt;/span> -A x64 ..\wireshark
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">rem wirehsark vs工程文件&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>msbuild /m /p:Configuration=RelWithDebInfo Wireshark.sln
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">rem set PATH=&amp;#34;%PATH%;E:\code\wsbuild64\run\RelwithDebInfo&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">rem wirehark user guide 项目&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>msbuild /p:Configuration=RelWithDebInfo .\docbook\user_guide_chm.vcxproj
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">rem 构建发布包&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>msbuild /m /p:Configuration=RelWithDebInfo nsis_package_prep.vcxproj
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>msbuild /m /p:Configuration=RelWithDebInfo nsis_package.vcxproj
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>ltp telnet测试错误</title><link>https://caisong.github.io/posts/telnet/</link><pubDate>Fri, 03 Sep 2021 21:41:35 +0800</pubDate><guid>https://caisong.github.io/posts/telnet/</guid><description>&lt;p>Cut out summary from your post content here.&lt;/p></description></item><item><title>Rsh 配置</title><link>https://caisong.github.io/posts/rsh%E9%85%8D%E7%BD%AE/</link><pubDate>Fri, 03 Sep 2021 21:41:26 +0800</pubDate><guid>https://caisong.github.io/posts/rsh%E9%85%8D%E7%BD%AE/</guid><description>&lt;p>基于LTP做测试用的，现在rsh较少使用了，仅记录&lt;/p>
&lt;ol>
&lt;li>安装xinetd&lt;/li>
&lt;li>添加rsh rexec rlogin 至/etc/securetty (root权限问题参考其他文档)&lt;/li>
&lt;li>配置conf文件，位于/etc/xinetd.d/&lt;/li>
&lt;li>配置hosts&lt;/li>
&lt;li>添加“machine_name user_name” &amp;raquo; ~/.rhosts&lt;/li>
&lt;li>重启服务&lt;/li>
&lt;/ol></description></item><item><title>Python换行符处理</title><link>https://caisong.github.io/posts/python%E6%8D%A2%E8%A1%8C%E7%AC%A6%E5%A4%84%E7%90%86/</link><pubDate>Fri, 03 Sep 2021 21:41:22 +0800</pubDate><guid>https://caisong.github.io/posts/python%E6%8D%A2%E8%A1%8C%E7%AC%A6%E5%A4%84%E7%90%86/</guid><description>&lt;h1 id="python换行符处理">python换行符处理&lt;/h1>
&lt;h2 id="python-2pep-278----universal-newline-support">Python 2（PEP 278 &amp;ndash; Universal Newline Support）&lt;/h2>
&lt;ol>
&lt;li>如果不是txt文件，建议用wb和rb来读写。通过二进制读写，不会有换行问题。&lt;/li>
&lt;li>如果需要明文内容，请用rU来读取（&lt;strong>强烈推荐&lt;/strong>），即&lt;strong>U通用换行模式（Universal new line mode）。该模式会把所有的换行符（\r \n \r\n）替换为\n&lt;/strong>。只支持读入，但是也足够了。这是Python 提供给我们的最好的选择，没有之一。&lt;/li>
&lt;/ol>
&lt;p>对比r和rU的结果：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>content &lt;span style="color:#f92672">=&lt;/span> file(fn, &lt;span style="color:#e6db74">&amp;#39;r&amp;#39;&lt;/span>)&lt;span style="color:#f92672">.&lt;/span>read()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># test\r\ntest2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 这里的换行会因不同系统而不同 &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>content &lt;span style="color:#f92672">=&lt;/span> file(fn, &lt;span style="color:#e6db74">&amp;#39;rU&amp;#39;&lt;/span>)&lt;span style="color:#f92672">.&lt;/span>read()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># test\ntest2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 所有的换行都被统一，不分系统&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="python-3open函数-2-built-in-functions">Python 3(Open函数: 2. Built-in Functions)&lt;/h2>
&lt;p>** 请注意：Python 3不推荐用rU模式！**&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>open(file, mode&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;r&amp;#39;&lt;/span>, buffering&lt;span style="color:#f92672">=-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>, encoding&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">None&lt;/span>, errors&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">None&lt;/span>, newline&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">None&lt;/span>, closefd&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">True&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>在Python 3，可以通过open函数的&lt;strong>newline&lt;/strong>参数来控制&lt;strong>Universal new line mode&lt;/strong>：读取时候，不指定newline，则默认开启Universal new line mode，所有\n, \r, or \r\n被默认转换为\n ；写入时，不指定newline，则换行符为各系统默认的换行符（\n, \r, or \r\n, ），指定为newline=&amp;rsquo;\n&amp;rsquo;，则都替换为\n（相当于Universal new line mode）；不论读或者写时，newline=&amp;lsquo;&amp;lsquo;都表示不转换。&lt;/p></description></item><item><title>pip配置、命令</title><link>https://caisong.github.io/posts/python%E9%85%8D%E7%BD%AE/</link><pubDate>Fri, 03 Sep 2021 21:41:21 +0800</pubDate><guid>https://caisong.github.io/posts/python%E9%85%8D%E7%BD%AE/</guid><description>&lt;h2 id="镜像配置">镜像配置&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># windows 路径 C:\Users\username\pip\pip.ini&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># linux 路径 ~/.pip/pip.conf &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>global&lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>index-url &lt;span style="color:#f92672">=&lt;/span> https://mirrors.aliyun.com/pypi/simple/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="pip-命令">pip 命令&lt;/h2>
&lt;p>pip list &amp;ndash;outdated #列出所有过期的库
pip install &amp;ndash;upgrade 库名 #升级库&lt;/p>
&lt;h2 id="一键升级过期源">一键升级过期源&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> pip
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> subprocess &lt;span style="color:#f92672">import&lt;/span> call
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> dist &lt;span style="color:#f92672">in&lt;/span> pip&lt;span style="color:#f92672">.&lt;/span>get_installed_distributions():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> call(&lt;span style="color:#e6db74">&amp;#34;pip install --upgrade &amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> dist&lt;span style="color:#f92672">.&lt;/span>project_name, shell&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">True&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Pip install UnicodeDecodeError</title><link>https://caisong.github.io/posts/pipinstallunicodedecodeerror/</link><pubDate>Fri, 03 Sep 2021 21:41:18 +0800</pubDate><guid>https://caisong.github.io/posts/pipinstallunicodedecodeerror/</guid><description>&lt;h2 id="pip-install-unicodedecodeerror">pip install UnicodeDecodeError&lt;/h2>
&lt;p>解决方法：
python目录 &lt;code>Python27\Lib\site-packages&lt;/code> 建一个文件&lt;code>sitecustomize.py&lt;/code>
内容为：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> sys
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sys&lt;span style="color:#f92672">.&lt;/span>setdefaultencoding(&lt;span style="color:#e6db74">&amp;#39;gbk&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Minikube 部署</title><link>https://caisong.github.io/posts/minikube/</link><pubDate>Fri, 03 Sep 2021 21:41:11 +0800</pubDate><guid>https://caisong.github.io/posts/minikube/</guid><description>&lt;h1 id="minikube">minikube&lt;/h1>
&lt;p>&lt;a href="https://github.com/AliyunContainerService/minikube">https://github.com/AliyunContainerService/minikube&lt;/a>
&lt;a href="https://developer.aliyun.com/article/221687">https://developer.aliyun.com/article/221687&lt;/a>
&lt;a href="https://blog.csdn.net/wchbest/article/details/88873965">https://blog.csdn.net/wchbest/article/details/88873965&lt;/a>
&lt;a href="https://minikube.sigs.k8s.io/docs/start/">https://minikube.sigs.k8s.io/docs/start/&lt;/a>
&lt;a href="https://www.jianshu.com/p/a42eeb66a19c">https://www.jianshu.com/p/a42eeb66a19c&lt;/a>
&lt;a href="https://www.cnblogs.com/kazihuo/p/10184286.html">https://www.cnblogs.com/kazihuo/p/10184286.html&lt;/a>&lt;/p></description></item><item><title>sql server数据转存mongodb</title><link>https://caisong.github.io/posts/mongodb/</link><pubDate>Fri, 03 Sep 2021 21:41:11 +0800</pubDate><guid>https://caisong.github.io/posts/mongodb/</guid><description>&lt;p>写得比较简单，直接查询插入了&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#!/usr/bin/env python&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># -*- coding:utf-8 -*-&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> pymssql
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> pymongo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sql &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;SELECT [Name]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[CardNo]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[Descriot]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[CtfTp]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[CtfId]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[Gender]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[Birthday]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[Address]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[Zip]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[Dirty]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[District1]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[District2]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[District3]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[District4]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[District5]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[District6]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[FirstNm]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[LastNm]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[Duty]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[Mobile]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[Tel]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[Fax]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[EMail]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[Nation]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[Taste]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[Education]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[Company]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[CTel]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[CAddress]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[CZip]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[Family]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ,[Version]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> FROM cdsgus&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ms_conn &lt;span style="color:#f92672">=&lt;/span> pymssql&lt;span style="color:#f92672">.&lt;/span>connect(host&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;127.0.0.1&amp;#34;&lt;/span>, user&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;sa&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> password&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;root&amp;#34;&lt;/span>, database&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;database&amp;#34;&lt;/span>, charset&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;utf8&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ms_cur &lt;span style="color:#f92672">=&lt;/span> ms_conn&lt;span style="color:#f92672">.&lt;/span>cursor(as_dict&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">True&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ms_cur&lt;span style="color:#f92672">.&lt;/span>execute(sql)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>row &lt;span style="color:#f92672">=&lt;/span> ms_cur&lt;span style="color:#f92672">.&lt;/span>fetchone()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mongo_conn &lt;span style="color:#f92672">=&lt;/span> pymongo&lt;span style="color:#f92672">.&lt;/span>MongoClient(&lt;span style="color:#e6db74">&amp;#39;127.0.0.1&amp;#39;&lt;/span>, &lt;span style="color:#ae81ff">27017&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mongo_db &lt;span style="color:#f92672">=&lt;/span> mongo_conn[&lt;span style="color:#e6db74">&amp;#39;test&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">while&lt;/span> row:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mongo_db&lt;span style="color:#f92672">.&lt;/span>kf_data&lt;span style="color:#f92672">.&lt;/span>insert_one(row)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> row &lt;span style="color:#f92672">=&lt;/span> ms_cur&lt;span style="color:#f92672">.&lt;/span>fetchone()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ms_conn&lt;span style="color:#f92672">.&lt;/span>commit()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ms_conn&lt;span style="color:#f92672">.&lt;/span>close()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Make modules</title><link>https://caisong.github.io/posts/makemodules/</link><pubDate>Fri, 03 Sep 2021 21:41:10 +0800</pubDate><guid>https://caisong.github.io/posts/makemodules/</guid><description>&lt;p>编译module&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>make -C &lt;span style="color:#f92672">{&lt;/span>kernel src&lt;span style="color:#f92672">}&lt;/span> -M&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>pwd&lt;span style="color:#e6db74">`&lt;/span> modules
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>LTP network environment</title><link>https://caisong.github.io/posts/ltpnetworkenvironment/</link><pubDate>Fri, 03 Sep 2021 21:41:08 +0800</pubDate><guid>https://caisong.github.io/posts/ltpnetworkenvironment/</guid><description>&lt;p>LTP 网络相关测试集环境配置&lt;/p>
&lt;h2 id="clientdebian">client(debian)&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>sudo apt-get install rsh-server nfs-kernel-server fingerd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo $client_hostname &amp;gt;&amp;gt; /root/.rhosts
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/sbin/restorecon -v /root/.rhosts &lt;span style="color:#f92672">[&lt;/span>optional&lt;span style="color:#f92672">]&lt;/span> &lt;span style="color:#f92672">(&lt;/span>sudo apt-get install policycoreutils&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> i in rlogin rsh rexec; &lt;span style="color:#66d9ef">do&lt;/span> echo $i &amp;gt;&amp;gt; /etc/securetty; &lt;span style="color:#66d9ef">done&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export RHOST&lt;span style="color:#f92672">=&lt;/span>$SERVER_HOSTNAME
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PASSWD&lt;span style="color:#f92672">=&lt;/span>$ROOT_PASSWD
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="serverubuntu">server(ubuntu)&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>sudo apt-get install rsh-server telnetd cfingerd rdist rsync udhcpd lighttpd nfs-kernel-server
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo $client_hostname &amp;gt;&amp;gt; /root/.rhosts
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/sbin/restorecon -v /root/.rhosts &lt;span style="color:#f92672">[&lt;/span>optional&lt;span style="color:#f92672">]&lt;/span> &lt;span style="color:#f92672">(&lt;/span>sudo apt-get install policycoreutils&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> i in rlogin rsh rexec; &lt;span style="color:#66d9ef">do&lt;/span> echo $i &amp;gt;&amp;gt; /etc/securetty; &lt;span style="color:#66d9ef">done&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>vim /etc/ftpusers
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># comment line containing &amp;#34;root&amp;#34; string&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export RHOST&lt;span style="color:#f92672">=&lt;/span>$CLIENT_HOSTNAME
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PASSWD&lt;span style="color:#f92672">=&lt;/span>$ROOT_PASSWD
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="network-test">network test&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>export PATH&lt;span style="color:#f92672">=&lt;/span>/opt/ltp/testcases/bin:/usr/bin:$PATH
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export LHOST_HWADDRS&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;00:0c:29:f8:7d:01&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export RHOST_HWADDRS&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;00:0c:29:ce:b3:2f&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export LHOST_IFACES&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;eth0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export RHOST_IFACES&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;ens33&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export IPV4_NETWORK&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;192.168.30&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export LHOST_IPV4_HOST&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">130&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export RHOST_IPV4_HOST&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">134&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export LTP_RSH&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>LTP_RSH&lt;span style="color:#66d9ef">:-&lt;/span>&lt;span style="color:#e6db74">&amp;#34;rsh -n&amp;#34;&lt;/span>&lt;span style="color:#e6db74">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>LTP_RSH&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>LTP_RSH&lt;span style="color:#66d9ef">:-&lt;/span>&lt;span style="color:#e6db74">&amp;#34;rsh -n&amp;#34;&lt;/span>&lt;span style="color:#e6db74">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export LTP_RSH&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>$LTP_RSH&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export LHOST_IPV6_HOST&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;fef8:7d01&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export RHOST_IPV6_HOST&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;fece:b32f&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export IPV6_NETWORK&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;fe80::20c:29ff&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export NS_DURATION&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">60&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Linux查看库信息常用命令</title><link>https://caisong.github.io/posts/linux%E6%9F%A5%E7%9C%8B%E5%BA%93%E4%BF%A1%E6%81%AF%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</link><pubDate>Fri, 03 Sep 2021 21:41:06 +0800</pubDate><guid>https://caisong.github.io/posts/linux%E6%9F%A5%E7%9C%8B%E5%BA%93%E4%BF%A1%E6%81%AF%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</guid><description>&lt;p>linux 查看库信息常用命令&lt;/p></description></item><item><title>Koelsch uboot参数</title><link>https://caisong.github.io/posts/koelschuboot%E5%8F%82%E6%95%B0/</link><pubDate>Fri, 03 Sep 2021 21:41:04 +0800</pubDate><guid>https://caisong.github.io/posts/koelschuboot%E5%8F%82%E6%95%B0/</guid><description>&lt;h2 id="init-env">init env&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>setenv ethaddr 2e:09:0a:00:6c:e1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>setenv ipaddr 192.168.10.5
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>setenv serverip 192.168.10.2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="bootcmd">bootcmd&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># zImage&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>setenv bootcmd &lt;span style="color:#e6db74">&amp;#39;tftp 0x40007fc0 zImage;tftp 0x40f00000 r8a7791-koelsch.dtb;bootz 0x40007fc0 - 0x40f00000&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># uImage&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>setenv bootcmd &lt;span style="color:#e6db74">&amp;#39;tftp 0x40007fc0 uImage;tftp 0x40f00000 r8a7791-koelsch.dtb;bootm 0x40007fc0 - 0x40f00000&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="bootargs">bootargs&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># nfs&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>setenv bootargs &lt;span style="color:#e6db74">&amp;#39;console=ttySC6,38400 vmalloc=384M ip=192.168.10.5 root=/dev/nfs nfsroot=192.168.10.2:/opt/koelsch&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># sd&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>setenv bootargs &lt;span style="color:#e6db74">&amp;#39;console=ttySC6,38400 vmalloc=384M root=/dev/mmcblk0p1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="optional">optional&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#kernel 写入flash&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>setenv bootcmd &lt;span style="color:#e6db74">&amp;#39;tftp 0x40007fc0 zImage;tftp 0x40f00000 r8a7791-koelsch.dtb;bootz 0x40007fc0 - 0x40f00000&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tftpboot 0x41000000 r8a7791-koelsch.dtb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sf probe
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sf erase 0x100000 0x40000
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sf write 0x41000000 0x100000 0x40000
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>setenv bootargs &lt;span style="color:#e6db74">&amp;#39;console=ttySC6,38400 vmalloc=384M ip=192.168.10.5 root=/dev/nfs nfsroot=192.168.10.2:/opt/koelsch&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tftpboot 0x41000000 zImage
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 0x340000 - 内核大小256向上取整&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>setenv kern_size 0x340000
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sf probe
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sf erase 0x140000 &lt;span style="color:#e6db74">${&lt;/span>kern_size&lt;span style="color:#e6db74">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sf write 0x41000000 0x140000 &lt;span style="color:#e6db74">${&lt;/span>kern_size&lt;span style="color:#e6db74">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>setenv bootcmd &lt;span style="color:#e6db74">&amp;#39;sf probe;sf read 0x40007fc0 0x140000 ${kern_size};sf read 0x40f00000 0x100000 0x40000;bootz 0x40007fc0 - 0x40f00000&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>saveenv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Iptables 记录</title><link>https://caisong.github.io/posts/iptables/</link><pubDate>Fri, 03 Sep 2021 21:41:02 +0800</pubDate><guid>https://caisong.github.io/posts/iptables/</guid><description>&lt;p>The &lt;code>iptables&lt;/code> command will attempt a reverse lookup on ip addresses. This will produce exactly the behavior you describe. You can inhibit the reverse lookup with the -n flag, which is why I always list rules like this:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>iptables -vnL
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>This fact and many other useful tidbits can be found in the &lt;code>iptables&lt;/code> man page. The relevant section concerning &lt;code>-n&lt;/code> reads:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>-L, --list &lt;span style="color:#f92672">[&lt;/span>chain&lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>List all rules in the selected chain. If no chain is selected, all chains
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>are listed. Like every other iptables command, it applies to the specified
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>table &lt;span style="color:#f92672">(&lt;/span>filter is the default&lt;span style="color:#f92672">)&lt;/span>, so NAT rules get listed by
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> iptables -t nat -n -L
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Please note that it is often used with the -n option, in order to avoid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>long reverse DNS lookups. It is legal to specify the -Z &lt;span style="color:#f92672">(&lt;/span>zero&lt;span style="color:#f92672">)&lt;/span> option as
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>well, in which &lt;span style="color:#66d9ef">case&lt;/span> the chain&lt;span style="color:#f92672">(&lt;/span>s&lt;span style="color:#f92672">)&lt;/span> will be atomically listed and zeroed. The
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>exact output is affected by the other arguments given. The exact rules are
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>suppressed &lt;span style="color:#66d9ef">until&lt;/span> you use
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> iptables -L -v
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Tags:
iptables&lt;/p></description></item><item><title>Install nodejs</title><link>https://caisong.github.io/posts/installnodejs/</link><pubDate>Fri, 03 Sep 2021 21:41:01 +0800</pubDate><guid>https://caisong.github.io/posts/installnodejs/</guid><description>&lt;p>Cut out summary from your post content here.&lt;/p></description></item><item><title>Ffsb结果解析</title><link>https://caisong.github.io/posts/ffsb%E7%BB%93%E6%9E%9C%E8%A7%A3%E6%9E%90/</link><pubDate>Fri, 03 Sep 2021 21:40:49 +0800</pubDate><guid>https://caisong.github.io/posts/ffsb%E7%BB%93%E6%9E%9C%E8%A7%A3%E6%9E%90/</guid><description>&lt;p>ffsb结果解析&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-plain" data-lang="plain">&lt;span style="display:flex;">&lt;span>FFSB version 6.0-RC2 started
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>benchmark time = 10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ThreadGroup 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_threads = 4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skip = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skipsize = 0	(0B)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 fsync_file = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 wait time = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 op weights
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 readall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 delete = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 metaop = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 createdir = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 stat = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 open_close = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_fsync = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FileSystem /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_dirs = 100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 starting files = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 Fileset weight:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 33554432 ( 32MB) -&amp;gt; 1 (1.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8388608 ( 8MB) -&amp;gt; 2 (2.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 524288 ( 512KB) -&amp;gt; 3 (3.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 262144 ( 256KB) -&amp;gt; 4 (4.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 131072 ( 128KB) -&amp;gt; 5 (5.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 65536 ( 64KB) -&amp;gt; 8 (8.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 32768 ( 32KB) -&amp;gt; 10 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 16384 ( 16KB) -&amp;gt; 13 (13.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8192 ( 8KB) -&amp;gt; 21 (21.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 4096 ( 4KB) -&amp;gt; 33 (33.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 directio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 alignedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 bufferedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 aging is off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 current utilization = 0.06%
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>creating new fileset /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB version 6.0-RC2 started
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>benchmark time = 10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ThreadGroup 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_threads = 4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skip = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skipsize = 0	(0B)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 fsync_file = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 wait time = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 op weights
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 readall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 delete = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 metaop = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 createdir = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 stat = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 open_close = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_fsync = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FileSystem /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_dirs = 100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 starting files = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 Fileset weight:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 33554432 ( 32MB) -&amp;gt; 1 (1.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8388608 ( 8MB) -&amp;gt; 2 (2.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 524288 ( 512KB) -&amp;gt; 3 (3.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 262144 ( 256KB) -&amp;gt; 4 (4.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 131072 ( 128KB) -&amp;gt; 5 (5.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 65536 ( 64KB) -&amp;gt; 8 (8.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 32768 ( 32KB) -&amp;gt; 10 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 16384 ( 16KB) -&amp;gt; 13 (13.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8192 ( 8KB) -&amp;gt; 21 (21.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 4096 ( 4KB) -&amp;gt; 33 (33.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 directio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 alignedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 bufferedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 aging is off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 current utilization = 0.06%
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>creating new fileset /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB version 6.0-RC2 started
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>benchmark time = 10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ThreadGroup 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_threads = 4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skip = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skipsize = 0	(0B)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 fsync_file = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 wait time = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 op weights
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 readall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 delete = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 metaop = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 createdir = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 stat = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 open_close = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_fsync = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FileSystem /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_dirs = 100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 starting files = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 Fileset weight:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 33554432 ( 32MB) -&amp;gt; 1 (1.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8388608 ( 8MB) -&amp;gt; 2 (2.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 524288 ( 512KB) -&amp;gt; 3 (3.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 262144 ( 256KB) -&amp;gt; 4 (4.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 131072 ( 128KB) -&amp;gt; 5 (5.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 65536 ( 64KB) -&amp;gt; 8 (8.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 32768 ( 32KB) -&amp;gt; 10 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 16384 ( 16KB) -&amp;gt; 13 (13.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8192 ( 8KB) -&amp;gt; 21 (21.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 4096 ( 4KB) -&amp;gt; 33 (33.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 directio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 alignedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 bufferedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 aging is off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 current utilization = 0.06%
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>creating new fileset /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB version 6.0-RC2 started
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>benchmark time = 10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ThreadGroup 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_threads = 4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skip = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skipsize = 0	(0B)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 fsync_file = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 wait time = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 op weights
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 readall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 delete = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 metaop = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 createdir = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 stat = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 open_close = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_fsync = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FileSystem /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_dirs = 100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 starting files = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 Fileset weight:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 33554432 ( 32MB) -&amp;gt; 1 (1.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8388608 ( 8MB) -&amp;gt; 2 (2.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 524288 ( 512KB) -&amp;gt; 3 (3.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 262144 ( 256KB) -&amp;gt; 4 (4.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 131072 ( 128KB) -&amp;gt; 5 (5.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 65536 ( 64KB) -&amp;gt; 8 (8.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 32768 ( 32KB) -&amp;gt; 10 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 16384 ( 16KB) -&amp;gt; 13 (13.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8192 ( 8KB) -&amp;gt; 21 (21.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 4096 ( 4KB) -&amp;gt; 33 (33.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 directio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 alignedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 bufferedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 aging is off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 current utilization = 0.06%
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>creating new fileset /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB version 6.0-RC2 started
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>benchmark time = 10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ThreadGroup 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_threads = 4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skip = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skipsize = 0	(0B)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 fsync_file = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 wait time = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 op weights
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 readall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 delete = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 metaop = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 createdir = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 stat = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 open_close = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_fsync = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FileSystem /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_dirs = 100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 starting files = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 Fileset weight:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 33554432 ( 32MB) -&amp;gt; 1 (1.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8388608 ( 8MB) -&amp;gt; 2 (2.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 524288 ( 512KB) -&amp;gt; 3 (3.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 262144 ( 256KB) -&amp;gt; 4 (4.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 131072 ( 128KB) -&amp;gt; 5 (5.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 65536 ( 64KB) -&amp;gt; 8 (8.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 32768 ( 32KB) -&amp;gt; 10 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 16384 ( 16KB) -&amp;gt; 13 (13.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8192 ( 8KB) -&amp;gt; 21 (21.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 4096 ( 4KB) -&amp;gt; 33 (33.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 directio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 alignedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 bufferedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 aging is off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 current utilization = 0.06%
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>creating new fileset /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB version 6.0-RC2 started
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>benchmark time = 10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ThreadGroup 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_threads = 4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skip = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skipsize = 0	(0B)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 fsync_file = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 wait time = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 op weights
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 readall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 delete = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 metaop = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 createdir = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 stat = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 open_close = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_fsync = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FileSystem /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_dirs = 100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 starting files = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 Fileset weight:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 33554432 ( 32MB) -&amp;gt; 1 (1.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8388608 ( 8MB) -&amp;gt; 2 (2.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 524288 ( 512KB) -&amp;gt; 3 (3.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 262144 ( 256KB) -&amp;gt; 4 (4.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 131072 ( 128KB) -&amp;gt; 5 (5.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 65536 ( 64KB) -&amp;gt; 8 (8.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 32768 ( 32KB) -&amp;gt; 10 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 16384 ( 16KB) -&amp;gt; 13 (13.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8192 ( 8KB) -&amp;gt; 21 (21.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 4096 ( 4KB) -&amp;gt; 33 (33.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 directio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 alignedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 bufferedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 aging is off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 current utilization = 0.06%
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>creating new fileset /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB version 6.0-RC2 started
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>benchmark time = 10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ThreadGroup 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_threads = 4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skip = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skipsize = 0	(0B)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 fsync_file = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 wait time = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 op weights
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 readall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 delete = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 metaop = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 createdir = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 stat = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 open_close = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_fsync = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FileSystem /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_dirs = 100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 starting files = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 Fileset weight:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 33554432 ( 32MB) -&amp;gt; 1 (1.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8388608 ( 8MB) -&amp;gt; 2 (2.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 524288 ( 512KB) -&amp;gt; 3 (3.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 262144 ( 256KB) -&amp;gt; 4 (4.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 131072 ( 128KB) -&amp;gt; 5 (5.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 65536 ( 64KB) -&amp;gt; 8 (8.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 32768 ( 32KB) -&amp;gt; 10 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 16384 ( 16KB) -&amp;gt; 13 (13.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8192 ( 8KB) -&amp;gt; 21 (21.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 4096 ( 4KB) -&amp;gt; 33 (33.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 directio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 alignedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 bufferedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 aging is off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 current utilization = 0.06%
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>creating new fileset /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB version 6.0-RC2 started
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>benchmark time = 10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ThreadGroup 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_threads = 4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skip = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skipsize = 0	(0B)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 fsync_file = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 wait time = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 op weights
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 readall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 delete = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 metaop = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 createdir = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 stat = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 open_close = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_fsync = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FileSystem /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_dirs = 100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 starting files = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 Fileset weight:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 33554432 ( 32MB) -&amp;gt; 1 (1.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8388608 ( 8MB) -&amp;gt; 2 (2.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 524288 ( 512KB) -&amp;gt; 3 (3.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 262144 ( 256KB) -&amp;gt; 4 (4.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 131072 ( 128KB) -&amp;gt; 5 (5.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 65536 ( 64KB) -&amp;gt; 8 (8.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 32768 ( 32KB) -&amp;gt; 10 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 16384 ( 16KB) -&amp;gt; 13 (13.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8192 ( 8KB) -&amp;gt; 21 (21.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 4096 ( 4KB) -&amp;gt; 33 (33.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 directio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 alignedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 bufferedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 aging is off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 current utilization = 0.06%
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>creating new fileset /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB version 6.0-RC2 started
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>benchmark time = 10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ThreadGroup 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_threads = 4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skip = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skipsize = 0	(0B)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 fsync_file = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 wait time = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 op weights
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 readall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 delete = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 metaop = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 createdir = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 stat = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 open_close = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_fsync = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FileSystem /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_dirs = 100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 starting files = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 Fileset weight:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 33554432 ( 32MB) -&amp;gt; 1 (1.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8388608 ( 8MB) -&amp;gt; 2 (2.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 524288 ( 512KB) -&amp;gt; 3 (3.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 262144 ( 256KB) -&amp;gt; 4 (4.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 131072 ( 128KB) -&amp;gt; 5 (5.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 65536 ( 64KB) -&amp;gt; 8 (8.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 32768 ( 32KB) -&amp;gt; 10 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 16384 ( 16KB) -&amp;gt; 13 (13.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8192 ( 8KB) -&amp;gt; 21 (21.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 4096 ( 4KB) -&amp;gt; 33 (33.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 directio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 alignedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 bufferedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 aging is off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 current utilization = 0.06%
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>creating new fileset /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB version 6.0-RC2 started
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>benchmark time = 10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ThreadGroup 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_threads = 4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skip = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skipsize = 0	(0B)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 fsync_file = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 wait time = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 op weights
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 readall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 delete = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 metaop = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 createdir = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 stat = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 open_close = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_fsync = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FileSystem /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_dirs = 100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 starting files = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 Fileset weight:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 33554432 ( 32MB) -&amp;gt; 1 (1.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8388608 ( 8MB) -&amp;gt; 2 (2.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 524288 ( 512KB) -&amp;gt; 3 (3.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 262144 ( 256KB) -&amp;gt; 4 (4.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 131072 ( 128KB) -&amp;gt; 5 (5.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 65536 ( 64KB) -&amp;gt; 8 (8.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 32768 ( 32KB) -&amp;gt; 10 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 16384 ( 16KB) -&amp;gt; 13 (13.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8192 ( 8KB) -&amp;gt; 21 (21.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 4096 ( 4KB) -&amp;gt; 33 (33.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 directio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 alignedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 bufferedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 aging is off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 current utilization = 0.06%
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>creating new fileset /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB version 6.0-RC2 started
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>benchmark time = 10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ThreadGroup 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_threads = 4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skip = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skipsize = 0	(0B)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 fsync_file = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 wait time = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 op weights
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 readall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 delete = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 metaop = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 createdir = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 stat = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 open_close = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_fsync = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FileSystem /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_dirs = 100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 starting files = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 Fileset weight:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 33554432 ( 32MB) -&amp;gt; 1 (1.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8388608 ( 8MB) -&amp;gt; 2 (2.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 524288 ( 512KB) -&amp;gt; 3 (3.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 262144 ( 256KB) -&amp;gt; 4 (4.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 131072 ( 128KB) -&amp;gt; 5 (5.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 65536 ( 64KB) -&amp;gt; 8 (8.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 32768 ( 32KB) -&amp;gt; 10 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 16384 ( 16KB) -&amp;gt; 13 (13.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8192 ( 8KB) -&amp;gt; 21 (21.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 4096 ( 4KB) -&amp;gt; 33 (33.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 directio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 alignedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 bufferedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 aging is off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 current utilization = 48.97%
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>creating new fileset /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fs setup took 0 secs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Syncing()...6 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Starting Actual Benchmark At: Thu Jan 26 00:30:47 2017
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Syncing()...1 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB benchmark finished at: Thu Jan 26 00:31:01 2017
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Results:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Benchmark took 13.87 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Total Results
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>===============
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Op Name Transactions	 Trans/sec	% Trans	 % Op Weight	 Throughput
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ======= ============	 =========	=======	 ===========	 ==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> readall : 11698	 843.15	15.010%		10.380%	 3.29MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> create : 16440	 1184.94	21.095%		10.791%	 4.63MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> append : 1010	 72.80	 1.296%		10.380%	 291KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> delete : 93	 6.70	 0.119%		 9.558%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stat : 87	 6.27	 0.112%		 8.941%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> writeall : 13949	 1005.39	17.899%		10.380%	 3.93MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> writeall_fsync : 30079	 2167.99	38.596%		 9.147%	 8.47MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> open_close : 99	 7.14	 0.127%		10.175%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> create_fsync : 3438	 247.80	 4.411%		 9.558%	 991KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> append_fsync : 1040	 74.96	 1.334%		10.689%	 300KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>5617.14 Transactions per Second
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Throughput Results
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>===================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Read Throughput: 3.29MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Write Throughput: 18.6MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>System Call Latency statistics in millisecs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>=====
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		Min		Avg		Max		Total Calls
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		========	========	========	============
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ open]	0.013000	0.269726	124.470001	 793
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ read]	0.003000	0.005743	5.221000	 11698
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ write]	0.004000	0.079473	420.509003	 65956
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ unlink]	0.057000	3.104903	139.417007	 93
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ close]	0.002000	0.004115	0.015000	 793
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ stat]	0.012000	0.019023	0.044000	 87
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>0.5% User Time
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10.8% System Time
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>11.3% CPU Utilization
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB version 6.0-RC2 started
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>benchmark time = 10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ThreadGroup 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_threads = 4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skip = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skipsize = 0	(0B)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 fsync_file = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 wait time = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 op weights
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 readall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 delete = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 metaop = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 createdir = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 stat = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 open_close = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_fsync = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FileSystem /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_dirs = 100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 starting files = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 Fileset weight:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 33554432 ( 32MB) -&amp;gt; 1 (1.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8388608 ( 8MB) -&amp;gt; 2 (2.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 524288 ( 512KB) -&amp;gt; 3 (3.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 262144 ( 256KB) -&amp;gt; 4 (4.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 131072 ( 128KB) -&amp;gt; 5 (5.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 65536 ( 64KB) -&amp;gt; 8 (8.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 32768 ( 32KB) -&amp;gt; 10 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 16384 ( 16KB) -&amp;gt; 13 (13.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8192 ( 8KB) -&amp;gt; 21 (21.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 4096 ( 4KB) -&amp;gt; 33 (33.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 directio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 alignedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 bufferedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 aging is off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 current utilization = 48.90%
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>creating new fileset /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fs setup took 0 secs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Syncing()...7 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Starting Actual Benchmark At: Thu Jan 26 00:31:09 2017
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Syncing()...7 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB benchmark finished at: Thu Jan 26 00:31:27 2017
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Results:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Benchmark took 17.96 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Total Results
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>===============
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Op Name Transactions	 Trans/sec	% Trans	 % Op Weight	 Throughput
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ======= ============	 =========	=======	 ===========	 ==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> readall : 3432	 191.13	 4.840%		 8.575%	 765KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> create : 38123	 2123.12	53.766%		11.475%	 8.29MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> append : 770	 42.88	 1.086%		 9.710%	 172KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> delete : 89	 4.96	 0.126%		11.223%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stat : 88	 4.90	 0.124%		11.097%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> writeall : 21664	 1206.50	30.554%		 9.458%	 4.71MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> writeall_fsync : 3169	 176.49	 4.469%		 8.701%	 706KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> open_close : 77	 4.29	 0.109%		 9.710%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> create_fsync : 2723	 151.65	 3.840%		10.340%	 607KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> append_fsync : 770	 42.88	 1.086%		 9.710%	 172KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>3948.80 Transactions per Second
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Throughput Results
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>===================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Read Throughput: 765KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Write Throughput: 14.6MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>System Call Latency statistics in millisecs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>=====
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		Min		Avg		Max		Total Calls
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		========	========	========	============
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ open]	0.012000	0.582338	189.878998	 616
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ read]	0.003000	0.012614	26.857000	 3432
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ write]	0.004000	0.293199	664.065979	 67219
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ unlink]	0.058000	1.302730	31.836000	 89
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ close]	0.001000	0.004412	0.079000	 616
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ stat]	0.012000	0.020182	0.045000	 88
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>0.4% User Time
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>6.6% System Time
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>7.0% CPU Utilization
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB version 6.0-RC2 started
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>benchmark time = 10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ThreadGroup 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_threads = 4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skip = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skipsize = 0	(0B)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 fsync_file = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 wait time = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 op weights
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 readall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 delete = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 metaop = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 createdir = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 stat = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 open_close = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_fsync = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FileSystem /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_dirs = 100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 starting files = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 Fileset weight:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 33554432 ( 32MB) -&amp;gt; 1 (1.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8388608 ( 8MB) -&amp;gt; 2 (2.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 524288 ( 512KB) -&amp;gt; 3 (3.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 262144 ( 256KB) -&amp;gt; 4 (4.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 131072 ( 128KB) -&amp;gt; 5 (5.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 65536 ( 64KB) -&amp;gt; 8 (8.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 32768 ( 32KB) -&amp;gt; 10 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 16384 ( 16KB) -&amp;gt; 13 (13.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8192 ( 8KB) -&amp;gt; 21 (21.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 4096 ( 4KB) -&amp;gt; 33 (33.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 directio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 alignedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 bufferedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 aging is off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 current utilization = 54.25%
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>creating new fileset /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fs setup took 0 secs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Syncing()...6 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Starting Actual Benchmark At: Thu Jan 26 00:31:35 2017
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Syncing()...4 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB benchmark finished at: Thu Jan 26 00:31:51 2017
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Results:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Benchmark took 15.95 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Total Results
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>===============
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Op Name Transactions	 Trans/sec	% Trans	 % Op Weight	 Throughput
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ======= ============	 =========	=======	 ===========	 ==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> readall : 5024	 314.95	 6.525%		12.191%	 1.23MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> create : 29424	 1844.59	38.212%		 8.237%	 7.21MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> append : 590	 36.99	 0.766%		 9.720%	 148KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> delete : 62	 3.89	 0.081%		10.214%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stat : 69	 4.33	 0.090%		11.367%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> writeall : 2700	 169.26	 3.506%		 9.885%	 677KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> writeall_fsync : 13314	 834.65	17.290%		10.214%	 3.26MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> open_close : 57	 3.57	 0.074%		 9.390%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> create_fsync : 25282	 1584.92	32.833%		10.873%	 6.19MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> append_fsync : 480	 30.09	 0.623%		 7.908%	 120KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>4827.24 Transactions per Second
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Throughput Results
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>===================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Read Throughput: 1.23MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Write Throughput: 17.6MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>System Call Latency statistics in millisecs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>=====
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		Min		Avg		Max		Total Calls
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		========	========	========	============
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ open]	0.014000	0.114055	18.941999	 476
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ read]	0.003000	0.008782	10.585000	 5024
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ write]	0.004000	0.113076	481.164001	 71790
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ unlink]	0.058000	2.897145	164.621002	 62
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ close]	0.002000	0.004489	0.084000	 476
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ stat]	0.011000	0.017609	0.057000	 69
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>0.5% User Time
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10.5% System Time
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>11.0% CPU Utilization
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB version 6.0-RC2 started
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>benchmark time = 10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ThreadGroup 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_threads = 4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skip = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skipsize = 0	(0B)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 fsync_file = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 wait time = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 op weights
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 readall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 delete = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 metaop = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 createdir = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 stat = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 open_close = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_fsync = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FileSystem /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_dirs = 100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 starting files = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 Fileset weight:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 33554432 ( 32MB) -&amp;gt; 1 (1.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8388608 ( 8MB) -&amp;gt; 2 (2.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 524288 ( 512KB) -&amp;gt; 3 (3.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 262144 ( 256KB) -&amp;gt; 4 (4.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 131072 ( 128KB) -&amp;gt; 5 (5.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 65536 ( 64KB) -&amp;gt; 8 (8.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 32768 ( 32KB) -&amp;gt; 10 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 16384 ( 16KB) -&amp;gt; 13 (13.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8192 ( 8KB) -&amp;gt; 21 (21.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 4096 ( 4KB) -&amp;gt; 33 (33.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 directio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 alignedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 bufferedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 aging is off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 current utilization = 57.41%
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>creating new fileset /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fs setup took 0 secs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Syncing()...6 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Starting Actual Benchmark At: Thu Jan 26 00:31:58 2017
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Syncing()...4 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB benchmark finished at: Thu Jan 26 00:32:16 2017
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Results:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Benchmark took 17.60 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Total Results
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>===============
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Op Name Transactions	 Trans/sec	% Trans	 % Op Weight	 Throughput
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ======= ============	 =========	=======	 ===========	 ==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> readall : 27154	 1543.12	29.818%		10.382%	 6.03MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> create : 16028	 910.85	17.600%		 9.406%	 3.56MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> append : 1240	 70.47	 1.362%		11.003%	 282KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> delete : 115	 6.54	 0.126%		10.204%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stat : 129	 7.33	 0.142%		11.446%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> writeall : 18100	 1028.59	19.876%		 9.317%	 4.02MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> writeall_fsync : 13076	 743.09	14.359%		10.382%	 2.9MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> open_close : 102	 5.80	 0.112%		 9.051%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> create_fsync : 14082	 800.26	15.464%		 9.583%	 3.13MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> append_fsync : 1040	 59.10	 1.142%		 9.228%	 236KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>5175.14 Transactions per Second
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Throughput Results
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>===================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Read Throughput: 6.03MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Write Throughput: 14.1MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>System Call Latency statistics in millisecs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>=====
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		Min		Avg		Max		Total Calls
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		========	========	========	============
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ open]	0.013000	0.287392	139.746002	 883
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ read]	0.003000	0.006889	7.982000	 27154
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ write]	0.004000	0.100881	246.876007	 63566
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ unlink]	0.062000	4.593609	175.654999	 115
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ close]	0.002000	0.004476	0.137000	 883
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ stat]	0.011000	0.019674	0.086000	 129
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>0.5% User Time
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>9.0% System Time
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>9.5% CPU Utilization
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB version 6.0-RC2 started
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>benchmark time = 10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ThreadGroup 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_threads = 4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skip = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skipsize = 0	(0B)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 fsync_file = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 wait time = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 op weights
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 readall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 delete = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 metaop = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 createdir = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 stat = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 open_close = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_fsync = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FileSystem /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_dirs = 100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 starting files = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 Fileset weight:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 33554432 ( 32MB) -&amp;gt; 1 (1.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8388608 ( 8MB) -&amp;gt; 2 (2.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 524288 ( 512KB) -&amp;gt; 3 (3.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 262144 ( 256KB) -&amp;gt; 4 (4.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 131072 ( 128KB) -&amp;gt; 5 (5.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 65536 ( 64KB) -&amp;gt; 8 (8.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 32768 ( 32KB) -&amp;gt; 10 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 16384 ( 16KB) -&amp;gt; 13 (13.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8192 ( 8KB) -&amp;gt; 21 (21.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 4096 ( 4KB) -&amp;gt; 33 (33.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 directio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 alignedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 bufferedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 aging is off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 current utilization = 52.11%
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>creating new fileset /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fs setup took 0 secs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Syncing()...5 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Starting Actual Benchmark At: Thu Jan 26 00:32:22 2017
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Syncing()...2 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB benchmark finished at: Thu Jan 26 00:32:38 2017
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Results:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Benchmark took 15.96 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Total Results
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>===============
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Op Name Transactions	 Trans/sec	% Trans	 % Op Weight	 Throughput
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ======= ============	 =========	=======	 ===========	 ==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> readall : 3767	 236.05	 5.418%		10.301%	 944KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> create : 6356	 398.29	 9.142%		 9.480%	 1.56MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> append : 1280	 80.21	 1.841%		11.668%	 321KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> delete : 109	 6.83	 0.157%		 9.936%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stat : 94	 5.89	 0.135%		 8.569%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> writeall : 20438	 1280.72	29.398%		10.119%	 5MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> writeall_fsync : 22670	 1420.58	32.608%		11.121%	 5.55MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> open_close : 116	 7.27	 0.167%		10.574%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> create_fsync : 13772	 863.00	19.810%		 9.845%	 3.37MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> append_fsync : 920	 57.65	 1.323%		 8.387%	 231KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>4356.50 Transactions per Second
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Throughput Results
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>===================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Read Throughput: 944KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Write Throughput: 16MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>System Call Latency statistics in millisecs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>=====
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		Min		Avg		Max		Total Calls
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		========	========	========	============
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ open]	0.013000	0.320633	99.432999	 894
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ read]	0.003000	0.007289	8.764000	 3767
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ write]	0.004000	0.084760	210.964996	 65436
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ unlink]	0.048000	1.913193	108.400002	 109
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ close]	0.002000	0.014541	9.322000	 894
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ stat]	0.011000	0.018745	0.046000	 94
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>0.6% User Time
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>8.7% System Time
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>9.3% CPU Utilization
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB version 6.0-RC2 started
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>benchmark time = 10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ThreadGroup 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_threads = 4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skip = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skipsize = 0	(0B)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 fsync_file = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 wait time = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 op weights
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 readall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 delete = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 metaop = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 createdir = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 stat = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 open_close = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_fsync = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FileSystem /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_dirs = 100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 starting files = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 Fileset weight:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 33554432 ( 32MB) -&amp;gt; 1 (1.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8388608 ( 8MB) -&amp;gt; 2 (2.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 524288 ( 512KB) -&amp;gt; 3 (3.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 262144 ( 256KB) -&amp;gt; 4 (4.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 131072 ( 128KB) -&amp;gt; 5 (5.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 65536 ( 64KB) -&amp;gt; 8 (8.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 32768 ( 32KB) -&amp;gt; 10 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 16384 ( 16KB) -&amp;gt; 13 (13.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8192 ( 8KB) -&amp;gt; 21 (21.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 4096 ( 4KB) -&amp;gt; 33 (33.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 directio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 alignedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 bufferedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 aging is off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 current utilization = 50.14%
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>creating new fileset /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fs setup took 0 secs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Syncing()...5 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Starting Actual Benchmark At: Thu Jan 26 00:32:45 2017
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Syncing()...0 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB benchmark finished at: Thu Jan 26 00:32:58 2017
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Results:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Benchmark took 13.28 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Total Results
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>===============
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Op Name Transactions	 Trans/sec	% Trans	 % Op Weight	 Throughput
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ======= ============	 =========	=======	 ===========	 ==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> readall : 11920	 897.64	21.470%		10.811%	 3.51MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> create : 9551	 719.24	17.203%		10.693%	 2.81MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> append : 970	 73.05	 1.747%		11.398%	 292KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> delete : 95	 7.15	 0.171%		11.163%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stat : 85	 6.40	 0.153%		 9.988%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> writeall : 1082	 81.48	 1.949%		 8.461%	 326KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> writeall_fsync : 978	 73.65	 1.762%		 7.756%	 295KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> open_close : 92	 6.93	 0.166%		10.811%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> create_fsync : 30017	 2260.45	54.065%		10.341%	 8.83MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> append_fsync : 730	 54.97	 1.315%		 8.578%	 220KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>4180.97 Transactions per Second
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Throughput Results
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>===================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Read Throughput: 3.51MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Write Throughput: 12.7MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>System Call Latency statistics in millisecs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>=====
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		Min		Avg		Max		Total Calls
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		========	========	========	============
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ open]	0.013000	0.337973	127.887001	 671
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ read]	0.003000	0.010563	10.067000	 11920
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ write]	0.004000	0.100224	193.268997	 43328
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ unlink]	0.050000	1.125200	37.287998	 95
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ close]	0.002000	0.004012	0.020000	 671
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ stat]	0.012000	0.019518	0.048000	 85
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>0.4% User Time
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10.6% System Time
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>11.0% CPU Utilization
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB version 6.0-RC2 started
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>benchmark time = 10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ThreadGroup 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_threads = 4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skip = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skipsize = 0	(0B)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 fsync_file = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 wait time = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 op weights
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 readall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 delete = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 metaop = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 createdir = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 stat = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 open_close = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_fsync = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FileSystem /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_dirs = 100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 starting files = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 Fileset weight:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 33554432 ( 32MB) -&amp;gt; 1 (1.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8388608 ( 8MB) -&amp;gt; 2 (2.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 524288 ( 512KB) -&amp;gt; 3 (3.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 262144 ( 256KB) -&amp;gt; 4 (4.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 131072 ( 128KB) -&amp;gt; 5 (5.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 65536 ( 64KB) -&amp;gt; 8 (8.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 32768 ( 32KB) -&amp;gt; 10 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 16384 ( 16KB) -&amp;gt; 13 (13.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8192 ( 8KB) -&amp;gt; 21 (21.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 4096 ( 4KB) -&amp;gt; 33 (33.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 directio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 alignedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 bufferedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 aging is off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 current utilization = 52.60%
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>creating new fileset /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fs setup took 0 secs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Syncing()...7 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Starting Actual Benchmark At: Thu Jan 26 00:33:06 2017
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Syncing()...4 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB benchmark finished at: Thu Jan 26 00:33:21 2017
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Results:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Benchmark took 15.19 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Total Results
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>===============
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Op Name Transactions	 Trans/sec	% Trans	 % Op Weight	 Throughput
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ======= ============	 =========	=======	 ===========	 ==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> readall : 24226	 1595.24	30.827%		10.854%	 6.23MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> create : 17463	 1149.91	22.222%		 9.878%	 4.49MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> append : 740	 48.73	 0.942%		 9.024%	 195KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> delete : 73	 4.81	 0.093%		 8.902%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stat : 82	 5.40	 0.104%		10.000%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> writeall : 9988	 657.69	12.710%		11.951%	 2.57MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> writeall_fsync : 1490	 98.11	 1.896%		10.366%	 392KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> open_close : 78	 5.14	 0.099%		 9.512%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> create_fsync : 23716	 1561.65	30.178%		10.610%	 6.1MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> append_fsync : 730	 48.07	 0.929%		 8.902%	 192KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>5174.74 Transactions per Second
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Throughput Results
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>===================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Read Throughput: 6.23MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Write Throughput: 13.9MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>System Call Latency statistics in millisecs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>=====
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		Min		Avg		Max		Total Calls
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		========	========	========	============
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ open]	0.013000	0.269224	38.504002	 665
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ read]	0.003000	0.007017	10.529000	 24226
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ write]	0.004000	0.193990	1240.409058	 54127
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ unlink]	0.045000	4.183726	207.742004	 73
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ close]	0.002000	0.006344	1.351000	 665
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ stat]	0.012000	0.073878	4.474000	 82
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>0.2% User Time
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>9.4% System Time
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>9.5% CPU Utilization
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB version 6.0-RC2 started
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>benchmark time = 10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ThreadGroup 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_threads = 4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skip = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skipsize = 0	(0B)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 fsync_file = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 wait time = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 op weights
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 readall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 delete = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 metaop = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 createdir = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 stat = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 open_close = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_fsync = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FileSystem /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_dirs = 100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 starting files = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 Fileset weight:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 33554432 ( 32MB) -&amp;gt; 1 (1.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8388608 ( 8MB) -&amp;gt; 2 (2.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 524288 ( 512KB) -&amp;gt; 3 (3.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 262144 ( 256KB) -&amp;gt; 4 (4.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 131072 ( 128KB) -&amp;gt; 5 (5.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 65536 ( 64KB) -&amp;gt; 8 (8.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 32768 ( 32KB) -&amp;gt; 10 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 16384 ( 16KB) -&amp;gt; 13 (13.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8192 ( 8KB) -&amp;gt; 21 (21.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 4096 ( 4KB) -&amp;gt; 33 (33.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 directio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 alignedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 bufferedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 aging is off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 current utilization = 54.11%
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>creating new fileset /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fs setup took 0 secs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Syncing()...7 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Starting Actual Benchmark At: Thu Jan 26 00:33:30 2017
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Syncing()...3 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB benchmark finished at: Thu Jan 26 00:33:45 2017
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Results:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Benchmark took 15.52 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Total Results
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>===============
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Op Name Transactions	 Trans/sec	% Trans	 % Op Weight	 Throughput
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ======= ============	 =========	=======	 ===========	 ==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> readall : 3238	 208.61	 5.056%		 8.451%	 834KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> create : 13059	 841.34	20.393%		10.000%	 3.29MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> append : 810	 52.18	 1.265%		11.408%	 209KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> delete : 75	 4.83	 0.117%		10.563%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stat : 81	 5.22	 0.126%		11.408%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> writeall : 17395	 1120.69	27.164%		 8.732%	 4.38MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> writeall_fsync : 3153	 203.13	 4.924%		 9.577%	 813KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> open_close : 68	 4.38	 0.106%		 9.577%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> create_fsync : 25469	 1640.86	39.772%		10.563%	 6.41MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> append_fsync : 690	 44.45	 1.077%		 9.718%	 178KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>4125.70 Transactions per Second
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Throughput Results
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>===================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Read Throughput: 834KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Write Throughput: 15.2MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>System Call Latency statistics in millisecs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>=====
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		Min		Avg		Max		Total Calls
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		========	========	========	============
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ open]	0.014000	0.286599	133.453003	 554
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ read]	0.003000	0.005871	1.750000	 3238
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ write]	0.004000	0.203332	468.334991	 60576
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ unlink]	0.055000	3.402613	174.811996	 75
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ close]	0.002000	0.004361	0.014000	 554
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ stat]	0.012000	0.019074	0.040000	 81
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>0.3% User Time
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>8.9% System Time
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>9.1% CPU Utilization
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB version 6.0-RC2 started
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>benchmark time = 10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ThreadGroup 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_threads = 4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skip = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skipsize = 0	(0B)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 fsync_file = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 wait time = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 op weights
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 readall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 delete = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 metaop = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 createdir = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 stat = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 open_close = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_fsync = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FileSystem /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_dirs = 100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 starting files = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 Fileset weight:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 33554432 ( 32MB) -&amp;gt; 1 (1.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8388608 ( 8MB) -&amp;gt; 2 (2.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 524288 ( 512KB) -&amp;gt; 3 (3.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 262144 ( 256KB) -&amp;gt; 4 (4.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 131072 ( 128KB) -&amp;gt; 5 (5.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 65536 ( 64KB) -&amp;gt; 8 (8.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 32768 ( 32KB) -&amp;gt; 10 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 16384 ( 16KB) -&amp;gt; 13 (13.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8192 ( 8KB) -&amp;gt; 21 (21.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 4096 ( 4KB) -&amp;gt; 33 (33.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 directio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 alignedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 bufferedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 aging is off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 current utilization = 54.43%
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>creating new fileset /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fs setup took 0 secs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Syncing()...7 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Starting Actual Benchmark At: Thu Jan 26 00:33:53 2017
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Syncing()...3 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB benchmark finished at: Thu Jan 26 00:34:07 2017
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Results:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Benchmark took 13.83 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Total Results
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>===============
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Op Name Transactions	 Trans/sec	% Trans	 % Op Weight	 Throughput
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ======= ============	 =========	=======	 ===========	 ==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> readall : 2061	 149.06	 3.188%		12.857%	 596KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> create : 33567	 2427.69	51.917%		12.222%	 9.48MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> append : 670	 48.46	 1.036%		10.635%	 194KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> delete : 61	 4.41	 0.094%		 9.683%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stat : 67	 4.85	 0.104%		10.635%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> writeall : 13123	 949.11	20.297%		 9.206%	 3.71MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> writeall_fsync : 5233	 378.47	 8.094%		 7.302%	 1.48MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> open_close : 54	 3.91	 0.084%		 8.571%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> create_fsync : 9209	 666.03	14.243%		 9.206%	 2.6MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> append_fsync : 610	 44.12	 0.943%		 9.683%	 176KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>4676.10 Transactions per Second
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Throughput Results
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>===================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Read Throughput: 596KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Write Throughput: 17.6MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>System Call Latency statistics in millisecs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>=====
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		Min		Avg		Max		Total Calls
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		========	========	========	============
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ open]	0.014000	0.758518	285.117004	 502
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ read]	0.003000	0.010993	7.266000	 2061
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ write]	0.004000	0.116312	890.288025	 62412
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ unlink]	0.058000	4.615164	138.270004	 61
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ close]	0.002000	0.004257	0.015000	 502
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ stat]	0.012000	0.020970	0.100000	 67
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>0.2% User Time
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>9.6% System Time
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>9.8% CPU Utilization
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB version 6.0-RC2 started
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>benchmark time = 10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ThreadGroup 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_threads = 4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skip = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read_skipsize = 0	(0B)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_random = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_size = 40960	(40KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 fsync_file = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_blocksize = 4096	(4KB)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 wait time = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 op weights
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 read = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 readall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 delete = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 metaop = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 createdir = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 stat = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 writeall_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 open_close = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 write_fsync = 0 (0.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 create_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 append_fsync = 1 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FileSystem /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 num_dirs = 100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 starting files = 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 Fileset weight:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 33554432 ( 32MB) -&amp;gt; 1 (1.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8388608 ( 8MB) -&amp;gt; 2 (2.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 524288 ( 512KB) -&amp;gt; 3 (3.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 262144 ( 256KB) -&amp;gt; 4 (4.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 131072 ( 128KB) -&amp;gt; 5 (5.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 65536 ( 64KB) -&amp;gt; 8 (8.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 32768 ( 32KB) -&amp;gt; 10 (10.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 16384 ( 16KB) -&amp;gt; 13 (13.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 8192 ( 8KB) -&amp;gt; 21 (21.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		 4096 ( 4KB) -&amp;gt; 33 (33.00%)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 directio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 alignedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 bufferedio = off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 aging is off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	 current utilization = 55.07%
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>creating new fileset /var/backups/aaa/work/jta.Benchmark.ffsb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fs setup took 0 secs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Syncing()...5 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Starting Actual Benchmark At: Thu Jan 26 00:34:14 2017
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Syncing()...2 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FFSB benchmark finished at: Thu Jan 26 00:34:30 2017
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Results:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Benchmark took 16.17 sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Total Results
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>===============
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Op Name Transactions	 Trans/sec	% Trans	 % Op Weight	 Throughput
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ======= ============	 =========	=======	 ===========	 ==========
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> readall : 9581	 592.52	13.957%		10.419%	 2.31MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> create : 12132	 750.29	17.674%		10.111%	 2.93MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> append : 1720	 106.37	 2.506%		10.604%	 425KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> delete : 160	 9.89	 0.233%		 9.864%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stat : 163	 10.08	 0.237%		10.049%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> writeall : 7285	 450.53	10.613%		10.666%	 1.76MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> writeall_fsync : 5421	 335.25	 7.897%		10.543%	 1.31MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> open_close : 143	 8.84	 0.208%		 8.816%	 NA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> create_fsync : 30500	 1886.23	44.431%		 9.433%	 7.37MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> append_fsync : 1540	 95.24	 2.243%		 9.494%	 381KB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>4245.26 Transactions per Second
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Throughput Results
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>===================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Read Throughput: 2.31MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Write Throughput: 14.2MB/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>System Call Latency statistics in millisecs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>=====
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		Min		Avg		Max		Total Calls
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		========	========	========	============
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ open]	0.013000	0.103688	39.541000	 1299
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ read]	0.003000	0.008649	10.064000	 9581
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ write]	0.004000	0.147653	417.877991	 58598
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ unlink]	0.057000	1.249506	35.688000	 160
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ close]	0.002000	0.009712	7.332000	 1299
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[ stat]	0.012000	0.019301	0.039000	 163
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>0.3% User Time
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10.9% System Time
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>11.3% CPU Utilization
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#!/bin/python&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># --*--coding: utf-8 --*--&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> re
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>opNames &lt;span style="color:#f92672">=&lt;/span> [&lt;span style="color:#e6db74">&amp;#34;readall&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;create&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;append&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;delete&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;stat&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;writeall&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;writeall_fsync&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;open_close&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;create_fsync&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;append_fsync&amp;#34;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sumNames&lt;span style="color:#f92672">=&lt;/span> [&lt;span style="color:#e6db74">&amp;#34;open&amp;#34;&lt;/span>,&lt;span style="color:#e6db74">&amp;#34;read&amp;#34;&lt;/span>,&lt;span style="color:#e6db74">&amp;#34;write&amp;#34;&lt;/span>,&lt;span style="color:#e6db74">&amp;#34;unlink&amp;#34;&lt;/span>,&lt;span style="color:#e6db74">&amp;#34;close&amp;#34;&lt;/span>,&lt;span style="color:#e6db74">&amp;#34;stat&amp;#34;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>opValue &lt;span style="color:#f92672">=&lt;/span> [&lt;span style="color:#e6db74">&amp;#34;Transactions&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Trans/sec&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;%Trans&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Op Weight&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Throughput&amp;#34;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sumValue &lt;span style="color:#f92672">=&lt;/span> [&lt;span style="color:#e6db74">&amp;#34;Min&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Avg&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Max&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Total Calls&amp;#34;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>benchmark_op &lt;span style="color:#f92672">=&lt;/span> dict()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>avg_benchmark_op &lt;span style="color:#f92672">=&lt;/span> dict()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>benchmark_sum &lt;span style="color:#f92672">=&lt;/span> dict()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>avg_benchmark_sum &lt;span style="color:#f92672">=&lt;/span> dict()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> p &lt;span style="color:#f92672">in&lt;/span> opNames:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> benchmark_op[p] &lt;span style="color:#f92672">=&lt;/span> dict()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> k &lt;span style="color:#f92672">in&lt;/span> opValue:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> benchmark_op[p][k] &lt;span style="color:#f92672">=&lt;/span> list()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> s &lt;span style="color:#f92672">in&lt;/span> sumNames:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> benchmark_sum[s] &lt;span style="color:#f92672">=&lt;/span> dict()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> k &lt;span style="color:#f92672">in&lt;/span> sumValue:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> benchmark_sum[s][k] &lt;span style="color:#f92672">=&lt;/span> list()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>reg_op &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;^\s+\w+\s\:(\s+\d+(\.?\d+\%?)?)&lt;/span>&lt;span style="color:#e6db74">{4}&lt;/span>&lt;span style="color:#e6db74">\s+(\d+(\.\d+)?[K|M]B\/sec|NA)&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>reg_sum &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;\[(\s*\w+)\](\s+\d+(\.\d+)?)&lt;/span>&lt;span style="color:#e6db74">{4}&lt;/span>&lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>pattern_op &lt;span style="color:#f92672">=&lt;/span> re&lt;span style="color:#f92672">.&lt;/span>compile(reg_op, re&lt;span style="color:#f92672">.&lt;/span>I)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>pattern_sum &lt;span style="color:#f92672">=&lt;/span> re&lt;span style="color:#f92672">.&lt;/span>compile(reg_sum, re&lt;span style="color:#f92672">.&lt;/span>I)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">with&lt;/span> open(&lt;span style="color:#e6db74">&amp;#39;ffsb.txt&amp;#39;&lt;/span>) &lt;span style="color:#66d9ef">as&lt;/span> ffsb:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> line &lt;span style="color:#f92672">in&lt;/span> ffsb:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> m &lt;span style="color:#f92672">=&lt;/span> pattern_op&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#66d9ef">match&lt;/span>(line)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">try&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> m:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> str &lt;span style="color:#f92672">=&lt;/span> m&lt;span style="color:#f92672">.&lt;/span>group(&lt;span style="color:#ae81ff">0&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> array &lt;span style="color:#f92672">=&lt;/span> str&lt;span style="color:#f92672">.&lt;/span>strip()&lt;span style="color:#f92672">.&lt;/span>split()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> x &lt;span style="color:#f92672">in&lt;/span> range(len(opValue)&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> benchmark_op[array[&lt;span style="color:#ae81ff">0&lt;/span>]][opValue[x]]&lt;span style="color:#f92672">.&lt;/span>append(array[&lt;span style="color:#ae81ff">2&lt;/span>&lt;span style="color:#f92672">+&lt;/span>x]&lt;span style="color:#f92672">.&lt;/span>strip(&lt;span style="color:#e6db74">&amp;#39;% KMB/sec&amp;#39;&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> array[&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>] &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;NA&amp;#39;&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> benchmark_op[array[&lt;span style="color:#ae81ff">0&lt;/span>]][opValue[len(opValue)&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>]]&lt;span style="color:#f92672">.&lt;/span>append(array[&lt;span style="color:#ae81ff">2&lt;/span>&lt;span style="color:#f92672">+&lt;/span>x]&lt;span style="color:#f92672">.&lt;/span>strip(&lt;span style="color:#e6db74">&amp;#39;% KMB/sec&amp;#39;&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">else&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> m &lt;span style="color:#f92672">=&lt;/span> pattern_sum&lt;span style="color:#f92672">.&lt;/span>&lt;span style="color:#66d9ef">match&lt;/span>(line)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> m:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> array &lt;span style="color:#f92672">=&lt;/span> line&lt;span style="color:#f92672">.&lt;/span>strip(&lt;span style="color:#e6db74">&amp;#39; []&amp;#39;&lt;/span>)&lt;span style="color:#f92672">.&lt;/span>split()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> x &lt;span style="color:#f92672">in&lt;/span> range(len(sumValue)):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> benchmark_sum[array[&lt;span style="color:#ae81ff">0&lt;/span>]&lt;span style="color:#f92672">.&lt;/span>strip(&lt;span style="color:#e6db74">&amp;#39;[]&amp;#39;&lt;/span>)][sumValue[x]]&lt;span style="color:#f92672">.&lt;/span>append(array[&lt;span style="color:#ae81ff">1&lt;/span>&lt;span style="color:#f92672">+&lt;/span>x]&lt;span style="color:#f92672">.&lt;/span>strip())
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">except&lt;/span> &lt;span style="color:#a6e22e">Exception&lt;/span> &lt;span style="color:#66d9ef">as&lt;/span> e:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># index = m.group(0).strip().split()[0]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># print(line, index)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># print(benchmark_op)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># print(opValue)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(line)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(m&lt;span style="color:#f92672">.&lt;/span>groups())
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">raise&lt;/span> e
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> op &lt;span style="color:#f92672">in&lt;/span> opNames:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> avg_benchmark_op[op] &lt;span style="color:#f92672">=&lt;/span> dict()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> k &lt;span style="color:#f92672">in&lt;/span> opValue:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> avg_benchmark_op[op][k] &lt;span style="color:#f92672">=&lt;/span> sum(float(x) &lt;span style="color:#66d9ef">for&lt;/span> x &lt;span style="color:#f92672">in&lt;/span> benchmark_op[op][k])&lt;span style="color:#f92672">/&lt;/span>len(benchmark_op[op][k]) &lt;span style="color:#66d9ef">if&lt;/span> len(benchmark_op[op][k])&lt;span style="color:#f92672">!=&lt;/span>&lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#66d9ef">else&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> s &lt;span style="color:#f92672">in&lt;/span> sumNames:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> avg_benchmark_sum[s] &lt;span style="color:#f92672">=&lt;/span> dict()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> k &lt;span style="color:#f92672">in&lt;/span> sumValue:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> avg_benchmark_sum[s][k] &lt;span style="color:#f92672">=&lt;/span> sum(float(x) &lt;span style="color:#66d9ef">for&lt;/span> x &lt;span style="color:#f92672">in&lt;/span> benchmark_sum[s][k])&lt;span style="color:#f92672">/&lt;/span>len(benchmark_sum[s][k]) &lt;span style="color:#66d9ef">if&lt;/span> len(benchmark_sum[s][k])&lt;span style="color:#f92672">!=&lt;/span>&lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#66d9ef">else&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(opValue)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> op &lt;span style="color:#f92672">in&lt;/span> opNames:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(op,avg_benchmark_op[op]&lt;span style="color:#f92672">.&lt;/span>values())
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(sumValue)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> s &lt;span style="color:#f92672">in&lt;/span> sumNames:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(s,avg_benchmark_sum[s]&lt;span style="color:#f92672">.&lt;/span>values())
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docker权限控制</title><link>https://caisong.github.io/posts/docker%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6/</link><pubDate>Fri, 03 Sep 2021 21:40:40 +0800</pubDate><guid>https://caisong.github.io/posts/docker%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6/</guid><description>&lt;p>Cut out summary from your post content here.&lt;/p></description></item><item><title>Disable disk cache</title><link>https://caisong.github.io/posts/disablediskcache/</link><pubDate>Fri, 03 Sep 2021 21:40:38 +0800</pubDate><guid>https://caisong.github.io/posts/disablediskcache/</guid><description>&lt;p>disable disk cache&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>hdparm -W &lt;span style="color:#ae81ff">0&lt;/span> /dev/sda1 &lt;span style="color:#75715e">#disable&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>hdparm -W &lt;span style="color:#ae81ff">1&lt;/span> /dev/sda1 &lt;span style="color:#75715e">#enable&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>deb解压</title><link>https://caisong.github.io/posts/deb%E8%A7%A3%E5%8E%8B/</link><pubDate>Fri, 03 Sep 2021 21:40:37 +0800</pubDate><guid>https://caisong.github.io/posts/deb%E8%A7%A3%E5%8E%8B/</guid><description>&lt;p>deb 格式还是基于zip封装的，有自己的头部，后部分内容还是zip。可以直接使用7zip打开。linux终端下可以按以下操作：&lt;/p></description></item><item><title>cmake 配置参数</title><link>https://caisong.github.io/posts/cmake/</link><pubDate>Fri, 03 Sep 2021 21:40:36 +0800</pubDate><guid>https://caisong.github.io/posts/cmake/</guid><description>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>cmake -DCMAKE_INSTALL_PREFIX:PATH&lt;span style="color:#f92672">=&lt;/span> 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># is equal to&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>./configure --prefix&lt;span style="color:#f92672">=&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>构建LTP测试环境</title><link>https://caisong.github.io/posts/buildltpenv/</link><pubDate>Fri, 03 Sep 2021 21:40:30 +0800</pubDate><guid>https://caisong.github.io/posts/buildltpenv/</guid><description>&lt;p>板卡上运行LTP测试集，需要构建部分环境。&lt;/p></description></item><item><title>Linux开机启动</title><link>https://caisong.github.io/posts/linux%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8/</link><pubDate>Fri, 03 Sep 2021 21:04:38 +0800</pubDate><guid>https://caisong.github.io/posts/linux%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8/</guid><description>&lt;h2 id="etcinittab-line-syntax">/etc/inittab Line Syntax&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>id:rstate:action:process
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="etcinit----etcinitd">/etc/init &amp;amp;&amp;amp; /etc/init.d&lt;/h2>



 &lt;blockquote>
 &lt;p>&lt;code>/etc/init.d&lt;/code> contains scripts used by the System V init tools (SysVinit). This is the traditional service management package for Linux, containing the init program (the first process that is run when the kernel has finished initializing¹) as well as some infrastructure to start and stop services and configure them. Specifically, files in /etc/init.d are shell scripts that respond to start, stop, restart, and (when supported) reload commands to manage a particular service. These scripts can be invoked directly or (most commonly) via some other trigger (typically the presence of a symbolic link in &lt;code>/etc/rc?.d/&lt;/code>).&lt;/p></description></item><item><title>Sony隐藏虚拟按键</title><link>https://caisong.github.io/posts/sony%E9%9A%90%E8%97%8F%E8%99%9A%E6%8B%9F%E6%8C%89%E9%94%AE/</link><pubDate>Fri, 03 Sep 2021 20:58:14 +0800</pubDate><guid>https://caisong.github.io/posts/sony%E9%9A%90%E8%97%8F%E8%99%9A%E6%8B%9F%E6%8C%89%E9%94%AE/</guid><description>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 隐藏&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> adb shell settings put global policy_control immersive.navigation&lt;span style="color:#f92672">=&lt;/span>*
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#恢复&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> adb shell settings put global policy_control null
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Firefox解除保护</title><link>https://caisong.github.io/posts/firefox%E8%A7%A3%E9%99%A4%E4%BF%9D%E6%8A%A4/</link><pubDate>Fri, 03 Sep 2021 20:55:59 +0800</pubDate><guid>https://caisong.github.io/posts/firefox%E8%A7%A3%E9%99%A4%E4%BF%9D%E6%8A%A4/</guid><description>&lt;p>security.mixed_content.block_active_content = false&lt;/p></description></item><item><title>脚本备份</title><link>https://caisong.github.io/posts/%E8%84%9A%E6%9C%AC%E5%A4%87%E4%BB%BD/</link><pubDate>Fri, 03 Sep 2021 20:53:55 +0800</pubDate><guid>https://caisong.github.io/posts/%E8%84%9A%E6%9C%AC%E5%A4%87%E4%BB%BD/</guid><description>&lt;!-- raw HTML omitted -->
&lt;ul>
&lt;li>CppCheck&lt;/li>
&lt;li>putty solarized dark theme&lt;/li>
&lt;li>python sql server示例&lt;/li>
&lt;li>基于xinet服务部署&lt;/li>
&lt;/ul></description></item><item><title>Gdb多线程调试</title><link>https://caisong.github.io/posts/gdb%E5%A4%9A%E7%BA%BF%E7%A8%8B%E8%B0%83%E8%AF%95/</link><pubDate>Fri, 03 Sep 2021 20:51:41 +0800</pubDate><guid>https://caisong.github.io/posts/gdb%E5%A4%9A%E7%BA%BF%E7%A8%8B%E8%B0%83%E8%AF%95/</guid><description>&lt;ul>
&lt;li>&lt;code>info threads&lt;/code> 显示当前可调试的所有线程，每个线程会有一个GDB为其分配的ID，后面操作线程的时候会用到这个ID。 前面有*的是当前调试的线程。&lt;/li>
&lt;li>&lt;code>thread ID&lt;/code> 切换当前调试的线程为指定ID的线程。&lt;/li>
&lt;li>&lt;code>break thread_test.c:123 thread all&lt;/code> 在所有线程中相应的行上设置断点&lt;/li>
&lt;li>&lt;code>thread apply ID1 ID2 command&lt;/code> 让一个或者多个线程执行GDB命令command。&lt;/li>
&lt;li>&lt;code>thread apply all command&lt;/code> 让所有被调试线程执行GDB命令command。&lt;/li>
&lt;li>&lt;code>set scheduler-locking off|on|step&lt;/code> 估计是实际使用过多线程调试的人都可以发现，在使用step或者continue命令调试当前被调试线程的时候，其他线程也是同时执行的，怎么只让被调试程序执行呢？通过这个命令就可以实现这个需求。off 不锁定任何线程，也就是所有线程都执行，这是默认值。 on 只有当前被调试程序会执行。 step 在单步的时候，除了next过一个函数的情况(熟悉情况的人可能知道，这其实是一个设置断点然后continue的行为)以外，只有当前线程会执行。&lt;/li>
&lt;/ul></description></item><item><title>Checkpatch.pl</title><link>https://caisong.github.io/posts/checkpatch.pl/</link><pubDate>Fri, 03 Sep 2021 20:42:08 +0800</pubDate><guid>https://caisong.github.io/posts/checkpatch.pl/</guid><description>&lt;p>$ ./checkpatch.pl &amp;ndash;no-tree -f sample_module.c&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ignore file mode&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global core.filemode false
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global core.filemode false
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol>
&lt;li>git rebase -i xxxxxx&lt;/li>
&lt;li>change pick &amp;ndash;&amp;gt; edit&lt;/li>
&lt;li>git commit &amp;ndash;amend -s &amp;ndash;author &amp;quot; &amp;quot;&lt;/li>
&lt;li>git rebase &amp;ndash;continue&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#openssl cross compile&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ./Configure --openssldir&lt;span style="color:#f92672">=&lt;/span>/home/&amp;lt;your user&amp;gt;/workbench/openssl-1.0.1g/final shared os/compiler:arm-none-linux-gnueabi-
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Firefox搜索广告</title><link>https://caisong.github.io/posts/firefox%E6%90%9C%E7%B4%A2%E5%B9%BF%E5%91%8A/</link><pubDate>Sat, 29 Aug 2020 20:18:29 +0800</pubDate><guid>https://caisong.github.io/posts/firefox%E6%90%9C%E7%B4%A2%E5%B9%BF%E5%91%8A/</guid><description>&lt;p>about:config进入高级设置删除browser.newtabpage.pinned选项里面的数据&lt;/p></description></item><item><title>Vs2017显示当前正在打开的文件</title><link>https://caisong.github.io/posts/vs2017-show-active-file-in-solution-explorer/</link><pubDate>Tue, 13 Aug 2019 20:16:56 +0800</pubDate><guid>https://caisong.github.io/posts/vs2017-show-active-file-in-solution-explorer/</guid><description>&lt;p>Tools - Options - Projects and Solutions - Track Active Item in Solution Explorer&lt;/p></description></item><item><title>docker 折腾记录</title><link>https://caisong.github.io/posts/docker-1/</link><pubDate>Thu, 08 Aug 2019 22:52:43 +0800</pubDate><guid>https://caisong.github.io/posts/docker-1/</guid><description>&lt;p>上一年双十一购置了一台云服务器，就很少搭一些环境了。最近要搭建一套自动测试环境，公司内网缺少太多工具，就打算外网docker构建一套，再导入内网。&lt;/p></description></item><item><title>Bash shell 字符串</title><link>https://caisong.github.io/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2/</link><pubDate>Sun, 28 Apr 2019 20:17:50 +0800</pubDate><guid>https://caisong.github.io/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2/</guid><description>&lt;h2 id="字符串常用操">字符串常用操&lt;/h2>
&lt;ul>
&lt;li>拼接
直接拼接
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$str1$str2&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>查找
&lt;ol>
&lt;li>运算符&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[[&lt;/span> $str3 &lt;span style="color:#f92672">=&lt;/span>~ $str1 &lt;span style="color:#f92672">]]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>通配符&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[[&lt;/span> $str3 &lt;span style="color:#f92672">==&lt;/span> *$str2 &lt;span style="color:#f92672">]]&lt;/span> &lt;span style="color:#75715e">#以str2结尾&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[[&lt;/span> $str3 &lt;span style="color:#f92672">==&lt;/span> $str1* &lt;span style="color:#f92672">]]&lt;/span> &lt;span style="color:#75715e">#以str1开头&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="3">
&lt;li>&lt;code>case&lt;/code>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">case&lt;/span> $str3 in 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> HELLO&lt;span style="color:#f92672">)&lt;/span> echo &lt;span style="color:#e6db74">&amp;#34;cai&amp;#34;&lt;/span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> H*O&lt;span style="color:#f92672">)&lt;/span> echo &lt;span style="color:#e6db74">&amp;#34;song&amp;#34;&lt;/span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> *&lt;span style="color:#f92672">)&lt;/span> echo &lt;span style="color:#e6db74">&amp;#34;caisong&amp;#34;&lt;/span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">esac&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>替换
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#语法：${变量/查找/替换值}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 若查找字符前以&amp;#39;//&amp;#39;开头则全部替换&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">${&lt;/span>str1/$str2/$str3&lt;span style="color:#e6db74">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>长度
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">${#&lt;/span>str&lt;span style="color:#e6db74">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>切割
&lt;ol>
&lt;li>&lt;code>cut&lt;/code>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span> echo $str|cut -d&lt;span style="color:#e6db74">&amp;#39;-&amp;#39;&lt;/span> -f2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>&lt;code>IFS&lt;/code>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#IFS指定分隔符&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>OIFS&lt;span style="color:#f92672">=&lt;/span>$IFS;IFS&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;-&amp;#39;&lt;/span>;set -- $str; str1&lt;span style="color:#f92672">=&lt;/span>$1;str2&lt;span style="color:#f92672">=&lt;/span>$2;IFS&lt;span style="color:#f92672">=&lt;/span>$OIFS;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>截取
&lt;ol>
&lt;li>从头部截取指定字符&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 语法：&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">${&lt;/span>varibale#*string&lt;span style="color:#e6db74">}&lt;/span> &lt;span style="color:#75715e">#截取第一个string后的字符&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">${&lt;/span>varible##*string&lt;span style="color:#e6db74">}&lt;/span> &lt;span style="color:#75715e">#截取最后一个string后的字符&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>从尾部截取指定字符&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 语法：&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">${&lt;/span>varibale%string*&lt;span style="color:#e6db74">}&lt;/span> &lt;span style="color:#75715e">#截取第一个string后的字符&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">${&lt;/span>varible%%string*&lt;span style="color:#e6db74">}&lt;/span> &lt;span style="color:#75715e">#截取最后一个string后的字符&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="示例">示例&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>lyric1&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Soft kitty, warm kitty, little ball of fur&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>lyric2&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Happy kitty, sleepy kitty, purr, purr, purr&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e $lyric1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e $lyric2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#e6db74">&amp;#34;示例：拼接&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#ae81ff">\\&lt;/span>t &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$lyric1&lt;span style="color:#e6db74"> &lt;/span>$lyric2&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#e6db74">&amp;#34;示例：查找&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#e6db74">&amp;#34;\t 1. 包含&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[[&lt;/span> $lyric1 &lt;span style="color:#f92672">=&lt;/span>~ &lt;span style="color:#e6db74">&amp;#34;kitty&amp;#34;&lt;/span> &lt;span style="color:#f92672">]]&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> echo -e &lt;span style="color:#e6db74">&amp;#34;\t The lyric include kitty&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#e6db74">&amp;#34;2. 以字符串开头&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[[&lt;/span> $lyric1 &lt;span style="color:#f92672">==&lt;/span> Soft* &lt;span style="color:#f92672">]]&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> echo -e &lt;span style="color:#e6db74">&amp;#34;\t The lyric starts with &amp;#39;Soft&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#e6db74">&amp;#34;3. 以字符串结尾&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[[&lt;/span> $lyric2 &lt;span style="color:#f92672">==&lt;/span> *purr &lt;span style="color:#f92672">]]&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> echo -e &lt;span style="color:#ae81ff">\\&lt;/span>t &lt;span style="color:#e6db74">&amp;#34;The lyric ends with &amp;#39;purr&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#e6db74">&amp;#34;4. 使用case查找&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">case&lt;/span> $lyric1 in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> *ball&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#e6db74">&amp;#34;\tThe lyric include ball&amp;#34;&lt;/span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> sleepy*&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#e6db74">&amp;#34;\tThe lyric include sleepy&amp;#34;&lt;/span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> *kitty*&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#e6db74">&amp;#34;\tThe lyric include kitty&amp;#34;&lt;/span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#e6db74">&amp;#34;示例：替换&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#ae81ff">\\&lt;/span>t &lt;span style="color:#e6db74">${&lt;/span>lyric1/kitty/doraemon&lt;span style="color:#e6db74">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#ae81ff">\\&lt;/span>t &lt;span style="color:#e6db74">${&lt;/span>lyric1//kitty/doraemon&lt;span style="color:#e6db74">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#e6db74">&amp;#34;示例：长度&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#e6db74">&amp;#34;\tThe length of lryic is &lt;/span>&lt;span style="color:#66d9ef">$((&lt;/span>&lt;span style="color:#e6db74">${#&lt;/span>lyric1&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#f92672">+&lt;/span>&lt;span style="color:#e6db74">${#&lt;/span>lyric2&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#66d9ef">))&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#e6db74">&amp;#34;示例：切割&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#e6db74">&amp;#34;\tcut命令切割&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e $lyric1 | cut -d&lt;span style="color:#e6db74">&amp;#39;,&amp;#39;&lt;/span> -f1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#e6db74">&amp;#34;\tIFS切割&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>OIFS&lt;span style="color:#f92672">=&lt;/span>$IFS;IFS&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;,&amp;#39;&lt;/span>;set -- $lyric2;cat1&lt;span style="color:#f92672">=&lt;/span>$1;cat2&lt;span style="color:#f92672">=&lt;/span>$2;IFS&lt;span style="color:#f92672">=&lt;/span>$OIFS
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#e6db74">&amp;#34;\tThe two cats:&amp;#34;&lt;/span> $cat1 $cat2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#e6db74">&amp;#34;示例：截取&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#e6db74">&amp;#34;1. 从开头截取最少匹配&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#ae81ff">\\&lt;/span>t &lt;span style="color:#e6db74">${&lt;/span>lyric1#*kitty&lt;span style="color:#e6db74">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#e6db74">&amp;#34;2. 从开头截取最多匹配&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#ae81ff">\\&lt;/span>t &lt;span style="color:#e6db74">${&lt;/span>lyric1##*kitty&lt;span style="color:#e6db74">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#e6db74">&amp;#34;1. 从结尾截取最少匹配&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#ae81ff">\\&lt;/span>t &lt;span style="color:#e6db74">${&lt;/span>lyric2%kitty*&lt;span style="color:#e6db74">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#e6db74">&amp;#34;2. 从结尾截取最多匹配&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo -e &lt;span style="color:#ae81ff">\\&lt;/span>t &lt;span style="color:#e6db74">${&lt;/span>lyric2%%kitty*&lt;span style="color:#e6db74">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>输出&lt;/p></description></item><item><title>django URL 匹配及参数传递</title><link>https://caisong.github.io/posts/url/</link><pubDate>Mon, 15 Oct 2018 21:35:39 +0800</pubDate><guid>https://caisong.github.io/posts/url/</guid><description>&lt;h2 id="url-匹配">URL 匹配&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> django.urls &lt;span style="color:#f92672">import&lt;/span> path, re_path, include 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> . &lt;span style="color:#f92672">import&lt;/span> views
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>urlpatterns &lt;span style="color:#f92672">=&lt;/span> [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> path(&lt;span style="color:#e6db74">&amp;#39;articles/&amp;lt;int:year&amp;gt;/&amp;lt;int:month&amp;gt;/&amp;lt;slug:slug&amp;gt;/&amp;#39;&lt;/span>, views&lt;span style="color:#f92672">.&lt;/span>article_detail),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> re_path(&lt;span style="color:#e6db74">r&lt;/span>&lt;span style="color:#e6db74">&amp;#39;^articles/(?P&amp;lt;year&amp;gt;[0-9]&lt;/span>&lt;span style="color:#e6db74">{4}&lt;/span>&lt;span style="color:#e6db74">)/(?P&amp;lt;month&amp;gt;[0-9]&lt;/span>&lt;span style="color:#e6db74">{2}&lt;/span>&lt;span style="color:#e6db74">)/(?P&amp;lt;slug&amp;gt;[\w-]+)/$&amp;#39;&lt;/span>, views&lt;span style="color:#f92672">.&lt;/span>article_detail),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> path(&lt;span style="color:#e6db74">&amp;#39;contact/&amp;#39;&lt;/span>, include(&lt;span style="color:#e6db74">&amp;#39;contact.urls&amp;#39;&lt;/span>)),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> path(&lt;span style="color:#e6db74">&amp;#39;blog/&amp;lt;int:year&amp;gt;/&amp;#39;&lt;/span>, views&lt;span style="color:#f92672">.&lt;/span>year_archive, {&lt;span style="color:#e6db74">&amp;#39;foo&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;bar&amp;#39;&lt;/span>}),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="参数传递">参数传递&lt;/h2>
&lt;ol>
&lt;li>URL匹配中带参数的，直接在参数中&lt;/li>
&lt;li>URL中仅匹配头部，其他参数&lt;code>?&lt;/code>之后的，无论客户端发起何种HTTP请求，参数在URL中，都在request.GET.kwargs中获取&lt;/li>
&lt;li>其他在参数在请求体中的，request.POST或request.body中获取,两者差别
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-plain" data-lang="plain">&lt;span style="display:flex;">&lt;span>HttpRequest.body
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>The raw HTTP request body as a byte string. This is useful for processing data in different ways than conventional HTML forms: binary images, XML payload etc. For processing conventional form data, use HttpRequest.POST.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ol></description></item><item><title>openssl evp加解密统一接口</title><link>https://caisong.github.io/posts/openssl-evp/</link><pubDate>Thu, 27 Sep 2018 21:54:44 +0800</pubDate><guid>https://caisong.github.io/posts/openssl-evp/</guid><description>&lt;p>最近使用了openssl的AES解密函数，遇到些问题。&lt;/p>
&lt;h2 id="代码示例">代码示例&lt;/h2>
&lt;p>以下代码结构摘录自&lt;a href="https://linux.die.net/man/3/evp_decryptfinal">man page&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">int&lt;/span> &lt;span style="color:#a6e22e">do_crypt&lt;/span>(FILE &lt;span style="color:#f92672">*&lt;/span>in, FILE &lt;span style="color:#f92672">*&lt;/span>out, &lt;span style="color:#66d9ef">int&lt;/span> do_encrypt)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/* Allow enough space in output buffer for additional block */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> inbuf[&lt;span style="color:#ae81ff">1024&lt;/span>], outbuf[&lt;span style="color:#ae81ff">1024&lt;/span> &lt;span style="color:#f92672">+&lt;/span> EVP_MAX_BLOCK_LENGTH];
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">int&lt;/span> inlen, outlen;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/* Bogus key and IV: we&amp;#39;d normally set these from
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * another source.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">char&lt;/span> key[] &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;0123456789&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">char&lt;/span> iv[] &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;12345678&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/* Don&amp;#39;t set key or IV because we will modify the parameters */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">EVP_CIPHER_CTX_init&lt;/span>(&lt;span style="color:#f92672">&amp;amp;&lt;/span>ctx);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">EVP_CipherInit_ex&lt;/span>(&lt;span style="color:#f92672">&amp;amp;&lt;/span>ctx, &lt;span style="color:#a6e22e">EVP_rc2&lt;/span>(), NULL, NULL, NULL, do_encrypt);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">EVP_CIPHER_CTX_set_key_length&lt;/span>(&lt;span style="color:#f92672">&amp;amp;&lt;/span>ctx, &lt;span style="color:#ae81ff">10&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/* We finished modifying parameters so now we can set key and IV */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">EVP_CipherInit_ex&lt;/span>(&lt;span style="color:#f92672">&amp;amp;&lt;/span>ctx, NULL, NULL, key, iv, do_encrypt);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span>(;;)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> inlen &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">fread&lt;/span>(inbuf, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1024&lt;/span>, in);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span>(inlen &lt;span style="color:#f92672">&amp;lt;=&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>) &lt;span style="color:#66d9ef">break&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span>(&lt;span style="color:#f92672">!&lt;/span>&lt;span style="color:#a6e22e">EVP_CipherUpdate&lt;/span>(&lt;span style="color:#f92672">&amp;amp;&lt;/span>ctx, outbuf, &lt;span style="color:#f92672">&amp;amp;&lt;/span>outlen, inbuf, inlen))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/* Error */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">EVP_CIPHER_CTX_cleanup&lt;/span>(&lt;span style="color:#f92672">&amp;amp;&lt;/span>ctx);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">fwrite&lt;/span>(outbuf, &lt;span style="color:#ae81ff">1&lt;/span>, outlen, out);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span>(&lt;span style="color:#f92672">!&lt;/span>&lt;span style="color:#a6e22e">EVP_CipherFinal_ex&lt;/span>(&lt;span style="color:#f92672">&amp;amp;&lt;/span>ctx, outbuf, &lt;span style="color:#f92672">&amp;amp;&lt;/span>outlen))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/* Error */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">EVP_CIPHER_CTX_cleanup&lt;/span>(&lt;span style="color:#f92672">&amp;amp;&lt;/span>ctx);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">fwrite&lt;/span>(outbuf, &lt;span style="color:#ae81ff">1&lt;/span>, outlen, out);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">EVP_CIPHER_CTX_cleanup&lt;/span>(&lt;span style="color:#f92672">&amp;amp;&lt;/span>ctx);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="问题记录">问题记录&lt;/h2>
&lt;p>参考&lt;a href="https://blog.csdn.net/weixiao2015/article/details/79487775">Openssl Evp接口以及EVP_DecryptFinal使用细节&lt;/a>&lt;/p></description></item><item><title>rtp协议</title><link>https://caisong.github.io/posts/rtp/</link><pubDate>Mon, 17 Sep 2018 21:51:27 +0800</pubDate><guid>https://caisong.github.io/posts/rtp/</guid><description>&lt;ul>
&lt;li>部分内容转载自：&lt;a href="https://blog.csdn.net/leixiaohua1020/article/details/50535230" title="leixiaohua">雷霄骅CSDN博客&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="固定头部格式">固定头部格式&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-plain" data-lang="plain">&lt;span style="display:flex;">&lt;span>		1 2 3 4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		|V=2|P|X| CC |M| PT | sequence number |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		| timestamp |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		| synchronization source (SSRC) | 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		| contributing source (CSRC) | 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>V：RTP协议的版本号，占2位，当前协议版本号为2&lt;/li>
&lt;li>P：填充标志，占1位，如果P=1，则在该报文的尾部填充一个或多个额外的八位组，它们不是有效载荷的一部分。&lt;/li>
&lt;li>X：扩展标志，占1位，如果X=1，则在RTP报头后跟有一个扩展报头&lt;/li>
&lt;li>CC：CSRC计数器，占4位，指示CSRC 标识符的个数&lt;/li>
&lt;li>M: 标记，占1位，不同的有效载荷有不同的含义，对于视频，标记一帧的结束；对于音频，标记会话的开始。&lt;/li>
&lt;li>PT: 有效荷载类型，占7位，用于说明RTP报文中有效载荷的类型，如GSM音频、JPEG图像等,在流媒体中大部分是用来区分音频流和视频流的，这样便于客户端进行解析。&lt;/li>
&lt;li>序列号：占16位，用于标识发送者所发送的RTP报文的序列号，每发送一个报文，序列号增1。这个字段当下层的承载协议用UDP的时候，网络状况不好的时候可以用来检查丢包。
同时出现网络抖动的情况可以用来对数据进行重新排序，序列号的初始值是随机的，同时音频包和视频包的sequence是分别记数的。&lt;/li>
&lt;li>时戳(Timestamp)：占32位，必须使用90 kHz 时钟频率。时戳反映了该RTP报文的第一个八位组的采样时刻。接收者使用时戳来计算延迟和延迟抖动，并进行同步控制。&lt;/li>
&lt;li>同步信源(SSRC)标识符：占32位，用于标识同步信源。该标识符是随机选择的，参加同一视频会议的两个同步信源不能有相同的SSRC。&lt;/li>
&lt;li>特约信源(CSRC)标识符：每个CSRC标识符占32位，可以有0～15个。每个CSRC标识了包含在该RTP报文有效载荷中的所有特约信源。&lt;/li>
&lt;/ul>
&lt;h2 id="固定头部解析">固定头部解析&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cpp" data-lang="cpp">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">typedef&lt;/span> &lt;span style="color:#66d9ef">struct&lt;/span> &lt;span style="color:#a6e22e">_rtp_fixed_header&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">/* byte 0 */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">char&lt;/span> csrc_len:&lt;span style="color:#ae81ff">4&lt;/span>; &lt;span style="color:#75715e">/* expect 0 */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">char&lt;/span> extension:&lt;span style="color:#ae81ff">1&lt;/span>; &lt;span style="color:#75715e">/* expect 1 */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">char&lt;/span> padding:&lt;span style="color:#ae81ff">1&lt;/span>; &lt;span style="color:#75715e">/* expect 0 */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">char&lt;/span> version:&lt;span style="color:#ae81ff">2&lt;/span>; &lt;span style="color:#75715e">/* expect 2 */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">/* byte 1 */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">char&lt;/span> payload:&lt;span style="color:#ae81ff">7&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">char&lt;/span> marker:&lt;span style="color:#ae81ff">1&lt;/span>; &lt;span style="color:#75715e">/* expect 1 */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">/* bytes 2, 3 */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">short&lt;/span> seq_no; 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">/* bytes 4-7 */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">int&lt;/span> timestamp; 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#75715e">/* bytes 8-11 */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">int&lt;/span> ssrc; &lt;span style="color:#75715e">/* stream number is used here. */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>} RTP_FIXED_HEADER;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="补充">补充&lt;/h3>
&lt;ul>
&lt;li>声明后加长度，表明占用的bit, 在协议解析中常用&lt;/li>
&lt;li>如果出现前面字段比后面字段长的情况，需要注意字节对齐的情况。&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cpp" data-lang="cpp">&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#66d9ef">typedef&lt;/span> &lt;span style="color:#66d9ef">struct&lt;/span> &lt;span style="color:#a6e22e">_some_protocol&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">short&lt;/span> field_A;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">char&lt;/span> len;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		&lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">short&lt;/span> flag_B;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	}SOME_PROTOCOL ;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>此时&lt;code>sizeof SOME_PROTOOCL&lt;/code>的长度是6，没法直接将字节流转为对应的结构体，需要指定对齐长度&lt;/p></description></item><item><title>vptr</title><link>https://caisong.github.io/posts/vptr/</link><pubDate>Tue, 24 Jul 2018 22:57:44 +0800</pubDate><guid>https://caisong.github.io/posts/vptr/</guid><description>&lt;p>在&lt;code>struct&lt;/code> 中初始函数中，直接&lt;code>memset&lt;/code>,如&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cpp" data-lang="cpp">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">struct&lt;/span> &lt;span style="color:#a6e22e">Content&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">char&lt;/span> indexx[&lt;span style="color:#ae81ff">64&lt;/span>];
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//....
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">init&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> memset(&lt;span style="color:#66d9ef">this&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#66d9ef">sizeof&lt;/span>(Content));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>最近代码遇到成员变量较多，想采用类似方法，但程序总是崩溃，发生在基类析构函数。&lt;/p>
&lt;p>打印发现&lt;strong>虚指针空&lt;/strong>，因为基类析构函数一般时虚函数（原因请参见effectiv C++），子类中存在&lt;code>vptr&lt;/code>。&lt;/p>
&lt;p>摘用侯捷《度探索C++对象模型》中的实例&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cpp" data-lang="cpp">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">class&lt;/span> &lt;span style="color:#a6e22e">A&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">public&lt;/span>&lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">virtual&lt;/span> &lt;span style="color:#66d9ef">void&lt;/span> vfunc1();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">virtual&lt;/span> &lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">vfunc2&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">func1&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">func2&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">virtual&lt;/span> &lt;span style="color:#f92672">~&lt;/span>A();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">private&lt;/span>&lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">int&lt;/span> m_data1, m_data2;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}; 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">class&lt;/span> &lt;span style="color:#a6e22e">B&lt;/span> &lt;span style="color:#f92672">:&lt;/span> A {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">public&lt;/span>&lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">virtual&lt;/span> &lt;span style="color:#66d9ef">void&lt;/span> vfunc1();;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">func2&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">virtual&lt;/span> &lt;span style="color:#f92672">~&lt;/span>B();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">private&lt;/span>&lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">int&lt;/span> m_data3;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">class&lt;/span> &lt;span style="color:#a6e22e">C&lt;/span> &lt;span style="color:#f92672">:&lt;/span> B {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">public&lt;/span>&lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">virtual&lt;/span> &lt;span style="color:#66d9ef">void&lt;/span> vfunc1();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">func&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">private&lt;/span>&lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">int&lt;/span> m_data1, m_data4;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://caisong.github.io/images/vtpr.jpg" alt="vprt.jpg" title="内存对象模型">&lt;/p>
&lt;p>使用本文开头的方法&lt;code>memset&lt;/code>初始化成员时，也同时将&lt;code>vptr&lt;/code>置为空，导致析构时空指针异常崩溃。&lt;/p>
&lt;p>可以在&lt;code>memset&lt;/code>时偏移一个指针的长度。&lt;/p></description></item><item><title>c++运算符优先级</title><link>https://caisong.github.io/posts/c-operator/</link><pubDate>Mon, 23 Jul 2018 21:08:26 +0800</pubDate><guid>https://caisong.github.io/posts/c-operator/</guid><description>&lt;p>&lt;a href="https://zh.cppreference.com/w/cpp/language/operator_precedence" title="c++ operator">运算符优先级&lt;/a>&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>优先级&lt;/th>
 &lt;th>运算符&lt;/th>
 &lt;th>描述&lt;/th>
 &lt;th>结合性&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>1&lt;/td>
 &lt;td>::&lt;/td>
 &lt;td>作用域解析&lt;/td>
 &lt;td>从左到右&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>2&lt;/td>
 &lt;td>a++ a&amp;ndash;&lt;/td>
 &lt;td>后缀自增与自减&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;/td>
 &lt;td>type()   type{}&lt;/td>
 &lt;td>函数风格转型&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;/td>
 &lt;td>a()&lt;/td>
 &lt;td>函数调用&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;/td>
 &lt;td>a[]&lt;/td>
 &lt;td>下标&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;/td>
 &lt;td>.   -&amp;gt;&lt;/td>
 &lt;td>成员访问&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>3&lt;/td>
 &lt;td>++a   &amp;ndash;a&lt;/td>
 &lt;td>前缀自增与自减&lt;/td>
 &lt;td>从右到左&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;/td>
 &lt;td>+a   -a&lt;/td>
 &lt;td>一元加与减&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;/td>
 &lt;td>!   ~&lt;/td>
 &lt;td>逻辑非和逐位非&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;/td>
 &lt;td>(type)&lt;/td>
 &lt;td>C 风格转型&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;/td>
 &lt;td>*a&lt;/td>
 &lt;td>间接（解引用）&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;/td>
 &lt;td>&amp;amp;a&lt;/td>
 &lt;td>取址&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;/td>
 &lt;td>sizeof&lt;/td>
 &lt;td>取大小&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;/td>
 &lt;td>new   new[]&lt;/td>
 &lt;td>动态内存分配&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;/td>
 &lt;td>delete   delete[]&lt;/td>
 &lt;td>动态内存分配&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>4&lt;/td>
 &lt;td>.*   -&amp;gt;*&lt;/td>
 &lt;td>指向成员指针&lt;/td>
 &lt;td>从左到右&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>5&lt;/td>
 &lt;td>a*b   a/b   a%b&lt;/td>
 &lt;td>乘法、除法与余数&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>6&lt;/td>
 &lt;td>a+b   a-b&lt;/td>
 &lt;td>加法与减法&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>7&lt;/td>
 &lt;td>&amp;laquo;   &amp;raquo;&lt;/td>
 &lt;td>逐位左移与右移&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>8&lt;/td>
 &lt;td>&amp;lt;=&amp;gt;&lt;/td>
 &lt;td>三路比较运算符(C++20 起)&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>9&lt;/td>
 &lt;td>&amp;lt;   &amp;lt;=&lt;/td>
 &lt;td>分别为 &amp;lt; 与 ≤ 的关系运算符&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;/td>
 &lt;td>&amp;gt;   &amp;gt;=&lt;/td>
 &lt;td>分别为 &amp;gt; 与 ≥ 的关系运算符&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>10&lt;/td>
 &lt;td>==   !=&lt;/td>
 &lt;td>分别为 = 与 ≠ 的关系运算符&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>11&lt;/td>
 &lt;td>a&amp;amp;b&lt;/td>
 &lt;td>逐位与&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>12&lt;/td>
 &lt;td>^&lt;/td>
 &lt;td>逐位异或（排除或）&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>13&lt;/td>
 &lt;td>|&lt;/td>
 &lt;td>逐位或（包含或）&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>14&lt;/td>
 &lt;td>&amp;amp;&amp;amp;&lt;/td>
 &lt;td>逻辑与&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>15&lt;/td>
 &lt;td>||&lt;/td>
 &lt;td>逻辑或&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>16&lt;/td>
 &lt;td>a?b:c&lt;/td>
 &lt;td>三元条件&lt;/td>
 &lt;td>从右到左&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;/td>
 &lt;td>throw&lt;/td>
 &lt;td>throw 运算符&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;/td>
 &lt;td>=&lt;/td>
 &lt;td>直接赋值（ C++ 类默认提供）&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;/td>
 &lt;td>+=   -=&lt;/td>
 &lt;td>以和及差复合赋值&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;/td>
 &lt;td>*=   /=   %=&lt;/td>
 &lt;td>以积、商及余数复合赋值&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;/td>
 &lt;td>&amp;laquo;=   &amp;raquo;=&lt;/td>
 &lt;td>以逐位左移及右移复合赋值&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;/td>
 &lt;td>&amp;amp;=   ^=   |=&lt;/td>
 &lt;td>以逐位与、异或及或复合赋值&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>17&lt;/td>
 &lt;td>,&lt;/td>
 &lt;td>逗号&lt;/td>
 &lt;td>从左到右&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>&lt;code>.*&lt;/code> 和 &lt;code>-&amp;gt;*&lt;/code> 也是运算符，指向成员指针。在使用成员函数指针时使用。&lt;/p></description></item><item><title>little accumulation</title><link>https://caisong.github.io/posts/little-accumulation/</link><pubDate>Tue, 17 Jul 2018 22:22:52 +0800</pubDate><guid>https://caisong.github.io/posts/little-accumulation/</guid><description>&lt;p>好久没写博客了，决定重新抓起来。不一定要写多么深奥的内容，记录下收获就可以。&lt;/p>
&lt;h2 id="rename-批量重命名文件">rename 批量重命名文件&lt;/h2>
&lt;p>rename 批量更改文件名&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>rename txt jpg *.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="timeout-指定命令运行时间">timeout 指定命令运行时间&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>timeout -s KILL 60s ping 127.0.0.1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># DURATION 默认单位s&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 指令可以通过 kill -l 查看&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="长度0数组">长度0数组&lt;/h2>
&lt;pre>&lt;code>结构体中使用`char [0]`
```c
struct MyData 
{
 int nLen;
 char data[0];
};
```
&lt;/code>&lt;/pre>
&lt;p>在结构中，data是一个数组名，但该数组没有元素，该数组的真实地址紧随结构体MyData之后，而这个地址就是结构体后面数据的。&lt;em>如果给这个结构体分配的内容大于这个结构体实际大小，后面多余的部分就是这个data的内容。&lt;/em>&lt;/p></description></item><item><title>django部署apache2</title><link>https://caisong.github.io/posts/apache/</link><pubDate>Sun, 01 Apr 2018 20:55:39 +0000</pubDate><guid>https://caisong.github.io/posts/apache/</guid><description>&lt;p>最近学习使用django，尝试部署至apache2。&lt;/p>
&lt;ol>
&lt;li>required env&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo apt-get install apache2 libapache2-mod-wsgi-py3
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo pip install django
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>
&lt;p>拷贝目录至&lt;code>/var/www&lt;/code>(apache2的默认网站目录)，之前未拷贝，在其他目录尝试了几次都未成功。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>添加配置website&lt;/p>
&lt;ol>
&lt;li>
&lt;p>配置网站配置&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>cd /etc/apache2/sites-avaliable/ &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> cp 000-default.conf yoursite.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>配置详情&lt;/p>
&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-xml" data-lang="xml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;VirtualHost&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">*:80&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	ServerName 127.0.0.1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	ServerAdmin webmaster@localhost
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	# 网站根目录, 请根据自身目录配置，下同
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	DocumentRoot /var/www/web
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	#静态文件目录
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	Alias /static/ /var/www/web/static/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">&amp;lt;Directory&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">/var/www/web/static&lt;/span>&lt;span style="color:#f92672">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		Require all granted
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">&amp;lt;/Directory&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	WSGIScriptAlias / /var/www/web/web/wsgi.py
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">&amp;lt;Directory&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">/var/www/web/web&lt;/span>&lt;span style="color:#f92672">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">&amp;lt;Files&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">wsgi.py&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		Require all granted
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">&amp;lt;/Files&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#f92672">&amp;lt;/Directory&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;/VirtualHost&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="3">
&lt;li>查看django wigi.py文件
默认生成的文件没有问题，不需要修改即可运行。&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> os
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> os.path &lt;span style="color:#f92672">import&lt;/span> join, dirname,abspath
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> django.core.wsgi &lt;span style="color:#f92672">import&lt;/span> get_wsgi_application
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>PROJECT_DIR &lt;span style="color:#f92672">=&lt;/span> dirname(dirname(abspath(__file__)))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> sys
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sys&lt;span style="color:#f92672">.&lt;/span>path&lt;span style="color:#f92672">.&lt;/span>insert(&lt;span style="color:#ae81ff">0&lt;/span>, PROJECT_DIR)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>os&lt;span style="color:#f92672">.&lt;/span>environ&lt;span style="color:#f92672">.&lt;/span>setdefault(&lt;span style="color:#e6db74">&amp;#34;DJANGO_SETTINGS_MODULE&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;web.settings&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>application &lt;span style="color:#f92672">=&lt;/span> get_wsgi_application()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="4">
&lt;li>配置django环境
进入你的网站根目录&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#static files&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#前提在你的setting.py文件中设置好STATIC_ROOT目录&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>python manage.py collectstatic
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>python manage.py migrate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="5">
&lt;li>修改目录权限为&lt;code>www-data&lt;/code>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo chown www-data:www-data webroot
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 如果存在数据库，请同时修改相应权限&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="6">
&lt;li>使网站生效&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>	sudo a2ensite yoursite.conf
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	service apache2 reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ol></description></item><item><title>libconfig 入门</title><link>https://caisong.github.io/posts/libconfig/</link><pubDate>Mon, 25 Dec 2017 22:59:18 +0800</pubDate><guid>https://caisong.github.io/posts/libconfig/</guid><description>&lt;p>以下内容翻译自&lt;a href="http://www.hyperrealm.com/libconfig/libconfig_manual.html" title="libconfig manual">libconfig manual&lt;/a>
版本1.4.9，最新版本请参阅&lt;a href="https://hyperrealm.github.io/libconfig/" title="libconfig">libconfig&lt;/a>&lt;/p>
&lt;h1 id="应用示例">应用示例&lt;/h1>
&lt;ol>
&lt;li>配置文件&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-plain" data-lang="plain">&lt;span style="display:flex;">&lt;span># Example application configuration file
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>version = &amp;#34;1.0&amp;#34;; //①
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>application:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> window:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> title = &amp;#34;My Application&amp;#34;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> size = { w = 640; h = 480; };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pos = { x = 350; y = 250; }; //②
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> list = ( ( &amp;#34;abc&amp;#34;, 123, true ), 1.234, ( /* an empty list */) );
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> books = ( { title = &amp;#34;Treasure Island&amp;#34;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> author = &amp;#34;Robert Louis Stevenson&amp;#34;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> price = 29.95;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> qty = 5; },
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> { title = &amp;#34;Snow Crash&amp;#34;; //③
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> author = &amp;#34;Neal Stephenson&amp;#34;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> price = 9.99;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> qty = 8; } );
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> misc:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pi = 3.141592654;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bigint = 9223372036854775807L;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> columns = [ &amp;#34;Last Name&amp;#34;, &amp;#34;First Name&amp;#34;, &amp;#34;MI&amp;#34; ];
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bitmask = 0x1FC3;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>读取方式
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th style="text-align: left">目标&lt;/th>
 &lt;th style="text-align: left">路径&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td style="text-align: left">version ①&lt;/td>
 &lt;td style="text-align: left">version&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">x ②&lt;/td>
 &lt;td style="text-align: left">application.window.pos.x&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">title ③&lt;/td>
 &lt;td style="text-align: left">application.books.[1].tittle&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;/li>
&lt;/ol>
&lt;p>路径按照元素名层层遍历，用&amp;rsquo;.&amp;lsquo;连接。类似数组和链表的情况，使用下标（从0开始）。&lt;strong>此处与C/C++不同，请注意 title ③的路径&lt;/strong>&lt;/p></description></item><item><title>gdb problem inside docker container</title><link>https://caisong.github.io/posts/docker-gdb/</link><pubDate>Sun, 17 Dec 2017 20:53:59 +0800</pubDate><guid>https://caisong.github.io/posts/docker-gdb/</guid><description>&lt;blockquote>
 &lt;p>warning: Error disabling address space randomization: Operation not permitted&lt;/p>

 &lt;/blockquote>

&lt;ul>
&lt;li>
&lt;p>solutions:&lt;a href="https://stackoverflow.com/questions/35860527/warning-error-disabling-address-space-randomization-operation-not-permitted">stackoverflow&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>docker run --cap-add&lt;span style="color:#f92672">=&lt;/span>SYS_PTRACE --security-opt seccomp&lt;span style="color:#f92672">=&lt;/span>unconfined
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>** There is no such options for &lt;code>docker exec&lt;/code> command, so I recreate a container. Maybe there are others ways, please let me know. Thanks **&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>常用操作</title><link>https://caisong.github.io/posts/%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/</link><pubDate>Sat, 28 Oct 2017 20:09:06 +0800</pubDate><guid>https://caisong.github.io/posts/%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/</guid><description>&lt;!-- raw HTML omitted -->
&lt;ul>
&lt;li>代理设置&lt;/li>
&lt;li>git 操作&lt;/li>
&lt;li>文件夹比较&lt;/li>
&lt;li>flash 分区&lt;/li>
&lt;li>阻止软件更新&lt;/li>
&lt;li>docker设置国内镜像&lt;/li>
&lt;li>linux语言环境设置&lt;/li>
&lt;/ul></description></item><item><title>docker install on windows</title><link>https://caisong.github.io/posts/docker/</link><pubDate>Sat, 28 Oct 2017 16:31:52 +0800</pubDate><guid>https://caisong.github.io/posts/docker/</guid><description>&lt;ol>
&lt;li>安装
阿里云下载&lt;a href="https://mirrors.aliyun.com/docker-toolbox/windows/docker-toolbox/">docker toolbox&lt;/a>&lt;/li>
&lt;li>常见问题&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>
&lt;p>&lt;code>error: Details: code E_FAIL (0x80004005), component MachineWrap, interface I &lt;/code>
virtual box 版本较低导致，升级后问题解决
P.S. 另一由于CPU不支持虚拟化的导致的问题没遇到&lt;/p>
&lt;/li>
&lt;li>
&lt;p>设置国内镜像仓库&lt;/p>
&lt;ol>
&lt;li>创建之前指定&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>docker-machine create --engine-registry-mirror&lt;span style="color:#f92672">=&lt;/span>http://hub-mirror.c.163.com -d virtualbox default
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>创建之后，进入machine修改&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>docker-machine ssh &amp;lt;machine-name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo -i
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sed -i &lt;span style="color:#e6db74">&amp;#39;/^EXTRA_ARGS.*/ s/$/ ----registry-mirror=http://hub-mirror.c.163.com&amp;#39;&lt;/span> /var/lib/boot2docker/profile
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/etc/init.d/docker restart
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>P.S. 默认docker用户，用&lt;code>sudo -i&lt;/code>切换root用户&lt;/p>
&lt;ul>
&lt;li>镜像路径
默认镜像路径在用户目录下，在C盘
&lt;ol>
&lt;li>安装前
设置环境变量&lt;code>MACHINE_STORAGE_PATH&lt;/code>指向你需要设置的目录&lt;/li>
&lt;li>安装后
P.S.&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>创建快捷方式的方法失败&lt;/li>
&lt;li>指定docker daemon graph的方法失败&lt;/li>
&lt;li>未尝试使用&lt;code>ln&lt;/code>链接目录&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>docker permission</title><link>https://caisong.github.io/posts/docker-permission/</link><pubDate>Fri, 22 Sep 2017 22:34:59 +0800</pubDate><guid>https://caisong.github.io/posts/docker-permission/</guid><description>&lt;h1 id="docker-权限控制">docker 权限控制&lt;/h1>
&lt;p>docker在映射文件时，默认会使用与映射目录相同uid:gid，经常会导致一些权限问题。
常见有以下解决方案：&lt;/p>
&lt;ul>
&lt;li>改变权限&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>创建容器后，进入后&lt;code>chown&lt;/code>&lt;/li>
&lt;li>通过&lt;code>docker run&lt;/code>的&lt;code>-u&lt;/code>选项&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>docker run -v &lt;span style="color:#e6db74">`&lt;/span>pwd&lt;span style="color:#e6db74">`&lt;/span>/shared:/shared -u &lt;span style="color:#e6db74">`&lt;/span>stat -c &lt;span style="color:#e6db74">&amp;#34;%u:%g&amp;#34;&lt;/span> /shared&lt;span style="color:#e6db74">`&lt;/span> ubuntu bash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>这样做的话就等于放弃了root权限，除非再新建root组用户&lt;/p>
&lt;ul>
&lt;li>使用Data-only container
[Data-only container madness](&lt;a href="http://container42.com/2014/11/18/data-only-container-madness/">http://container42.com/2014/11/18/data-only-container-madness/&lt;/a> “data-only”)
主要手段如下:&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>创建数据容器，改变目录用户权限。&lt;/li>
&lt;li>其他容器使用&lt;code>--volumes-from&lt;/code>挂载创建的数据容器&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>docker run -v /userdata --name data busybox true
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>docker run --volumes-from data debian:jessie bash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>arm ports differences</title><link>https://caisong.github.io/posts/arm-ports-differences/</link><pubDate>Wed, 13 Sep 2017 22:25:00 +0800</pubDate><guid>https://caisong.github.io/posts/arm-ports-differences/</guid><description>&lt;h2 id="three-ports-to-different-flavours-of-little-endian-arm-hardware">Three ports to different flavours of little-endian ARM hardware&lt;/h2>
&lt;p>&lt;strong>The following content reproudced from Debian Wiki&lt;/strong> &lt;a href="https://wiki.debian.org/ArmPorts" title="Debian wiki">ArmPorts&lt;/a>&lt;/p>
&lt;ul>
&lt;li>ArmPort - the first port, using the &amp;ldquo;old&amp;rdquo; (now obsolete) ABI (OABI). First released with 2.2 (Potato), last released with 5.0 (lenny). GNU Triplet: arm-linux-gnu&lt;/li>
&lt;li>ArmEabiPort - newer port using the &amp;ldquo;new&amp;rdquo; ABI (EABI), supported on Arm v4t and higher. First released with 5.0 (lenny). GNU Triplet: arm-linux-gnueabi&lt;/li>
&lt;li>ArmHardFloatPort - the latest 32-bit port, using the hard-float version of the &amp;ldquo;new&amp;rdquo; ABI (EABI), targeting Arm v7 and up. First released with 7 (wheezy). GNU Triplet: arm-linux-gnueabihf&lt;/li>
&lt;li>Arm64Port - the latest port, for the 64-bit Armv8 architecture. First released with 8 (jessie). GNU Triplet: aarch64-linux-gnu&lt;/li>
&lt;/ul>
&lt;h2 id="prebuilt-toolchains">Prebuilt toolchains&lt;/h2>
&lt;ul>
&lt;li>Debian cross-tools packages
&lt;strong>The following content reproudced from elinux&lt;/strong> &lt;a href="http://www.elinux.org/Toolchains" title="toolchains">toolchains&lt;/a>&lt;br>
For Debian users, the toolchains problem is fairly reliably solved.
For a debian-based box just install pre-built cross toolchains from Debian experimental.
Targets include nearly all debian-supported architectures As of this writing supported compiler is gcc 4.9. You can get older unsupported compilers from emdebian.
You will need to add the target architecture to your list of installable architectures. eg.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span> dpkg --add-architecture armhf
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> apt-get update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> apt-get install gcc-arm-linux-gnueabihf
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># arm64 gcc-r-aarch-linux-gnu&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="toolchain-building-systems">Toolchain building systems&lt;/h2>
&lt;ul>
&lt;li>Bitbake
Bitbake is the tool used by &lt;a href="http://wiki.openembedded.net/index.php/Main_Page" title="OpenEmbedded">OpenEmbedded&lt;/a>. The best way to get started is probably by just building an existing distribution that uses openembedded.&lt;/li>
&lt;/ul></description></item><item><title>xinetd 常用配置</title><link>https://caisong.github.io/posts/xinetd/</link><pubDate>Wed, 07 Jun 2017 21:39:31 +0800</pubDate><guid>https://caisong.github.io/posts/xinetd/</guid><description>&lt;h2 id="介绍">介绍&lt;/h2>



 &lt;blockquote>
 &lt;p>xinetd - the extended Internet services daemon
xinetd performs the same function as inetd: it starts programs that
provide Internet services. Instead of having such servers started at
system initialization time, and be dormant until a connection request
arrives, xinetd is the only daemon process started and it listens on
all service ports for the services listed in its configuration file.
When a request comes in, xinetd starts the appropriate server. Because
of the way it operates, xinetd (as well as inetd) is also referred to
as a super-server.
&amp;lt;! &amp;ndash; more &amp;ndash;&amp;gt;
The services listed in xinetd’s configuration file can be separated
into two groups. Services in the first group are called multi-threaded
and they require the forking of a new server process for each new con-
nection request. The new server then handles that connection. For
such services, xinetd keeps listening for new requests so that it can
spawn new servers. On the other hand, the second group includes ser-
vices for which the service daemon is responsible for handling all new
connection requests. Such services are called single-threaded and
xinetd will stop handling new requests for them until the server dies.
Services in this group are usually datagram-based.&lt;/p></description></item><item><title>Tpm Env</title><link>https://caisong.github.io/posts/tpm-env/</link><pubDate>Sun, 21 May 2017 17:44:32 +0800</pubDate><guid>https://caisong.github.io/posts/tpm-env/</guid><description>&lt;p>tpm使用相关命令&lt;/p></description></item><item><title>Change Partion Size</title><link>https://caisong.github.io/posts/change-partion-size/</link><pubDate>Thu, 18 May 2017 17:41:05 +0800</pubDate><guid>https://caisong.github.io/posts/change-partion-size/</guid><description>&lt;p>修改分区大小&lt;/p></description></item><item><title>Depmod</title><link>https://caisong.github.io/posts/depmod/</link><pubDate>Wed, 17 May 2017 17:38:47 +0800</pubDate><guid>https://caisong.github.io/posts/depmod/</guid><description>&lt;p>module命令&lt;/p></description></item><item><title>用户记录操作</title><link>https://caisong.github.io/posts/%E7%94%A8%E6%88%B7%E8%AE%B0%E5%BD%95%E6%93%8D%E4%BD%9C/</link><pubDate>Wed, 22 Mar 2017 17:34:14 +0800</pubDate><guid>https://caisong.github.io/posts/%E7%94%A8%E6%88%B7%E8%AE%B0%E5%BD%95%E6%93%8D%E4%BD%9C/</guid><description>&lt;p>使用&lt;code>crontab&lt;/code>记录用户操作日志&lt;/p></description></item><item><title>启动时设置IP</title><link>https://caisong.github.io/posts/set-ip-addr-on-boot/</link><pubDate>Mon, 13 Mar 2017 22:29:19 +0800</pubDate><guid>https://caisong.github.io/posts/set-ip-addr-on-boot/</guid><description>&lt;h2 id="update-rcd">update-rc.d&lt;/h2>
&lt;ul>
&lt;li>the script (setipaddr.sh)&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#! /bin/sh
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>PATH&lt;span style="color:#f92672">=&lt;/span>/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/bin:$PATH
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ifconfig eth0 192.168.10.1/24
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>update-rc.d setting&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>chmod +x setipaddr.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mv setipaddr.sh /etc/init.d
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>update-rc.d setipaddr.sh defaults
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>run level&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># If defaults is used then update-rc.d will make links to start the service in runlevels 2345 and to stop the service in runlevels 016&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>runlevel &lt;span style="color:#75715e"># get current level&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="systemctl">systemctl&lt;/h2>
&lt;ul>
&lt;li>service file (/etc/systemd/system/setipaddr.service)&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>Unit&lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Description&lt;span style="color:#f92672">=&lt;/span>set ip on boot
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>After&lt;span style="color:#f92672">=&lt;/span>network.target
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>Service&lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Type&lt;span style="color:#f92672">=&lt;/span>oneshot
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ExecStart&lt;span style="color:#f92672">=&lt;/span>/opt/bin/setipaddr.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>Install&lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>WantedBy&lt;span style="color:#f92672">=&lt;/span>multi-user.target
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>systemctl setting&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>systemctl enable setipaddr.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Excel条件变色</title><link>https://caisong.github.io/posts/excel%E6%9D%A1%E4%BB%B6%E5%8F%98%E8%89%B2/</link><pubDate>Thu, 09 Feb 2017 17:28:58 +0800</pubDate><guid>https://caisong.github.io/posts/excel%E6%9D%A1%E4%BB%B6%E5%8F%98%E8%89%B2/</guid><description>&lt;p>Cut out summary from your post content here.&lt;/p></description></item><item><title>Windows 安装 Text-to-Speech</title><link>https://caisong.github.io/posts/tts/</link><pubDate>Thu, 22 Dec 2016 22:39:11 +0800</pubDate><guid>https://caisong.github.io/posts/tts/</guid><description>&lt;p>&lt;strong>Win10、Win8摘录自官方文档，Win10 已验证。Win7未尝试！&lt;/strong>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;h2 id="install-a-new-text-to-speech-language-in-windows-10">Install a new Text-to-Speech language in Windows 10&lt;/h2>
&lt;p>On any edition of Windows 10, click &lt;strong>Start&lt;/strong> &amp;gt; &lt;strong>Settings&lt;/strong>, and the do the following:&lt;/p>
&lt;ol>
&lt;li>Select the &lt;strong>Start&lt;/strong> button, and then select &lt;strong>Settings&lt;/strong> &amp;gt; &lt;strong>Time &amp;amp; Language&lt;/strong> &amp;gt; &lt;strong>Region &amp;amp; Language&lt;/strong>.&lt;/li>
&lt;li>Select &lt;strong>Add a language&lt;/strong> and choose the language you want from the list. Only languages listed in the table below will have Text-to-Speech capabilities.&lt;/li>
&lt;li>After the new language has been installed (this might take a while), select it in the &lt;strong>Region &amp;amp; Language&lt;/strong> list, and then select &lt;strong>Options&lt;/strong>.&lt;/li>
&lt;li>Under &lt;strong>Language options&lt;/strong> &amp;gt; &lt;strong>Speech&lt;/strong>, select &lt;strong>Download&lt;/strong>.&lt;/li>
&lt;/ol>
&lt;h2 id="install-a-new-text-to-speech-language-in-windows-81">Install a new Text-to-Speech language in Windows 8.1&lt;/h2>
&lt;p>On any edition of Windows 8.1, do the following:&lt;/p></description></item><item><title>时间相关函数</title><link>https://caisong.github.io/posts/time-util/</link><pubDate>Mon, 19 Dec 2016 22:44:11 +0800</pubDate><guid>https://caisong.github.io/posts/time-util/</guid><description>&lt;p>C 时间转换&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#incldue &amp;lt;time.h&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">struct&lt;/span> tm &lt;span style="color:#75715e">//calendar time type
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">int&lt;/span> tm_sec; &lt;span style="color:#75715e">//[0,60](since C99)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">int&lt;/span> tm_min; &lt;span style="color:#75715e">//[0,59]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">int&lt;/span> tm_hour; &lt;span style="color:#75715e">//[0,23]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">int&lt;/span> tm_mday; &lt;span style="color:#75715e">//[1,31]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">int&lt;/span> tm_mon; &lt;span style="color:#75715e">//[0,11]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">int&lt;/span> tm_year; &lt;span style="color:#75715e">//year since 1900
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">int&lt;/span> tm_wday; &lt;span style="color:#75715e">//days since Sunday:[0~6]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">int&lt;/span> tm_wday; &lt;span style="color:#75715e">//day since Jan 1:[0,365]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">int&lt;/span> tm_isdst;&lt;span style="color:#75715e">//夏令时时间，&amp;gt;0:有效	=0：无效	&amp;lt;0: 不可用
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">time_t&lt;/span>; &lt;span style="color:#75715e">//calendar time since epoch type
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">clock_t&lt;/span>; &lt;span style="color:#75715e">//processor time since era type
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">struct&lt;/span> timespce{ &lt;span style="color:#75715e">//time in seconds and nanoseconds
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">time_t&lt;/span> tv_sec;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">long&lt;/span> tv_nsec;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">time_t&lt;/span> &lt;span style="color:#a6e22e">time&lt;/span>(&lt;span style="color:#66d9ef">time_t&lt;/span> &lt;span style="color:#f92672">*&lt;/span>calptr); &lt;span style="color:#75715e">//returns the current calendar time of the system as ime since epoch
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">double&lt;/span> &lt;span style="color:#a6e22e">difftime&lt;/span>(&lt;span style="color:#66d9ef">time_t&lt;/span> time_end, &lt;span style="color:#66d9ef">time_t&lt;/span> time_beg); &lt;span style="color:#75715e">//computes the difference between times
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">* format conversions
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">*/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">char&lt;/span>&lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#a6e22e">asctime&lt;/span>( &lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#66d9ef">struct&lt;/span> tm &lt;span style="color:#f92672">*&lt;/span>time_ptr); &lt;span style="color:#75715e">//converts a tm object to a textual representation
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">char&lt;/span>&lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#a6e22e">ctime&lt;/span>(&lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#66d9ef">time_t&lt;/span> &lt;span style="color:#f92672">*&lt;/span>time); &lt;span style="color:#75715e">//converts a time_t object to a textual representation; as if by calling asctime(localtime(time));
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">struct&lt;/span> tm &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">gmtime&lt;/span>(&lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#66d9ef">time_t&lt;/span> &lt;span style="color:#f92672">*&lt;/span>time); &lt;span style="color:#75715e">//convert time since epoch calendar time expressedd as UTC
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">struct&lt;/span> tm &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">localtime&lt;/span>(&lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#66d9ef">time_t&lt;/span> &lt;span style="color:#f92672">*&lt;/span>time); &lt;span style="color:#75715e">//converts time since epoch calendar time expressed as local time 
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">time_t&lt;/span> &lt;span style="color:#a6e22e">mktime&lt;/span>(&lt;span style="color:#66d9ef">struct&lt;/span> tm &lt;span style="color:#f92672">*&lt;/span>time); &lt;span style="color:#75715e">//converts calendar time to time since epoch
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">size_t&lt;/span> &lt;span style="color:#a6e22e">strftime&lt;/span>(&lt;span style="color:#66d9ef">char&lt;/span> &lt;span style="color:#f92672">*&lt;/span>str, &lt;span style="color:#66d9ef">size_t&lt;/span> count, &lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#66d9ef">char&lt;/span> &lt;span style="color:#f92672">*&lt;/span>format, &lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#66d9ef">struct&lt;/span> tm &lt;span style="color:#f92672">*&lt;/span>time); &lt;span style="color:#75715e">//converts a tm object to custom textual representation
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">char&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">strptime&lt;/span>(&lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#66d9ef">char&lt;/span> &lt;span style="color:#f92672">*&lt;/span>s, &lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#66d9ef">char&lt;/span> &lt;span style="color:#f92672">*&lt;/span>format, &lt;span style="color:#66d9ef">struct&lt;/span> tm &lt;span style="color:#f92672">*&lt;/span>tm); &lt;span style="color:#75715e">//converse of strftime
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;sys/time.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#75715e">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">clockid_t :
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">CLOCK_REALTIME: 实时系统时间
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">CLOCK_MONOTONIC: 不带负跳数的实时系统时间
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">CLOCK_PROCESS_CPUTIME_ID: 调用进程CPU时间 
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">CLOCK_THREAD_CPUTIME_ID: 调用线程CPU时间
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">*/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">int&lt;/span> &lt;span style="color:#a6e22e">clock_gettime&lt;/span>(&lt;span style="color:#66d9ef">clockid_t&lt;/span> clock_id, &lt;span style="color:#66d9ef">struct&lt;/span> timespec &lt;span style="color:#f92672">*&lt;/span>tsp); &lt;span style="color:#75715e">//获取指定时钟的时间
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">int&lt;/span> &lt;span style="color:#a6e22e">clock_getres&lt;/span>(&lt;span style="color:#66d9ef">clockid_t&lt;/span> clock_id, &lt;span style="color:#66d9ef">struct&lt;/span> timespec &lt;span style="color:#f92672">*&lt;/span>tsp); &lt;span style="color:#75715e">//设置指定时钟精度
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">int&lt;/span> &lt;span style="color:#a6e22e">clock_settime&lt;/span>(&lt;span style="color:#66d9ef">clockid_t&lt;/span> clodk_id, &lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#66d9ef">struct&lt;/span> timespec &lt;span style="color:#f92672">*&lt;/span>tsp);&lt;span style="color:#75715e">//设置时钟时间
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">int&lt;/span> &lt;span style="color:#a6e22e">gettimeofday&lt;/span>(&lt;span style="color:#66d9ef">struct&lt;/span> timeval &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#66d9ef">restrict&lt;/span> tp, &lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#66d9ef">restrict&lt;/span> tzp);&lt;span style="color:#75715e">//获取当前时间，与其他相同作用函数相比，精度较高
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>CentOS 安装Lua 5.3</title><link>https://caisong.github.io/posts/centos-lua/</link><pubDate>Wed, 12 Oct 2016 21:47:19 +0800</pubDate><guid>https://caisong.github.io/posts/centos-lua/</guid><description>&lt;p>按照官网教程，执行以下命令&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>curl -R -O http://www.lua.org/ftp/lua-5.3.3.tar.gz
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tar zxf lua-5.3.3.tar.gz
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd lua-5.3.3
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make linux test
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>但其实lua并未安装，许多博文都是建立软链接，但其实&lt;code>makefile&lt;/code>文件中已经写好了，只需install就可以了&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>make linux install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>升级lua版本之后，会导致&lt;code>luarock&lt;/code>无法使用，需要重新编译安装。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>wget http://luarocks.org/releases/luarocks-2.4.1.tar.gz
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tar zxpf luarocks-2.4.1.tar.gz
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd luarocks-2.4.1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>./configure; sudo make bootstrap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>PostgreSQL ODBC</title><link>https://caisong.github.io/posts/postgresql-odbc/</link><pubDate>Wed, 12 Oct 2016 21:32:48 +0800</pubDate><guid>https://caisong.github.io/posts/postgresql-odbc/</guid><description>&lt;!-- raw HTML omitted -->
&lt;ul>
&lt;li>安装unixODBC&lt;/li>
&lt;li>安装PostgreSQL ODBC驱动&lt;/li>
&lt;li>检查驱动配置&lt;/li>
&lt;li>添加数据源&lt;/li>
&lt;li>修改PostgrsSQL认证方式&lt;/li>
&lt;li>验证&lt;/li>
&lt;li>ODBC 连接数据库&lt;/li>
&lt;/ul>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;h2 id="安装unixodbc">安装unixODBC&lt;/h2>
&lt;p>直接下载官网的源码编译安装就可以了，比较简单&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>curl -O http://www.unixodbc.org/unixODBC-2.3.4.tar.gz
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tar xvf unixODBC-2.3.4.tar.gz
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd unixODBC-2.3.4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>./configure --sysconfdir&lt;span style="color:#f92672">=&lt;/span>/etc
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>或者直接&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>yum install unixODBC
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="安装postgresql-odbc驱动">安装PostgreSQL ODBC驱动&lt;/h2>
&lt;p>按照之前添加源的方式安装PostgreSQL，现在可以直接安装ODBC驱动.&lt;!-- raw HTML omitted -->
添加源方法&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>yum install http://yum.postgresql.org/9.5/redhat/rhel-7-x86_64/pgdg-redhat95-9.5-2.noarch.rpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>PostgreSQL 安装</title><link>https://caisong.github.io/posts/install/</link><pubDate>Wed, 12 Oct 2016 21:13:50 +0800</pubDate><guid>https://caisong.github.io/posts/install/</guid><description>&lt;!-- raw HTML omitted -->
&lt;ul>
&lt;li>安装&lt;/li>
&lt;li>添加用户和数据库&lt;/li>
&lt;li>登陆数据库&lt;/li>
&lt;li>常用控制台命令&lt;/li>
&lt;li>基本SQL操作&lt;/li>
&lt;li>备份与恢复&lt;/li>
&lt;/ul>
&lt;!-- raw HTML omitted --></description></item><item><title>Shell命令行快捷键</title><link>https://caisong.github.io/posts/shell/</link><pubDate>Thu, 28 Jul 2016 22:06:41 +0800</pubDate><guid>https://caisong.github.io/posts/shell/</guid><description>&lt;ul>
&lt;li>C-a : 光标回到命令行首（a:ahead)&lt;/li>
&lt;li>C-e : 光标回到命令行尾（e:end)&lt;/li>
&lt;li>C-b : 光标后退一个字符（b:backward)&lt;/li>
&lt;li>C-f : 光标回到命令行首（f:forward)&lt;/li>
&lt;li>C-p : 上一个使用的历史命令 (p: previous)&lt;/li>
&lt;li>C-n : 下一个使用的历史命令 (n: next)&lt;/li>
&lt;li>C-r : 快速检索历史命令 (r: retrieve)&lt;/li>
&lt;li>C-h : 删除光标前一个字符&lt;/li>
&lt;li>C-d : 删除光标后一个字符&lt;/li>
&lt;li>C-w : 删除光标前一个word&lt;/li>
&lt;li>C-k : 删除光标后的所有字符&lt;/li>
&lt;li>C-u : 删除命令行字符&lt;/li>
&lt;li>C-y : 粘贴 C-u, C-K, C-W删除的文本&lt;/li>
&lt;li>C-t : 与前一字符交换&lt;/li>
&lt;li>C-i : Tab&lt;/li>
&lt;li>C-m : Enter&lt;/li>
&lt;li>C-o : Enter&lt;/li>
&lt;/ul></description></item><item><title>MSSQL遇到问条记录</title><link>https://caisong.github.io/posts/mssql/</link><pubDate>Sun, 24 Jul 2016 22:10:46 +0800</pubDate><guid>https://caisong.github.io/posts/mssql/</guid><description>&lt;!-- raw HTML omitted -->
&lt;ul>
&lt;li>登陆连接失败&lt;/li>
&lt;li>启动sa登陆&lt;/li>
&lt;li>服务器改为IP地址登陆&lt;/li>
&lt;li>高版本数据库恢复到低版本数据库&lt;/li>
&lt;li>自增长列插入指定值&lt;/li>
&lt;li>select into from 与 insert into select 用法与区别&lt;/li>
&lt;li>总结&lt;/li>
&lt;/ul>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>记录使用MSSQL使用过程中遇到的问题。新手，大多数搜索解决，全部实际操作过，如果不能解决您的问题，请见谅。
ps. 自己电脑没装MSSQL，因此没有截图。&lt;/p>
&lt;h2 id="登陆连接失败">登陆连接失败&lt;/h2>
&lt;p>错误描述：未找到或无法访问服务器.请验证实例名称是否正确并且SQL SERVER已配置允许远程链接.(provide:命名管道提供程序,error:40 -无法打开到SQL Server的连接)(Microsoft SQL Server,错误:2)
解决办法：&lt;/p>
&lt;ol>
&lt;li>开始菜单，SQL Server 20XX目录下找到 &lt;code>SQL Server Configuration Manager&lt;/code>&lt;/li>
&lt;li>SQL Server 【Version】 服务，启动&lt;/li>
&lt;/ol>



 &lt;blockquote>
 &lt;ul>
&lt;li>可能存在多个服务，请启动对应你连接名的那个服务&lt;/li>
&lt;li>如果启动失败，请选择属性——登陆——本地系统账户，再次重新启动&lt;/li>
&lt;/ul>

 &lt;/blockquote>

&lt;h2 id="启动sa登陆">启动sa登陆&lt;/h2>
&lt;p>问题描述：一般本地使用的windows账户，特别第一次安装时没注意，就没用设置sa密码，也就无法sa登陆
解决办法：&lt;/p>
&lt;ol>
&lt;li>windows登陆&lt;/li>
&lt;li>在连接上右击，属性——安全性——SQL Server 和windows身份验证模式。保存，返回&lt;/li>
&lt;li>展开连接，安全性——登录名——sa，设置密码。切换到状态，登陆选择&lt;code>启用&lt;/code>&lt;/li>
&lt;/ol>
&lt;h2 id="服务器改为ip地址登陆">服务器改为IP地址登陆&lt;/h2>
&lt;p>问题描述：一般安装完成之后，采用的是windows主机名+服务名的连接方式，而非IP地址，其他电脑无法访问
解决办法：&lt;/p>
&lt;ol>
&lt;li>启动sa登陆&lt;/li>
&lt;li>开始菜单，SQL Server 20XX目录下找到 &lt;code>SQL Server Configuration Manager&lt;/code>&lt;/li>
&lt;li>SQL Server 【Version】网络配置，启用&lt;code>Namedpipes&lt;/code>和&lt;code>TCP/IP&lt;/code>&lt;/li>
&lt;li>&lt;code>TCP/IP&lt;/code>属性，IP地址，配置##IP1##地址（IP2本地），##IPALL##TCP端口&lt;/li>
&lt;li>重启SQL Server 服务，连接&lt;/li>
&lt;/ol>
&lt;h2 id="高版本数据库恢复到低版本数据库">高版本数据库恢复到低版本数据库&lt;/h2>
&lt;p>问题描述： 高版本server生成的备份文件无法在低版本上恢复
解决办法：&lt;/p></description></item><item><title>vmware 记录</title><link>https://caisong.github.io/posts/vmware/</link><pubDate>Sun, 24 Jul 2016 21:50:08 +0800</pubDate><guid>https://caisong.github.io/posts/vmware/</guid><description>&lt;h2 id="此虚拟机正在使用中取得该虚拟机的所有权失败">此虚拟机正在使用中，取得该虚拟机的所有权失败&lt;/h2>
&lt;p>问题描述：该问题一般是由于强制关闭vmware进程导致
解决方案：你所配置的虚拟机目录下存在*.lck文件，删除就可以了。&lt;/p>
&lt;h2 id="centos-启动没有ipv4-地址">CentOS 启动没有IPV4 地址&lt;/h2>
&lt;p>问题描述：centos7虚拟机，没有ipv4地址，无法ssh连接
解决办法：默认设置没有开机激活网卡，修改网络配置文件&lt;/p>
&lt;pre tabindex="0">&lt;code>sudo vim /etc/sysconfig/network-scripts/ifcfg-enoXXX #修改ONBOOT=yes 
sudo systemctl restart network
&lt;/code>&lt;/pre>&lt;h2 id="虚拟机提示failed-to-start-lsb-bring-updown-networking">虚拟机提示Failed to start LSB: Bring up/down networking&lt;/h2>
&lt;p>问题描述：网络无法连接，重启network提示该错误&lt;code>Failed to start LSB: Bring up/down networking&lt;/code>。&lt;/p>
&lt;ul>
&lt;li>搜索到的解决办法一般是由于拷贝他人的虚拟机文件导致，需要更改网络配置文件中的HWADDR字段，改为你自己mac地址。(针对CentOS7)&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>ip addr show #查看mac地址
sudo vim /etc/sysconfig/network-scripts/ifcfg-enoXXX #修改HWADDR字段
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>我遇到的问题是由于关闭了&lt;code>VMware NAT Service&lt;/code> 服务导致，启动就可以了&lt;/li>
&lt;/ul>
&lt;p>谨此记录，日后再补充遇到的其他问题&lt;/p></description></item><item><title>自平衡二搜索树——红黑树</title><link>https://caisong.github.io/posts/%E7%BA%A2%E9%BB%91%E6%A0%91/</link><pubDate>Mon, 04 Jul 2016 22:25:06 +0800</pubDate><guid>https://caisong.github.io/posts/%E7%BA%A2%E9%BB%91%E6%A0%91/</guid><description>&lt;p>红黑树主要属性&lt;/p>
&lt;ol>
&lt;li>所有节点要么红色，要么黑色&lt;/li>
&lt;li>叶子节点都是黑色&lt;/li>
&lt;li>叶子节点不包含数据&lt;/li>
&lt;li>所有非叶子节点都有两个子节点&lt;/li>
&lt;li>如果一个节点是红色，那么它的子节点都是黑色&lt;/li>
&lt;/ol>



 &lt;blockquote>
 &lt;p>一个红色节点不能是其他红色节点的子节点或者父节点&lt;/p>

 &lt;/blockquote>

&lt;ol start="6">
&lt;li>在一个节点到其叶子节点的路径中，如果总是包含相同数据的黑色节点，则该路径相比其他路径是最短的。&lt;/li>
&lt;/ol>



 &lt;blockquote>
 &lt;p>从树的任何节点到其叶子节点的路径都具有相同数目的黑色节点，树里的最长路径则是红黑交替节点路径，所以最短路径必然是具有相同数量的黑色节点——只包含黑色节点的路径。因此，从根节点到叶子节点的最长路径都不会超过最短路径的两倍&lt;/p>

 &lt;/blockquote></description></item><item><title>ssh问题记录</title><link>https://caisong.github.io/posts/ssh%E9%97%AE%E9%A2%98/</link><pubDate>Thu, 30 Jun 2016 22:56:04 +0000</pubDate><guid>https://caisong.github.io/posts/ssh%E9%97%AE%E9%A2%98/</guid><description>&lt;h2 id="问题描述">问题描述&lt;/h2>
&lt;p>使用XShell 登陆linux总是回复：&lt;code>Connection closed by foreign host.&lt;/code> 或者
&lt;code>Disconnected from remote host&lt;/code>，
造成该现象的原因一般是由于ssh连接长期没有操作导致的（这也是误导我的主要原因）&lt;/p>
&lt;h2 id="原因及解决方案">原因及解决方案&lt;/h2>
&lt;h3 id="账号被限制只允许一个人登陆暂时没遇到">账号被限制只允许一个人登陆（暂时没遇到）&lt;/h3>
&lt;h3 id="无法保持长期连接">无法保持长期连接&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo vim /etc/ssh/sshd_config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>结尾添加两行&lt;/p>
&lt;pre tabindex="0">&lt;code>ClientAliveInterval 60
ClientAliveCountMax 3
&lt;/code>&lt;/pre>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 重启服务&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo systemctl restart sshd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="防火墙原因">防火墙原因&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 关闭防火墙&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo systemctl stop sshd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 或者打开22端口&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo iptables -A INPUT -p tcp --dport &lt;span style="color:#ae81ff">22&lt;/span> -j ACCEPT
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="hostsdeny文件被篡改">hosts.deny文件被篡改&lt;/h3>
&lt;p>查看&lt;code>/etc/hosts.deny&lt;/code>文件，看是否被禁用&lt;/p>
&lt;pre tabindex="0">&lt;code># 禁止所有ip访问linux 的ssh功能
sshd:all:deny
&lt;/code>&lt;/pre>


 &lt;blockquote>
 &lt;p>&lt;code>/etc/hosts.allow&lt;/code>（允许）和&lt;code>/etc/hosts.deny&lt;/code>（禁止）这两个文件是tcpd服务器的配置文件，tcpd服务器可以控制外部IP对本机服务的访问。
系统会先检查&lt;code>/etc/hosts.deny&lt;/code>规则，再检查&lt;code>/etc/hosts.allow&lt;/code>规则，如果有冲突 按&lt;code>/etc/hosts.allow&lt;/code>规则处理&lt;/p>

 &lt;/blockquote>

&lt;h3 id="客户端连接数过多">客户端连接数过多&lt;/h3>
&lt;p>将&lt;code>/etc/ssh/sshd_config&lt;/code>中 MaxStartUps 10 改为MaxStartups 10/100，重启sshd&lt;/p>
&lt;h3 id="针对vmware-nat模式">针对VMware nat模式&lt;/h3>
&lt;p>描述：连接方式使用NAT；虚拟能在ping通主机，主机无法ping通虚拟机。
原因：虚拟机自动获取的IP与vmnet8设置的IP不在同一网段。
解决：设置vmnet8自动获取ip即可。&lt;/p></description></item><item><title>bat切换当前目录</title><link>https://caisong.github.io/posts/bat/</link><pubDate>Mon, 20 Jun 2016 21:35:20 +0800</pubDate><guid>https://caisong.github.io/posts/bat/</guid><description>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bat" data-lang="bat">&lt;span style="display:flex;">&lt;span>@&lt;span style="color:#66d9ef">echo&lt;/span> off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">cd&lt;/span> %~dp0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">call&lt;/span> git pull
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>xcopy D:\google\hosts\hosts C:\Windows\System32\drivers\etc\ /Y /R
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>每次更新host，使用管理员运行显示git失败，原因是使用管理员运行时，目录切换到system32下了。
&lt;code>cd %~dp0&lt;/code>表示切换回当前目录&lt;/p></description></item><item><title>python发送邮件</title><link>https://caisong.github.io/posts/configparser/</link><pubDate>Fri, 03 Jun 2016 20:45:12 +0800</pubDate><guid>https://caisong.github.io/posts/configparser/</guid><description>&lt;h2 id="简介">简介&lt;/h2>
&lt;p>昨天代码一些基本配置全部在代码中，灵活性较差，考虑到通过配置文件的方式来实现。结构比较简单，不想用xml或json，类似配置数据库连接的&lt;code>property&lt;/code>文件就可以了，&lt;code>configparser&lt;/code>比较满足要求。
python &lt;code>configparser&lt;/code>能够读取&lt;code>*.conf&lt;/code>与&lt;code>*.ini&lt;/code>的配置文件&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>以下内容parser摘录自：&lt;a href="https://wiki.python.org/moin/ConfigParserExamples" title="configparserExamples">configparserExamples 示例&lt;/a>&lt;/p>
&lt;h2 id="configparser-使用">configparser 使用&lt;/h2>
&lt;h3 id="读配置文件">读配置文件&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-ini" data-lang="ini">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">[SectionOne]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Status: Single&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Name: Derek&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Value: Yes&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Age: 30&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Single: True&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">[SectionTwo]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">FavoriteColor&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">Green, Red, Blue&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">[SectionThree]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">FamilyName: Johnson&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">[Others]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Route: 66&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> ConfigParser
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>config &lt;span style="color:#f92672">=&lt;/span> ConfigParser&lt;span style="color:#f92672">.&lt;/span>ConfigParser()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>config&lt;span style="color:#f92672">.&lt;/span>read(&lt;span style="color:#e6db74">&amp;#39;config file path&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># read node&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>config&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;SectionOne&amp;#39;&lt;/span>,&lt;span style="color:#e6db74">&amp;#39;Status)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># read node as list&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>config&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;SectionTwo&amp;#39;&lt;/span>,&lt;span style="color:#e6db74">&amp;#39;FavoriteColor&amp;#39;&lt;/span>)&lt;span style="color:#f92672">.&lt;/span>replace(&lt;span style="color:#e6db74">&amp;#39; &amp;#39;&lt;/span>,&lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>)&lt;span style="color:#f92672">.&lt;/span>split(&lt;span style="color:#e6db74">&amp;#39;,&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="写配置文件">写配置文件&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># lets create that config file for next time...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cfgfile &lt;span style="color:#f92672">=&lt;/span> open(&lt;span style="color:#e6db74">&amp;#34;c:&lt;/span>&lt;span style="color:#ae81ff">\\&lt;/span>&lt;span style="color:#e6db74">next.ini&amp;#34;&lt;/span>,&lt;span style="color:#e6db74">&amp;#39;w&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># add the settings to the structure of the file, and lets write it out...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Config&lt;span style="color:#f92672">.&lt;/span>add_section(&lt;span style="color:#e6db74">&amp;#39;Person&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Config&lt;span style="color:#f92672">.&lt;/span>set(&lt;span style="color:#e6db74">&amp;#39;Person&amp;#39;&lt;/span>,&lt;span style="color:#e6db74">&amp;#39;HasEyes&amp;#39;&lt;/span>,&lt;span style="color:#66d9ef">True&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Config&lt;span style="color:#f92672">.&lt;/span>set(&lt;span style="color:#e6db74">&amp;#39;Person&amp;#39;&lt;/span>,&lt;span style="color:#e6db74">&amp;#39;Age&amp;#39;&lt;/span>, &lt;span style="color:#ae81ff">50&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Config&lt;span style="color:#f92672">.&lt;/span>write(cfgfile)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cfgfile&lt;span style="color:#f92672">.&lt;/span>close()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="读取含有宏的配置文件">读取含有宏的配置文件&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-ini" data-lang="ini">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">[SectionOne]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Param1: Hello&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Param2: World&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">[SectionTwo]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Param1: ${SectionOne:Param1} ${SectionOne:Param2}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">[SectionThree]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Alpha: One&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Bravo: Two&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Charlie: ${Alpha} Mississippi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> &lt;span style="color:#f92672">import&lt;/span> configparser
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> settings &lt;span style="color:#f92672">=&lt;/span> configparser&lt;span style="color:#f92672">.&lt;/span>ConfigParser()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> settings&lt;span style="color:#f92672">.&lt;/span>_interpolation &lt;span style="color:#f92672">=&lt;/span> configparser&lt;span style="color:#f92672">.&lt;/span>ExtendedInterpolation()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> settings&lt;span style="color:#f92672">.&lt;/span>read(&lt;span style="color:#e6db74">&amp;#39;settings.ini&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#e6db74">&amp;#39;settings.ini&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> settings&lt;span style="color:#f92672">.&lt;/span>sections()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#e6db74">&amp;#39;SectionOne&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;SectionTwo&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;SectionThree&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> settings&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;SectionTwo&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;Param1&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#39;Hello World&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> settings&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;SectionThree&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;Charlie&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#39;One Mississippi&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="发送邮件代码">发送邮件代码&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-ini" data-lang="ini">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">[mail]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">address: abc@qq.com&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">password: XXXXXXXXXX&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">smtp: smtp.qq.com&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">port: 465&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">subject: XXX 工作日志&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">reAddr: abc@qq.com, bcd@qq.com&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">ccAddr: abc@qq.com, bcd@qq.com&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">contextPath: a.txt&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">attachPath: b.txt &lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># -*- coding: utf-8 -*-&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">发送带附件邮件
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> email.mime.text &lt;span style="color:#f92672">import&lt;/span> MIMEText
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> email.mime.multipart &lt;span style="color:#f92672">import&lt;/span> MIMEMultipart
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> smtplib
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> datetime &lt;span style="color:#f92672">import&lt;/span> date
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> configparser
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 读取配置&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>config &lt;span style="color:#f92672">=&lt;/span> configparser&lt;span style="color:#f92672">.&lt;/span>ConfigParser()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>config&lt;span style="color:#f92672">.&lt;/span>read(&lt;span style="color:#e6db74">&amp;#39;mail.ini&amp;#39;&lt;/span>, encoding&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;utf-8&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>address &lt;span style="color:#f92672">=&lt;/span> config&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;mail&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;address&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 可以考虑加密&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>password &lt;span style="color:#f92672">=&lt;/span> config&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;mail&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;password&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>smtp &lt;span style="color:#f92672">=&lt;/span> config&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;mail&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;smtp&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>port &lt;span style="color:#f92672">=&lt;/span> config&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;mail&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;port&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>subject &lt;span style="color:#f92672">=&lt;/span> config&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;mail&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;subject&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 收件人&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>receiver &lt;span style="color:#f92672">=&lt;/span> config&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;mail&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;reAddr&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 抄送人&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>carbonCopy &lt;span style="color:#f92672">=&lt;/span> config&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;mail&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;ccAddr&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 正文&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>context &lt;span style="color:#f92672">=&lt;/span> config&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;mail&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;contextPath&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 附件(暂时考虑的一个)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>attachment &lt;span style="color:#f92672">=&lt;/span> config&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;mail&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;attachPath&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 创建一个带附件的实例&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>msg &lt;span style="color:#f92672">=&lt;/span> MIMEMultipart()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 加邮件头&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>msg[&lt;span style="color:#e6db74">&amp;#39;from&amp;#39;&lt;/span>] &lt;span style="color:#f92672">=&lt;/span> address
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>msg[&lt;span style="color:#e6db74">&amp;#39;to&amp;#39;&lt;/span>] &lt;span style="color:#f92672">=&lt;/span> receiver
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>msg[&lt;span style="color:#e6db74">&amp;#39;subject&amp;#39;&lt;/span>] &lt;span style="color:#f92672">=&lt;/span> date&lt;span style="color:#f92672">.&lt;/span>today()&lt;span style="color:#f92672">.&lt;/span>strftime(&lt;span style="color:#e6db74">&amp;#34;%Y-%m-&lt;/span>&lt;span style="color:#e6db74">%d&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>) &lt;span style="color:#f92672">+&lt;/span> subject
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>msg[&lt;span style="color:#e6db74">&amp;#39;cc&amp;#39;&lt;/span>] &lt;span style="color:#f92672">=&lt;/span> carbonCopy
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>msg&lt;span style="color:#f92672">.&lt;/span>attach(MIMEText(open(context, &lt;span style="color:#e6db74">&amp;#39;rb&amp;#39;&lt;/span>)&lt;span style="color:#f92672">.&lt;/span>read(), &lt;span style="color:#e6db74">&amp;#39;plain&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;utf-8&amp;#39;&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 构造附件&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">with&lt;/span> open(attachment, &lt;span style="color:#e6db74">&amp;#39;rb&amp;#39;&lt;/span>) &lt;span style="color:#66d9ef">as&lt;/span> myfile:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> att &lt;span style="color:#f92672">=&lt;/span> MIMEText(myfile&lt;span style="color:#f92672">.&lt;/span>read(), &lt;span style="color:#e6db74">&amp;#39;base64&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;utf-8&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> att[&lt;span style="color:#e6db74">&amp;#34;Content-Type&amp;#34;&lt;/span>] &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;application/octet-stream&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># 附件名&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> filename &lt;span style="color:#f92672">=&lt;/span> attachment&lt;span style="color:#f92672">.&lt;/span>split(&lt;span style="color:#e6db74">&amp;#39;&lt;/span>&lt;span style="color:#ae81ff">\\&lt;/span>&lt;span style="color:#e6db74">&amp;#39;&lt;/span>)[&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> att[&lt;span style="color:#e6db74">&amp;#34;Content-Disposition&amp;#34;&lt;/span>] &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;attachment; filename=&amp;#39;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> filename
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> msg&lt;span style="color:#f92672">.&lt;/span>attach(att)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 发送邮件&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">try&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> server &lt;span style="color:#f92672">=&lt;/span> smtplib&lt;span style="color:#f92672">.&lt;/span>SMTP_SSL(smtp, int(port))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> server&lt;span style="color:#f92672">.&lt;/span>login(address, password)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># 所有收件人（包括抄送）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> receiverList &lt;span style="color:#f92672">=&lt;/span> (receiver &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#e6db74">&amp;#39;,&amp;#39;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> carbonCopy)&lt;span style="color:#f92672">.&lt;/span>replace(&lt;span style="color:#e6db74">&amp;#39; &amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>)&lt;span style="color:#f92672">.&lt;/span>split(&lt;span style="color:#e6db74">&amp;#39;,&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> server&lt;span style="color:#f92672">.&lt;/span>sendmail(msg[&lt;span style="color:#e6db74">&amp;#39;from&amp;#39;&lt;/span>], receiverList, msg&lt;span style="color:#f92672">.&lt;/span>as_string())
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> server&lt;span style="color:#f92672">.&lt;/span>quit()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;success&amp;#39;&amp;#39;&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">except&lt;/span> &lt;span style="color:#a6e22e">Exception&lt;/span> &lt;span style="color:#66d9ef">as&lt;/span> e:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(e)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="注意事项">注意事项&lt;/h2>
&lt;ol>
&lt;li>若密码中包含特殊字符，需要转义&lt;/li>
&lt;/ol></description></item><item><title>python 发送邮件</title><link>https://caisong.github.io/posts/post/</link><pubDate>Thu, 02 Jun 2016 20:46:58 +0800</pubDate><guid>https://caisong.github.io/posts/post/</guid><description>&lt;h2 id="需求">需求&lt;/h2>
&lt;p>每天发送工作日报，需要send一堆人，cc一堆人（公司规定，呵呵），还要添加附件。考虑到python能够方便的发送邮箱，就打算写个脚本。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;h2 id="代码">代码&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># -*- coding: utf-8 -*-&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#!/usr/bin/env python3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">发送带附件邮件
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> email.mime.text &lt;span style="color:#f92672">import&lt;/span> MIMEText
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> email.mime.multipart &lt;span style="color:#f92672">import&lt;/span> MIMEMultipart
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> smtplib
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> datetime &lt;span style="color:#f92672">import&lt;/span> date
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 创建一个带附件的实例&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>msg &lt;span style="color:#f92672">=&lt;/span> MIMEMultipart()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 接收列表&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>receiverList &lt;span style="color:#f92672">=&lt;/span> [&lt;span style="color:#e6db74">&amp;#39;abc@yeah.net&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;abc@qq.com&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 抄送列表&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ccList &lt;span style="color:#f92672">=&lt;/span> [&lt;span style="color:#e6db74">&amp;#39;abc@yeah.net&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;abc@qq.com&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 邮件头&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>msg[&lt;span style="color:#e6db74">&amp;#39;from&amp;#39;&lt;/span>] &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;song_cai@yeah.net&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>msg[&lt;span style="color:#e6db74">&amp;#39;to&amp;#39;&lt;/span>] &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;, &amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>join(receiverList)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>msg[&lt;span style="color:#e6db74">&amp;#39;subject&amp;#39;&lt;/span>] &lt;span style="color:#f92672">=&lt;/span> date&lt;span style="color:#f92672">.&lt;/span>today()&lt;span style="color:#f92672">.&lt;/span>strftime(&lt;span style="color:#e6db74">&amp;#34;%Y-%m-&lt;/span>&lt;span style="color:#e6db74">%d&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>) &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;XX工作日报&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>msg[&lt;span style="color:#e6db74">&amp;#39;cc&amp;#39;&lt;/span>] &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;, &amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>join(ccList)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 正文&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>msg&lt;span style="color:#f92672">.&lt;/span>attach(MIMEText(open(&lt;span style="color:#e6db74">&amp;#39;d:&lt;/span>&lt;span style="color:#ae81ff">\\&lt;/span>&lt;span style="color:#e6db74">mailContext.txt&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;rb&amp;#39;&lt;/span>)&lt;span style="color:#f92672">.&lt;/span>read(), &lt;span style="color:#e6db74">&amp;#39;plain&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;utf-8&amp;#39;&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 附件&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>att &lt;span style="color:#f92672">=&lt;/span> MIMEText(open(&lt;span style="color:#e6db74">&amp;#39;d:&lt;/span>&lt;span style="color:#ae81ff">\\&lt;/span>&lt;span style="color:#e6db74">mailContext.txt&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;rb&amp;#39;&lt;/span>)&lt;span style="color:#f92672">.&lt;/span>read(), &lt;span style="color:#e6db74">&amp;#39;base64&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;utf-8&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>att[&lt;span style="color:#e6db74">&amp;#34;Content-Type&amp;#34;&lt;/span>] &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;application/octet-stream&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>att[&lt;span style="color:#e6db74">&amp;#34;Content-Disposition&amp;#34;&lt;/span>] &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;attachment; filename=&amp;#34;mailContext.txt&amp;#34;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>msg&lt;span style="color:#f92672">.&lt;/span>attach(att)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 发送邮件&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">try&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> server &lt;span style="color:#f92672">=&lt;/span> smtplib&lt;span style="color:#f92672">.&lt;/span>SMTP_SSL(&lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;smtp.qq.com&amp;#39;&amp;#39;&amp;#39;&lt;/span>, &lt;span style="color:#ae81ff">465&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> server&lt;span style="color:#f92672">.&lt;/span>login(&lt;span style="color:#e6db74">&amp;#39;song_cai@yeah.net&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;xxxxx&amp;#39;&amp;#39;&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> server&lt;span style="color:#f92672">.&lt;/span>sendmail(msg[&lt;span style="color:#e6db74">&amp;#39;from&amp;#39;&lt;/span>], receiverList &lt;span style="color:#f92672">+&lt;/span> ccList, msg&lt;span style="color:#f92672">.&lt;/span>as_string())
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> server&lt;span style="color:#f92672">.&lt;/span>quit()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;success&amp;#39;&amp;#39;&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">except&lt;/span> &lt;span style="color:#a6e22e">Exception&lt;/span> &lt;span style="color:#66d9ef">as&lt;/span> e:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> input(e)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="注意事项">注意事项&lt;/h2>
&lt;ul>
&lt;li>现在大部分邮箱使用SSL方式，所以对应地必须使用&lt;code>SMTP_SSL&lt;/code>,直接指定地址和端口，使用&lt;code>connect&lt;/code>的方式指定存在问题&lt;/li>
&lt;li>正文要写在附件之前，否则会出现两个附件（即正文部分也成为附件了）&lt;/li>
&lt;/ul>
&lt;p>** 懒惰使人进步 **&lt;/p></description></item></channel></rss>