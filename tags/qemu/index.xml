<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Qemu on Caisong's Blog</title><link>https://caisong.github.io/tags/qemu/</link><description>Recent content in Qemu on Caisong's Blog</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Wed, 09 Oct 2024 21:41:23 +0800</lastBuildDate><atom:link href="https://caisong.github.io/tags/qemu/index.xml" rel="self" type="application/rss+xml"/><item><title>qemu x86模拟aarch64</title><link>https://caisong.github.io/posts/qemu/</link><pubDate>Wed, 09 Oct 2024 21:41:23 +0800</pubDate><guid>https://caisong.github.io/posts/qemu/</guid><description>&lt;h2 id="qemu">qemu&lt;/h2>
&lt;p>&lt;a href="https://wiki.alpinelinux.org/wiki/QEMU">qemu wiki&lt;/a>&lt;/p>
&lt;h2 id="实现步骤">实现步骤&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 创建磁盘&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>qemu-img create -f qcow2 alpine.qcow2 8G
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 基于cdrom镜像创建x86虚拟机&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>qemu-system-x86_64 -m &lt;span style="color:#ae81ff">512&lt;/span> -nic user -boot d -cdrom alpine-standard-3.20.3-x86_64.iso -hda alpine.qcow2 -display gtk -enable-kvm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 基于cdrom镜像创建arm虚拟机&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 下面命令都-bios两种引导方式&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>qemu-system-aarch64 -m &lt;span style="color:#ae81ff">2048&lt;/span> -cpu cortex-a57 -smp &lt;span style="color:#ae81ff">2&lt;/span> -M virt -bios QEMU_EFI.fd -nographic -drive &lt;span style="color:#66d9ef">if&lt;/span>&lt;span style="color:#f92672">=&lt;/span>none,file&lt;span style="color:#f92672">=&lt;/span>ubuntu-16.04.3-server-arm64.iso,id&lt;span style="color:#f92672">=&lt;/span>cdrom,media&lt;span style="color:#f92672">=&lt;/span>cdrom -device virtio-scsi-device -device scsi-cd,drive&lt;span style="color:#f92672">=&lt;/span>cdrom -drive &lt;span style="color:#66d9ef">if&lt;/span>&lt;span style="color:#f92672">=&lt;/span>none,file&lt;span style="color:#f92672">=&lt;/span>ubuntu16.04-arm64.img,id&lt;span style="color:#f92672">=&lt;/span>hd0 -device virtio-blk-device,drive&lt;span style="color:#f92672">=&lt;/span>hd0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>qemu-system-aarch64 -m &lt;span style="color:#ae81ff">1024&lt;/span> -cpu cortex-a57 -smp &lt;span style="color:#ae81ff">2&lt;/span> -M virt -bios /usr/share/AAVMF/AAVMF_CODE.fd -nographic -drive &lt;span style="color:#66d9ef">if&lt;/span>&lt;span style="color:#f92672">=&lt;/span>none,file&lt;span style="color:#f92672">=&lt;/span>/opt/os/CentOS-7-aarch64-Minimal-2009.iso,id&lt;span style="color:#f92672">=&lt;/span>cdrom,media&lt;span style="color:#f92672">=&lt;/span>cdrom -device virtio-scsi-device -device scsi-cd,drive&lt;span style="color:#f92672">=&lt;/span>cdrom -drive &lt;span style="color:#66d9ef">if&lt;/span>&lt;span style="color:#f92672">=&lt;/span>none,file&lt;span style="color:#f92672">=&lt;/span>/var/lib/libvirt/images/test.img,id&lt;span style="color:#f92672">=&lt;/span>hd0 -device virtio-blk-device,drive&lt;span style="color:#f92672">=&lt;/span>hd0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>qemu-system-arm -m &lt;span style="color:#ae81ff">1024&lt;/span> -cpu cortex-a15 -M virt -bios /usr/share/AAVMF/AAVMF_CODE.fd -nographic -drive &lt;span style="color:#66d9ef">if&lt;/span>&lt;span style="color:#f92672">=&lt;/span>none,file&lt;span style="color:#f92672">=&lt;/span>/root/CentOS-7-aarch64-Minimal-2009.iso,id&lt;span style="color:#f92672">=&lt;/span>cdrom,media&lt;span style="color:#f92672">=&lt;/span>cdrom -device virtio-scsi-device -device scsi-cd,drive&lt;span style="color:#f92672">=&lt;/span>cdrom -drive &lt;span style="color:#66d9ef">if&lt;/span>&lt;span style="color:#f92672">=&lt;/span>none,file&lt;span style="color:#f92672">=&lt;/span>/root/centos-arm.img,id&lt;span style="color:#f92672">=&lt;/span>hd0 -device virtio-blk-device,drive&lt;span style="color:#f92672">=&lt;/span>hd0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>qemu-system-arm -m &lt;span style="color:#ae81ff">1024&lt;/span> -cpu cortex-a15 -M virt -bios /usr/share/AAVMF/AAVMF_CODE.fd -nographic -drive &lt;span style="color:#66d9ef">if&lt;/span>&lt;span style="color:#f92672">=&lt;/span>none,file&lt;span style="color:#f92672">=&lt;/span>/root/CentOS-7-aarch64-Minimal-2009.iso,id&lt;span style="color:#f92672">=&lt;/span>cdrom,media&lt;span style="color:#f92672">=&lt;/span>cdrom -device virtio-scsi-device -device scsi-cd,drive&lt;span style="color:#f92672">=&lt;/span>cdrom -drive &lt;span style="color:#66d9ef">if&lt;/span>&lt;span style="color:#f92672">=&lt;/span>none,file&lt;span style="color:#f92672">=&lt;/span>/root/centos-arm.img,id&lt;span style="color:#f92672">=&lt;/span>hd0 -device virtio-blk-device,drive&lt;span style="color:#f92672">=&lt;/span>hd0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>qemu-system-aarch64 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -m 4096M -cpu cortex-a57 -M virt &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -bios QEMU_EFI.fd &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -localtime -serial telnet::4444,server -nographic &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -drive &lt;span style="color:#66d9ef">if&lt;/span>&lt;span style="color:#f92672">=&lt;/span>none,file&lt;span style="color:#f92672">=&lt;/span>./qcow2.img,id&lt;span style="color:#f92672">=&lt;/span>hd0 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -device virtio-blk-device,drive&lt;span style="color:#f92672">=&lt;/span>hd0 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -device virtio-net-device,vlan&lt;span style="color:#f92672">=&lt;/span>0,id&lt;span style="color:#f92672">=&lt;/span>net0,mac&lt;span style="color:#f92672">=&lt;/span>52:54:00:09:a4:37 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -net user,vlan&lt;span style="color:#f92672">=&lt;/span>0,name&lt;span style="color:#f92672">=&lt;/span>hostnet0 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -redir tcp:40022::22
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>