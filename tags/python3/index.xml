<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Python3 on Caisong's Blog</title><link>https://caisong.github.io/tags/python3/</link><description>Recent content in Python3 on Caisong's Blog</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Fri, 03 Sep 2021 21:41:22 +0800</lastBuildDate><atom:link href="https://caisong.github.io/tags/python3/index.xml" rel="self" type="application/rss+xml"/><item><title>Python换行符处理</title><link>https://caisong.github.io/posts/python%E6%8D%A2%E8%A1%8C%E7%AC%A6%E5%A4%84%E7%90%86/</link><pubDate>Fri, 03 Sep 2021 21:41:22 +0800</pubDate><guid>https://caisong.github.io/posts/python%E6%8D%A2%E8%A1%8C%E7%AC%A6%E5%A4%84%E7%90%86/</guid><description>&lt;h1 id="python换行符处理">python换行符处理&lt;/h1>
&lt;h2 id="python-2pep-278----universal-newline-support">Python 2（PEP 278 &amp;ndash; Universal Newline Support）&lt;/h2>
&lt;ol>
&lt;li>如果不是txt文件，建议用wb和rb来读写。通过二进制读写，不会有换行问题。&lt;/li>
&lt;li>如果需要明文内容，请用rU来读取（&lt;strong>强烈推荐&lt;/strong>），即&lt;strong>U通用换行模式（Universal new line mode）。该模式会把所有的换行符（\r \n \r\n）替换为\n&lt;/strong>。只支持读入，但是也足够了。这是Python 提供给我们的最好的选择，没有之一。&lt;/li>
&lt;/ol>
&lt;p>对比r和rU的结果：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>content &lt;span style="color:#f92672">=&lt;/span> file(fn, &lt;span style="color:#e6db74">&amp;#39;r&amp;#39;&lt;/span>)&lt;span style="color:#f92672">.&lt;/span>read()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># test\r\ntest2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 这里的换行会因不同系统而不同 &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>content &lt;span style="color:#f92672">=&lt;/span> file(fn, &lt;span style="color:#e6db74">&amp;#39;rU&amp;#39;&lt;/span>)&lt;span style="color:#f92672">.&lt;/span>read()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># test\ntest2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 所有的换行都被统一，不分系统&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="python-3open函数-2-built-in-functions">Python 3(Open函数: 2. Built-in Functions)&lt;/h2>
&lt;p>** 请注意：Python 3不推荐用rU模式！**&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>open(file, mode&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;r&amp;#39;&lt;/span>, buffering&lt;span style="color:#f92672">=-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>, encoding&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">None&lt;/span>, errors&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">None&lt;/span>, newline&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">None&lt;/span>, closefd&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">True&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>在Python 3，可以通过open函数的&lt;strong>newline&lt;/strong>参数来控制&lt;strong>Universal new line mode&lt;/strong>：读取时候，不指定newline，则默认开启Universal new line mode，所有\n, \r, or \r\n被默认转换为\n ；写入时，不指定newline，则换行符为各系统默认的换行符（\n, \r, or \r\n, ），指定为newline=&amp;rsquo;\n&amp;rsquo;，则都替换为\n（相当于Universal new line mode）；不论读或者写时，newline=&amp;lsquo;&amp;lsquo;都表示不转换。&lt;/p></description></item></channel></rss>